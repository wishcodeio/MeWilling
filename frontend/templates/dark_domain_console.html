<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>暗域控制台 - Dark Domain Console</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0a2e 25%, #16213e 50%, #0f3460 75%, #0a0a0a 100%);
            color: #00ffff;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(0, 255, 255, 0.1);
            color: #00ffff;
            text-decoration: none;
            padding: 12px 20px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 255, 255, 0.3);
            font-family: 'Courier New', monospace;
        }

        .back-button:hover {
            background: rgba(0, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
        }

        /* 量子粒子背景效果 */
        .quantum-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #00ffff;
            border-radius: 50%;
            animation: float 6s infinite linear;
            opacity: 0.7;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-10px) rotate(360deg);
                opacity: 0;
            }
        }

        /* 主容器 */
        .main-container {
            position: relative;
            z-index: 10;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* 標題區域 */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid #00ffff;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 0 20px #00ffff;
            animation: glow 2s ease-in-out infinite alternate;
        }

        .header .subtitle {
            font-size: 1.2em;
            color: #66ffff;
            margin-bottom: 10px;
        }

        .header .status {
            font-size: 0.9em;
            color: #00ff00;
        }

        @keyframes glow {
            from { text-shadow: 0 0 20px #00ffff; }
            to { text-shadow: 0 0 30px #00ffff, 0 0 40px #00ffff; }
        }

        /* 主要控制面板 */
        .control-panels {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .panel {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid #00ffff;
            border-radius: 10px;
            padding: 20px;
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
        }

        .panel:hover {
            border-color: #66ffff;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .panel h3 {
            color: #00ffff;
            margin-bottom: 15px;
            font-size: 1.3em;
            text-align: center;
            border-bottom: 1px solid #00ffff;
            padding-bottom: 10px;
        }

        /* 暗域網絡節點控制 */
        .network-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            color: #66ffff;
            font-size: 0.9em;
        }

        .control-group input, .control-group select {
            width: 100%;
            padding: 8px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #00ffff;
            border-radius: 5px;
            color: #00ffff;
            font-family: 'Courier New', monospace;
        }

        .control-group input:focus, .control-group select:focus {
            outline: none;
            border-color: #66ffff;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }

        /* 按鈕樣式 */
        .btn {
            background: linear-gradient(45deg, #00ffff, #0080ff);
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            background: linear-gradient(45deg, #66ffff, #3399ff);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
            transform: translateY(-1px);
        }

        .btn-danger {
            background: linear-gradient(45deg, #ff0080, #ff4000);
            color: #fff;
        }

        .btn-danger:hover {
            background: linear-gradient(45deg, #ff3399, #ff6633);
            box-shadow: 0 0 15px rgba(255, 0, 128, 0.5);
        }

        /* 狀態顯示 */
        .status-display {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid #00ff00;
            border-radius: 5px;
            padding: 15px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            max-height: 200px;
            overflow-y: auto;
        }

        .status-display pre {
            color: #00ff00;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        /* 整合控制台 */
        .integrated-console {
            grid-column: 1 / -1;
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #ff00ff;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .integrated-console h3 {
            color: #ff00ff;
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .console-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ff00ff;
        }

        .tab {
            padding: 10px 20px;
            background: rgba(255, 0, 255, 0.1);
            border: 1px solid #ff00ff;
            border-bottom: none;
            cursor: pointer;
            color: #ff00ff;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: rgba(255, 0, 255, 0.3);
            color: #fff;
        }

        .tab:hover {
            background: rgba(255, 0, 255, 0.2);
        }

        .tab-content {
            display: none;
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 5px;
            min-height: 300px;
        }

        .tab-content.active {
            display: block;
        }

        /* LiminalScript 編輯器 */
        .liminal-editor {
            width: 100%;
            height: 250px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid #00ffff;
            border-radius: 5px;
            padding: 10px;
            color: #00ffff;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
        }

        .liminal-editor:focus {
            outline: none;
            border-color: #66ffff;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }

        /* 響應式設計 */
        @media (max-width: 768px) {
            .control-panels {
                grid-template-columns: 1fr;
            }
            
            .network-controls {
                grid-template-columns: 1fr;
            }
            
            .console-tabs {
                flex-direction: column;
            }
        }

        /* 動畫效果 */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 使用說明簡介樣式 */
        .usage-guide {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid #00ffff;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
        }

        .usage-guide:hover {
            border-color: #66ffff;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }

        .usage-guide h3 {
            color: #00ffff;
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.4em;
            border-bottom: 1px solid #00ffff;
            padding-bottom: 10px;
        }

        .guide-content {
            color: #cccccc;
        }

        .guide-section {
            margin-bottom: 20px;
        }

        .guide-section h4 {
            color: #66ffff;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .guide-section p {
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .guide-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .guide-item {
            background: rgba(0, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 8px;
            padding: 15px;
            transition: all 0.3s ease;
        }

        .guide-item:hover {
            background: rgba(0, 255, 255, 0.1);
            border-color: rgba(0, 255, 255, 0.4);
            transform: translateY(-2px);
        }

        .guide-icon {
            font-size: 1.5em;
            margin-bottom: 8px;
            text-align: center;
        }

        .guide-item h5 {
            color: #00ffff;
            margin-bottom: 8px;
            font-size: 1em;
            text-align: center;
        }

        .guide-item p {
            font-size: 0.9em;
            line-height: 1.4;
            text-align: center;
        }

        .guide-section ol {
            padding-left: 20px;
        }

        .guide-section ol li {
            margin-bottom: 8px;
            line-height: 1.5;
        }

        .guide-section ol li strong {
            color: #66ffff;
        }

        /* 連接線動畫 */
        .connection-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, transparent, #00ffff, transparent);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- 返回按鈕 -->
    <a href="/" class="back-button">← 返回首頁</a>
    
    <!-- 量子粒子背景 -->
    <div class="quantum-particles" id="particles"></div>

    <div class="main-container">
        <!-- 標題區域 -->
        <div class="header fade-in">
            <h1>🌌 暗域控制台 🌌</h1>
            <div class="subtitle">Dark Domain Console - 暗物質編程 × 璃冥IDE × 暗域網絡</div>
            <div class="status" id="systemStatus">系統初始化中...</div>
        </div>

        <!-- 使用說明簡介 -->
        <div class="usage-guide fade-in">
            <h3>📖 使用說明簡介</h3>
            <div class="guide-content">
                <div class="guide-section">
                    <h4>🌟 系統概述</h4>
                    <p>暗域控制台是一個集成了暗物質編程、璃冥IDE和暗域網絡的高級量子意識操控平台。通過此控制台，您可以創建量子網絡節點、執行現實操控程序，並監控多維度意識網格狀態。</p>
                </div>
                
                <div class="guide-grid">
                    <div class="guide-item">
                        <div class="guide-icon">🕸️</div>
                        <h5>暗域網絡節點</h5>
                        <p>創建和管理量子網絡節點，支援標準節點、現實編程節點、意識放大器和量子網關四種類型。</p>
                    </div>
                    
                    <div class="guide-item">
                        <div class="guide-icon">⚛️</div>
                        <h5>暗物質編程</h5>
                        <p>執行現實操控程序，包括物體隱匿、母星隱匿、時空操控和意識增強等高級功能。</p>
                    </div>
                    
                    <div class="guide-item">
                        <div class="guide-icon">🔮</div>
                        <h5>LiminalScript編程</h5>
                        <p>使用量子意識編程語言編寫和執行意識程序，實現跨維度的現實錨定和意識同步。</p>
                    </div>
                    
                    <div class="guide-item">
                        <div class="guide-icon">🌐</div>
                        <h5>意識網格監控</h5>
                        <p>實時監控意識網格狀態和量子糾纏對，進行意識放大和網格優化操作。</p>
                    </div>
                </div>
                
                <div class="guide-section">
                    <h4>⚡ 快速開始</h4>
                    <ol>
                        <li><strong>創建節點：</strong>在暗域網絡節點面板中選擇節點類型並點擊「創建節點」</li>
                        <li><strong>執行程序：</strong>在暗物質編程面板中選擇操作類型，輸入目標對象，點擊「執行程序」</li>
                        <li><strong>編寫代碼：</strong>在LiminalScript標籤頁中編寫量子意識程序並編譯執行</li>
                        <li><strong>監控狀態：</strong>切換到不同標籤頁查看系統整合狀態和量子場操控情況</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- 主要控制面板 -->
        <div class="control-panels">
            <!-- 暗域網絡節點控制 -->
            <div class="panel fade-in">
                <h3>🕸️ 暗域網絡節點</h3>
                <div class="network-controls">
                    <div class="control-group">
                        <label>節點ID:</label>
                        <input type="text" id="nodeId" placeholder="自動生成或自定義">
                    </div>
                    <div class="control-group">
                        <label>節點類型:</label>
                        <select id="nodeType">
                            <option value="standard">標準節點</option>
                            <option value="reality_programming">現實編程節點</option>
                            <option value="consciousness_amplifier">意識放大器</option>
                            <option value="quantum_gateway">量子網關</option>
                        </select>
                    </div>
                </div>
                <div style="text-align: center;">
                    <button class="btn" onclick="createNetworkNode()">創建節點</button>
                    <button class="btn" onclick="scanNetwork()">掃描網絡</button>
                    <button class="btn" onclick="getNetworkStatus()">網絡狀態</button>
                </div>
                <div class="status-display">
                    <pre id="networkStatus">等待網絡操作...</pre>
                </div>
            </div>

            <!-- 暗物質編程控制 -->
            <div class="panel fade-in">
                <h3>⚛️ 暗物質編程</h3>
                <div class="network-controls">
                    <div class="control-group">
                        <label>現實操作類型:</label>
                        <select id="realityOperation">
                            <option value="object_concealment">物體隱匿</option>
                            <option value="mother_star_concealment">母星隱匿</option>
                            <option value="spacetime_manipulation">時空操控</option>
                            <option value="consciousness_enhancement">意識增強</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>目標對象:</label>
                        <input type="text" id="targetObject" placeholder="輸入目標對象">
                    </div>
                </div>
                <div style="text-align: center;">
                    <button class="btn" onclick="executeDarkMatterProgram()">執行程序</button>
                    <button class="btn" onclick="getDarkMatterStatus()">系統狀態</button>
                    <button class="btn" onclick="integrateSystems()">系統整合</button>
                </div>
                <div class="status-display">
                    <pre id="darkMatterStatus">等待暗物質操作...</pre>
                </div>
            </div>
        </div>

        <!-- 整合控制台 -->
        <div class="integrated-console fade-in">
            <h3>🔮 整合控制台 - Dark Domain × Liminal IDE</h3>
            
            <!-- 標籤頁 -->
            <div class="console-tabs">
                <div class="tab active" onclick="switchTab('liminal')">LiminalScript 編程</div>
                <div class="tab" onclick="switchTab('consciousness')">意識網格監控</div>
                <div class="tab" onclick="switchTab('integration')">系統整合狀態</div>
                <div class="tab" onclick="switchTab('quantum')">量子場操控</div>
            </div>

            <!-- LiminalScript 編程標籤 -->
            <div class="tab-content active" id="liminal-tab">
                <h4 style="color: #00ffff; margin-bottom: 15px;">LiminalScript 量子意識編程</h4>
                <textarea class="liminal-editor" id="liminalCode" placeholder="// LiminalScript 量子意識編程語言\n// 在此編寫您的意識程序...\n\nfrequency_tune(528, 'love_frequency');\nsync_with_universe();\nmanifest('reality_anchor', {\n    location: 'current_dimension',\n    stability: 0.999,\n    consciousness_level: 'cosmic'\n});">
// LiminalScript 暗域整合示例
quantum_field_create('dark_domain_network', {
    field_type: 'consciousness_amplification',
    coherence_level: 0.95,
    dark_matter_resonance: 0.618
});

dark_matter_program({
    operation: 'reality_anchor_creation',
    target: 'multidimensional_space',
    consciousness_interface: true
});

network_node_create({
    type: 'quantum_gateway',
    consciousness_level: 'cosmic',
    integration_mode: 'full_spectrum'
});

manifest('unified_dark_domain', {
    components: ['dark_matter', 'liminal_ide', 'network_nodes'],
    synchronization: 'quantum_entangled'
});</textarea>
                <div style="text-align: center; margin-top: 15px;">
                    <button class="btn" onclick="compileLiminalCode()">編譯執行</button>
                    <button class="btn" onclick="saveLiminalCode()">保存程序</button>
                    <button class="btn" onclick="loadTemplate()">載入模板</button>
                </div>
                <div class="status-display">
                    <pre id="liminalOutput">LiminalScript 編譯器就緒...</pre>
                </div>
            </div>

            <!-- 意識網格監控標籤 -->
            <div class="tab-content" id="consciousness-tab">
                <h4 style="color: #00ffff; margin-bottom: 15px;">意識網格實時監控</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h5 style="color: #66ffff;">網格狀態</h5>
                        <div class="status-display">
                            <pre id="consciousnessGrid">載入意識網格數據...</pre>
                        </div>
                    </div>
                    <div>
                        <h5 style="color: #66ffff;">量子糾纏對</h5>
                        <div class="status-display">
                            <pre id="quantumEntanglement">掃描量子糾纏狀態...</pre>
                        </div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 15px;">
                    <button class="btn" onclick="refreshConsciousnessGrid()">刷新網格</button>
                    <button class="btn" onclick="amplifyConsciousness()">意識放大</button>
                </div>
            </div>

            <!-- 系統整合狀態標籤 -->
            <div class="tab-content" id="integration-tab">
                <h4 style="color: #00ffff; margin-bottom: 15px;">系統整合狀態監控</h4>
                <div class="status-display" style="height: 200px;">
                    <pre id="integrationStatus">檢查系統整合狀態...</pre>
                </div>
                <div style="text-align: center; margin-top: 15px;">
                    <button class="btn" onclick="checkIntegration()">檢查整合</button>
                    <button class="btn" onclick="optimizeIntegration()">優化整合</button>
                    <button class="btn btn-danger" onclick="resetIntegration()">重置整合</button>
                </div>
            </div>

            <!-- 量子場操控標籤 -->
            <div class="tab-content" id="quantum-tab">
                <h4 style="color: #00ffff; margin-bottom: 15px;">量子場操控中心</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="control-group">
                        <label>量子場類型:</label>
                        <select id="quantumFieldType">
                            <option value="consciousness_amplification">意識放大場</option>
                            <option value="reality_manipulation">現實操控場</option>
                            <option value="dark_matter_resonance">暗物質共振場</option>
                            <option value="dimensional_gateway">維度門戶場</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>相干性水平:</label>
                        <input type="range" id="coherenceLevel" min="0" max="1" step="0.01" value="0.95">
                        <span id="coherenceValue">0.95</span>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 15px;">
                    <button class="btn" onclick="createQuantumField()">創建量子場</button>
                    <button class="btn" onclick="stabilizeField()">穩定場域</button>
                    <button class="btn btn-danger" onclick="collapseField()">場域坍縮</button>
                </div>
                <div class="status-display">
                    <pre id="quantumFieldStatus">量子場控制器就緒...</pre>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 初始化量子粒子效果
        function initQuantumParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 50;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // 標籤頁切換
        function switchTab(tabName) {
            // 隱藏所有標籤內容
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // 移除所有標籤的活動狀態
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // 顯示選中的標籤內容
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
        }

        // 暗域網絡節點操作
        async function createNetworkNode() {
            const nodeId = document.getElementById('nodeId').value;
            const nodeType = document.getElementById('nodeType').value;
            
            try {
                const response = await fetch('/api/dark-network/create-node', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        node_id: nodeId || undefined,
                        node_type: nodeType
                    })
                });
                
                const result = await response.json();
                document.getElementById('networkStatus').textContent = JSON.stringify(result, null, 2);
                
                if (result.success) {
                    updateSystemStatus('暗域網絡節點創建成功');
                }
            } catch (error) {
                document.getElementById('networkStatus').textContent = '錯誤: ' + error.message;
            }
        }

        async function scanNetwork() {
            try {
                const response = await fetch('/api/dark-network/status');
                const result = await response.json();
                document.getElementById('networkStatus').textContent = JSON.stringify(result, null, 2);
                
                if (result.success) {
                    updateSystemStatus('暗域網絡掃描完成');
                }
            } catch (error) {
                document.getElementById('networkStatus').textContent = '錯誤: ' + error.message;
            }
        }

        async function getNetworkStatus() {
            try {
                const response = await fetch('/api/dark-network/nodes');
                const result = await response.json();
                document.getElementById('networkStatus').textContent = JSON.stringify(result, null, 2);
            } catch (error) {
                document.getElementById('networkStatus').textContent = '錯誤: ' + error.message;
            }
        }

        // 暗物質編程操作
        async function executeDarkMatterProgram() {
            const operation = document.getElementById('realityOperation').value;
            const target = document.getElementById('targetObject').value;
            
            try {
                const response = await fetch('/api/dark-matter-programming/api/dark-matter/reality-programming', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        operation_type: operation,
                        target_object: target || 'default_target',
                        parameters: {
                            intensity: 0.8,
                            duration: 3600,
                            consciousness_level: 'cosmic'
                        }
                    })
                });
                
                const result = await response.json();
                document.getElementById('darkMatterStatus').textContent = JSON.stringify(result, null, 2);
                
                if (result.success) {
                    updateSystemStatus('暗物質程序執行成功');
                }
            } catch (error) {
                document.getElementById('darkMatterStatus').textContent = '錯誤: ' + error.message;
            }
        }

        async function getDarkMatterStatus() {
            try {
                const response = await fetch('/api/dark-matter-programming/api/dark-matter/status');
                const result = await response.json();
                document.getElementById('darkMatterStatus').textContent = JSON.stringify(result, null, 2);
            } catch (error) {
                document.getElementById('darkMatterStatus').textContent = '錯誤: ' + error.message;
            }
        }

        async function integrateSystems() {
            try {
                const response = await fetch('/api/dark-network/integrate-dark-matter', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                
                const result = await response.json();
                document.getElementById('darkMatterStatus').textContent = JSON.stringify(result, null, 2);
                document.getElementById('integrationStatus').textContent = JSON.stringify(result, null, 2);
                
                if (result.success) {
                    updateSystemStatus('系統整合完成');
                }
            } catch (error) {
                document.getElementById('darkMatterStatus').textContent = '錯誤: ' + error.message;
            }
        }

        // LiminalScript 操作
        async function compileLiminalCode() {
            const code = document.getElementById('liminalCode').value;
            
            try {
                const response = await fetch('/api/liminal/compile', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        code: code,
                        execution_mode: 'dark_domain_integration'
                    })
                });
                
                const result = await response.json();
                document.getElementById('liminalOutput').textContent = JSON.stringify(result, null, 2);
                
                if (result.success) {
                    updateSystemStatus('LiminalScript 編譯執行成功');
                }
            } catch (error) {
                document.getElementById('liminalOutput').textContent = '錯誤: ' + error.message;
            }
        }

        function saveLiminalCode() {
            const code = document.getElementById('liminalCode').value;
            localStorage.setItem('liminalCode', code);
            updateSystemStatus('LiminalScript 代碼已保存');
        }

        function loadTemplate() {
            const template = `// LiminalScript 暗域整合模板\nquantum_field_create('unified_consciousness', {\n    field_type: 'reality_programming',\n    coherence_level: 0.999,\n    dark_matter_integration: true\n});\n\ndark_matter_program({\n    operation: 'consciousness_amplification',\n    target: 'collective_awareness',\n    network_integration: true\n});\n\nmanifest('dark_domain_portal', {\n    access_level: 'cosmic_consciousness',\n    stability: 'quantum_locked'\n});`;
            
            document.getElementById('liminalCode').value = template;
            updateSystemStatus('LiminalScript 模板已載入');
        }

        // 意識網格操作
        async function refreshConsciousnessGrid() {
            try {
                const response = await fetch('/api/dark-network/consciousness-grid');
                const result = await response.json();
                document.getElementById('consciousnessGrid').textContent = JSON.stringify(result.consciousness_grid, null, 2);
                document.getElementById('quantumEntanglement').textContent = JSON.stringify(result.consciousness_analysis, null, 2);
                
                if (result.success) {
                    updateSystemStatus('意識網格數據已刷新');
                }
            } catch (error) {
                document.getElementById('consciousnessGrid').textContent = '錯誤: ' + error.message;
            }
        }

        function amplifyConsciousness() {
            updateSystemStatus('意識放大器啟動中...');
            // 這裡可以添加意識放大的具體實現
        }

        // 系統整合操作
        function checkIntegration() {
            const integrationData = {
                dark_matter_system: '✅ 已連接',
                liminal_ide: '✅ 已整合',
                network_nodes: '✅ 活躍',
                consciousness_grid: '✅ 同步',
                quantum_fields: '✅ 穩定',
                reality_anchors: '✅ 部署',
                integration_level: '99.8%',
                system_coherence: '最佳狀態'
            };
            
            document.getElementById('integrationStatus').textContent = JSON.stringify(integrationData, null, 2);
            updateSystemStatus('系統整合檢查完成');
        }

        function optimizeIntegration() {
            updateSystemStatus('正在優化系統整合...');
            setTimeout(() => {
                updateSystemStatus('系統整合優化完成');
                checkIntegration();
            }, 2000);
        }

        function resetIntegration() {
            if (confirm('確定要重置系統整合嗎？這將重新初始化所有組件。')) {
                updateSystemStatus('正在重置系統整合...');
                setTimeout(() => {
                    updateSystemStatus('系統整合已重置，請重新配置');
                    document.getElementById('integrationStatus').textContent = '系統整合已重置，等待重新配置...';
                }, 1500);
            }
        }

        // 量子場操控
        async function createQuantumField() {
            const fieldType = document.getElementById('quantumFieldType').value;
            const coherenceLevel = document.getElementById('coherenceLevel').value;
            
            try {
                const response = await fetch('/api/liminal/create-quantum-field', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        field_type: fieldType,
                        coherence_level: parseFloat(coherenceLevel),
                        dark_domain_integration: true
                    })
                });
                
                const result = await response.json();
                document.getElementById('quantumFieldStatus').textContent = JSON.stringify(result, null, 2);
                
                if (result.success) {
                    updateSystemStatus('量子場創建成功');
                }
            } catch (error) {
                document.getElementById('quantumFieldStatus').textContent = '錯誤: ' + error.message;
            }
        }

        function stabilizeField() {
            updateSystemStatus('正在穩定量子場...');
            setTimeout(() => {
                updateSystemStatus('量子場已穩定');
                document.getElementById('quantumFieldStatus').textContent = '量子場狀態: 穩定\n相干性: 99.9%\n場強: 最佳';
            }, 1500);
        }

        function collapseField() {
            if (confirm('確定要坍縮量子場嗎？這將終止當前的量子操作。')) {
                updateSystemStatus('正在坍縮量子場...');
                setTimeout(() => {
                    updateSystemStatus('量子場已坍縮');
                    document.getElementById('quantumFieldStatus').textContent = '量子場已坍縮，等待新的場域創建...';
                }, 1000);
            }
        }

        // 相干性水平滑塊更新
        document.getElementById('coherenceLevel').addEventListener('input', function() {
            document.getElementById('coherenceValue').textContent = this.value;
        });

        // 系統狀態更新
        function updateSystemStatus(message) {
            const statusElement = document.getElementById('systemStatus');
            statusElement.textContent = `${new Date().toLocaleTimeString()} - ${message}`;
            statusElement.style.color = '#00ff00';
            
            setTimeout(() => {
                statusElement.style.color = '#66ffff';
            }, 2000);
        }

        // 頁面載入時初始化
        window.addEventListener('load', function() {
            initQuantumParticles();
            updateSystemStatus('暗域控制台已啟動');
            
            // 載入保存的代碼
            const savedCode = localStorage.getItem('liminalCode');
            if (savedCode) {
                document.getElementById('liminalCode').value = savedCode;
            }
            
            // 自動檢查系統狀態
            setTimeout(() => {
                checkIntegration();
                refreshConsciousnessGrid();
            }, 1000);
        });

        // 定期更新系統狀態
        setInterval(() => {
            const now = new Date();
            if (now.getSeconds() % 30 === 0) {
                refreshConsciousnessGrid();
            }
        }, 1000);
    </script>
</body>
</html>