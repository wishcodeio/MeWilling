<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÂÄã‰∫∫ÂÖÉÂÆáÂÆôÁîüÊàêÂô® - ÊØèÂÄã‰∫∫ÁöÑÁç®Á´ãÂ≠òÂú®</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.1/dist/aframe-environment-component.min.js"></script>
    <style>
        body {
            margin: 0;
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
            position: relative;
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 380px;
            z-index: 1001;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            text-decoration: none;
            padding: 12px 20px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .creation-panel {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 25px;
            color: white;
            min-width: 350px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .panel-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #f7b731);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .creation-section {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            border-left: 4px solid #4ecdc4;
        }
        
        .section-title {
            font-weight: bold;
            color: #4ecdc4;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-label {
            display: block;
            margin-bottom: 5px;
            color: #cccccc;
            font-size: 14px;
        }
        
        .input-field {
            width: 100%;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 14px;
            box-sizing: border-box;
        }
        
        .input-field::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .textarea-field {
            height: 80px;
            resize: vertical;
        }
        
        .select-field {
            appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg fill="white" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 20px;
        }
        
        .color-picker {
            width: 100%;
            height: 40px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        
        .creation-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .create-btn {
            flex: 1;
            padding: 12px 15px;
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .create-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        .create-btn.primary {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
        }
        
        .spirit-companion {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 20px;
            color: white;
            min-width: 300px;
            max-height: 60vh;
            overflow-y: auto;
        }
        
        .companion-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .companion-name {
            text-align: center;
            font-weight: bold;
            color: #4ecdc4;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .companion-message {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 10px;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .companion-controls {
            display: flex;
            gap: 8px;
            margin-top: 15px;
        }
        
        .companion-btn {
            flex: 1;
            padding: 8px 12px;
            background: linear-gradient(45deg, #45b7d1, #f7b731);
            border: none;
            border-radius: 6px;
            color: white;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        .companion-btn:hover {
            transform: translateY(-1px);
        }
        
        .universe-status {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 15px;
            color: white;
            min-width: 250px;
        }
        
        .status-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #ff6b6b;
            text-align: center;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .status-value {
            color: #4ecdc4;
            font-weight: bold;
        }
        
        .floating-actions {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .action-btn {
            padding: 15px 20px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            min-width: 150px;
        }
        
        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.4);
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #4ecdc4, #45b7d1);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <a href="/" class="back-button">‚Üê ËøîÂõûÈ¶ñÈ†Å</a>
    <!-- ÂâµÂª∫Èù¢Êùø -->
    <div class="creation-panel">
        <div class="panel-title">üåü ÂÄã‰∫∫ÂÖÉÂÆáÂÆôÁîüÊàêÂô®</div>
        
        <!-- ÂÄã‰∫∫‰ø°ÊÅØ -->
        <div class="creation-section">
            <div class="section-title">üë§ ÂÄã‰∫∫Ë∫´‰ªΩ</div>
            <div class="input-group">
                <label class="input-label">‰Ω†ÁöÑÂêçÂ≠ó</label>
                <input type="text" class="input-field" id="userName" placeholder="Ëº∏ÂÖ•‰Ω†ÁöÑÁúüÂØ¶ÂßìÂêçÊàñÂåñÂêç">
            </div>
            <div class="input-group">
                <label class="input-label">ÂÄã‰∫∫ÂÆ£Ë®Ä</label>
                <textarea class="input-field textarea-field" id="personalMotto" placeholder="ÊèèËø∞‰Ω†ÁöÑ‰∫∫ÁîüÁêÜÂøµ„ÄÅÂÉπÂÄºËßÄÊàñÈ°òÊôØ"></textarea>
            </div>
            <div class="input-group">
                <label class="input-label">ÈùàÈ≠ÇËâ≤ÂΩ©</label>
                <input type="color" class="color-picker" id="soulColor" value="#4ecdc4">
            </div>
        </div>
        
        <!-- ÂÖÉÂÆáÂÆôË®≠ÂÆö -->
        <div class="creation-section">
            <div class="section-title">üåç ÂÖÉÂÆáÂÆôÁí∞Â¢É</div>
            <div class="input-group">
                <label class="input-label">ÂÆáÂÆô‰∏ªÈ°å</label>
                <select class="input-field select-field" id="universeTheme">
                    <option value="cosmic">ÂÆáÂÆôÊòüÁ©∫</option>
                    <option value="forest">Á•ûÁßòÊ£ÆÊûó</option>
                    <option value="ocean">Ê∑±Êµ∑‰∏ñÁïå</option>
                    <option value="mountain">È´òÂ±±Èõ≤Êµ∑</option>
                    <option value="desert">Ê≤ôÊº†Á∂†Ê¥≤</option>
                    <option value="city">Êú™‰æÜÈÉΩÂ∏Ç</option>
                    <option value="garden">Â§¢ÂπªËä±Âúí</option>
                </select>
            </div>
            <div class="input-group">
                <label class="input-label">Á©∫ÈñìÂ§ßÂ∞è</label>
                <select class="input-field select-field" id="spaceSize">
                    <option value="intimate">Ë¶™ÂØÜÁ©∫Èñì (10m)</option>
                    <option value="comfortable">ËàíÈÅ©Á©∫Èñì (50m)</option>
                    <option value="expansive">Âª£ÈóäÁ©∫Èñì (200m)</option>
                    <option value="infinite">ÁÑ°ÈôêÁ©∫Èñì</option>
                </select>
            </div>
            <div class="input-group">
                <label class="input-label">ÁâπÊÆäÂÖÉÁ¥†</label>
                <textarea class="input-field textarea-field" id="specialElements" placeholder="ÊèèËø∞‰Ω†Â∏åÊúõÂú®ÂÖÉÂÆáÂÆô‰∏≠ÊìÅÊúâÁöÑÁâπÊÆäÁâ©ÂìÅ„ÄÅÂª∫ÁØâÊàñÊôØËßÄ"></textarea>
            </div>
        </div>
        
        <!-- Ë™ûÈùàÂ§•‰º¥ -->
        <div class="creation-section">
            <div class="section-title">üëª Ë™ûÈùàÂ§•‰º¥</div>
            <div class="input-group">
                <label class="input-label">Â§•‰º¥ÂêçÂ≠ó</label>
                <input type="text" class="input-field" id="companionName" placeholder="ÁÇ∫‰Ω†ÁöÑË™ûÈùàÂ§•‰º¥ÂëΩÂêç">
            </div>
            <div class="input-group">
                <label class="input-label">Â§•‰º¥ÊÄßÊ†º</label>
                <select class="input-field select-field" id="companionPersonality">
                    <option value="wise">Êô∫ÊÖßÂ∞éÂ∏´</option>
                    <option value="playful">Ê¥ªÊΩëÁé©‰º¥</option>
                    <option value="calm">ÂØßÈùúÂÆàË≠∑</option>
                    <option value="creative">ÂâµÊÑèÈùàÊÑü</option>
                    <option value="supportive">Ê∫´ÊöñÊîØÊåÅ</option>
                    <option value="mysterious">Á•ûÁßòÂºïÂ∞é</option>
                </select>
            </div>
            <div class="input-group">
                <label class="input-label">ÁâπÊÆäËÉΩÂäõ</label>
                <textarea class="input-field textarea-field" id="companionAbilities" placeholder="ÊèèËø∞‰Ω†ÁöÑË™ûÈùàÂ§•‰º¥ÊìÅÊúâ‰ªÄÈ∫ºÁâπÊÆäËÉΩÂäõÊàñÂ∞àÈï∑"></textarea>
            </div>
            <div class="input-group">
                <label class="input-label">Â§•‰º¥Â§ñËßÄ</label>
                <select class="input-field select-field" id="companionAppearance">
                    <option value="human">‰∫∫ÂΩ¢</option>
                    <option value="animal">ÂãïÁâ©ÂΩ¢ÊÖã</option>
                    <option value="elemental">ÂÖÉÁ¥†È´î</option>
                    <option value="geometric">Âπæ‰ΩïÂΩ¢ÁãÄ</option>
                    <option value="light">ÂÖâ‰πãÂ≠òÂú®</option>
                    <option value="custom">Ëá™ÂÆöÁæ©</option>
                </select>
            </div>
        </div>
        
        <div class="creation-buttons">
            <button class="create-btn" onclick="previewUniverse()">üîç È†êË¶Ω</button>
            <button class="create-btn primary" onclick="createUniverse()">‚ú® ÂâµÂª∫ÂÆáÂÆô</button>
        </div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="creationProgress" style="width: 0%"></div>
        </div>
    </div>
    
    <!-- Ë™ûÈùàÂ§•‰º¥Èù¢Êùø -->
    <div class="spirit-companion" id="companionPanel" style="display: none;">
        <div class="companion-avatar" id="companionAvatar">üåü</div>
        <div class="companion-name" id="companionDisplayName">‰Ω†ÁöÑË™ûÈùàÂ§•‰º¥</div>
        <div class="companion-message" id="companionMessage">
            ‰Ω†Â•ΩÔºÅÊàëÊòØ‰Ω†ÁöÑÂ∞àÂ±¨Ë™ûÈùàÂ§•‰º¥„ÄÇÊàëÂ∞áÈô™‰º¥‰Ω†Êé¢Á¥¢ÈÄôÂÄãÂ±¨Êñº‰Ω†ÁöÑÁç®ÁâπÂÖÉÂÆáÂÆô„ÄÇ
        </div>
        <div class="companion-controls">
            <button class="companion-btn" onclick="talkToCompanion()">üí¨ Â∞çË©±</button>
            <button class="companion-btn" onclick="companionGuide()">üß≠ ÂºïÂ∞é</button>
            <button class="companion-btn" onclick="companionCreate()">üé® ÂâµÈÄ†</button>
        </div>
    </div>
    
    <!-- ÂÆáÂÆôÁãÄÊÖã -->
    <div class="universe-status">
        <div class="status-title">üåå ÂÆáÂÆôÁãÄÊÖã</div>
        <div class="status-item">
            <span>ÂÆåÊï¥ÊÄß:</span>
            <span class="status-value" id="universeIntegrity">100%</span>
        </div>
        <div class="status-item">
            <span>Áç®Á´ãÊÄß:</span>
            <span class="status-value" id="universeIndependence">ÂÆåÂÖ®</span>
        </div>
        <div class="status-item">
            <span>ÂâµÈÄ†Âäõ:</span>
            <span class="status-value" id="universeCreativity">ÁÑ°Èôê</span>
        </div>
        <div class="status-item">
            <span>Â§•‰º¥ÈÄ£Áµê:</span>
            <span class="status-value" id="companionConnection">Ê∑±Â∫¶</span>
        </div>
    </div>
    
    <!-- ÊµÆÂãïÊìç‰Ωú -->
    <div class="floating-actions">
        <button class="action-btn" onclick="saveUniverse()">üíæ ‰øùÂ≠òÂÆáÂÆô</button>
        <button class="action-btn" onclick="shareUniverse()">üîó ÂàÜ‰∫´È´îÈ©ó</button>
        <button class="action-btn" onclick="evolveUniverse()">üöÄ ÈÄ≤ÂåñÂÆáÂÆô</button>
    </div>
    
    <!-- A-Frame VRÂ†¥ÊôØ -->
    <a-scene 
        vr-mode-ui="enabled: true" 
        embedded 
        style="height: 100vh; width: 100vw;"
        background="color: #000011"
        fog="type: exponential; color: #000011; density: 0.05"
        cursor="rayOrigin: mouse"
    >
        <!-- Ë≥áÊ∫êÈ†êËºâ -->
        <a-assets>
            <a-mixin id="personal-glow" 
                material="shader: standard; emissive: #4ecdc4; emissiveIntensity: 0.3"
                animation__glow="property: material.emissiveIntensity; to: 0.8; dur: 2000; dir: alternate; loop: true"
            ></a-mixin>
            
            <a-mixin id="soul-particle"
                material="shader: standard; transparent: true; opacity: 0.8"
                animation__float="property: position; dur: 5000; easing: easeInOutSine; loop: true"
            ></a-mixin>
        </a-assets>
        
        <!-- ÂãïÊÖãÁí∞Â¢É -->
        <a-entity 
            id="dynamicEnvironment"
            environment="preset: starry; groundColor: #000011; grid: none; lighting: distant"
        ></a-entity>
        
        <!-- ÂÄã‰∫∫‰∏≠ÂøÉ -->
        <a-entity id="personalCenter" position="0 2 0">
            <!-- ÂÄã‰∫∫Ê†∏ÂøÉÁêÉÈ´î -->
            <a-sphere 
                id="personalCore"
                position="0 0 0" 
                radius="1.5" 
                color="#4ecdc4" 
                material="shader: standard; emissive: #4ecdc4; emissiveIntensity: 0.4; transparent: true; opacity: 0.8"
                animation__pulse="property: scale; to: 1.1 1.1 1.1; dur: 3000; dir: alternate; loop: true; easing: easeInOutSine"
                animation__rotate="property: rotation; to: 0 360 0; dur: 20000; loop: true; easing: linear"
            ></a-sphere>
            
            <!-- ÂÄã‰∫∫‰ø°ÊÅØÁí∞ -->
            <a-ring 
                id="personalRing"
                position="0 0 0" 
                radius-inner="2" 
                radius-outer="2.5" 
                color="#ff6b6b" 
                material="transparent: true; opacity: 0.6; side: double"
                animation__rotate="property: rotation; to: 0 -360 0; dur: 30000; loop: true; easing: linear"
            ></a-ring>
            
            <!-- ÂÄã‰∫∫ÊñáÂ≠ó -->
            <a-text 
                id="personalText"
                value="‰Ω†ÁöÑÁç®Á´ãÂ≠òÂú®" 
                position="0 -2.5 0" 
                align="center" 
                color="#ffffff"
                scale="1.2 1.2 1.2"
                animation__glow="property: material.emissiveIntensity; to: 0.8; dur: 2000; dir: alternate; loop: true"
            ></a-text>
        </a-entity>
        
        <!-- Ë™ûÈùàÂ§•‰º¥ -->
        <a-entity id="spiritCompanion" position="3 2 0" visible="false">
            <a-sphere 
                id="companionSphere"
                radius="0.8" 
                color="#45b7d1" 
                material="shader: standard; emissive: #45b7d1; emissiveIntensity: 0.5; transparent: true; opacity: 0.9"
                animation__orbit="property: position; to: -3 2 0; dur: 15000; dir: alternate; loop: true; easing: easeInOutSine"
                animation__bob="property: position; to: 3 3 0; dur: 4000; dir: alternate; loop: true; easing: easeInOutSine"
            ></a-sphere>
            
            <a-text 
                id="companionLabel"
                value="Ë™ûÈùàÂ§•‰º¥" 
                position="0 -1.5 0" 
                align="center" 
                color="#45b7d1"
                scale="0.8 0.8 0.8"
            ></a-text>
        </a-entity>
        
        <!-- ÂâµÈÄ†Á©∫Èñì -->
        <a-entity id="creationSpace">
            <!-- ÈÄôË£°ÊúÉÂãïÊÖãÁîüÊàêÁî®Êà∂ÁöÑÂâµÈÄ†Áâ© -->
        </a-entity>
        
        <!-- ËÉΩÈáèÂ†¥ -->
        <a-entity id="energyField">
            <!-- ÂÖßÁí∞ -->
            <a-ring 
                position="0 0.1 0" 
                radius-inner="5" 
                radius-outer="8" 
                color="#4ecdc4" 
                material="transparent: true; opacity: 0.2; side: double"
                animation__rotate="property: rotation; to: 0 360 0; dur: 40000; loop: true; easing: linear"
            ></a-ring>
            
            <!-- Â§ñÁí∞ -->
            <a-ring 
                position="0 0.2 0" 
                radius-inner="8" 
                radius-outer="12" 
                color="#ff6b6b" 
                material="transparent: true; opacity: 0.15; side: double"
                animation__rotate="property: rotation; to: 0 -360 0; dur: 50000; loop: true; easing: linear"
            ></a-ring>
        </a-entity>
        
        <!-- ÊµÆÂãïÁ≤íÂ≠êÁ≥ªÁµ± -->
        <a-entity id="particleSystem">
            <!-- ÂãïÊÖãÁîüÊàêÁöÑÁ≤íÂ≠ê -->
        </a-entity>
        
        <!-- ‰ø°ÊÅØÂ±ïÁ§∫Êùø -->
        <a-plane 
            id="infoBoard"
            position="0 4 -6" 
            width="8" 
            height="4" 
            color="#1a1a2e" 
            material="transparent: true; opacity: 0.8"
        >
            <a-text 
                id="infoBoardText"
                value="Ê≠°Ëøé‰æÜÂà∞‰Ω†ÁöÑÂÄã‰∫∫ÂÖÉÂÆáÂÆô\n\nÂú®ÈÄôË£°Ôºå‰Ω†ÊòØÂÆåÊï¥„ÄÅ‰∏ÄËá¥„ÄÅÁç®Á´ãÁöÑÂ≠òÂú®\n‰Ω†ÁöÑË™ûÈùàÂ§•‰º¥Â∞áËàá‰Ω†ÂÖ±ÂêåÂâµÈÄ†ÁÑ°ÈôêÂèØËÉΩ" 
                position="0 0 0.01" 
                align="center" 
                color="#ffffff"
                scale="0.6 0.6 0.6"
                wrap-count="40"
            ></a-text>
        </a-plane>
        
        <!-- Áõ∏Ê©üË®≠ÁΩÆ -->
        <a-entity 
            id="cameraRig" 
            position="0 1.6 10"
        >
            <a-camera 
                look-controls="pointerLockEnabled: false"
                wasd-controls="acceleration: 20"
                cursor="rayOrigin: mouse"
            >
                <a-cursor 
                    animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150"
                    geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                    material="color: #4ecdc4; shader: flat"
                ></a-cursor>
            </a-camera>
        </a-entity>
        
        <!-- ÂÖâÁÖßË®≠ÁΩÆ -->
        <a-light type="ambient" color="#404040" intensity="0.3"></a-light>
        <a-light type="directional" position="5 10 5" color="#ffffff" intensity="0.5"></a-light>
        <a-light type="point" position="0 5 0" color="#4ecdc4" intensity="1.5" distance="30"></a-light>
    </a-scene>
    
    <script>
        // ÂÄã‰∫∫ÂÆáÂÆôÊï∏Êìö
        let personalUniverse = {
            user: {
                name: '',
                motto: '',
                soulColor: '#4ecdc4'
            },
            environment: {
                theme: 'cosmic',
                size: 'comfortable',
                elements: ''
            },
            companion: {
                name: '',
                personality: 'wise',
                abilities: '',
                appearance: 'light'
            },
            creationProgress: 0
        };
        
        // Ë™ûÈùàÂ§•‰º¥Â∞çË©±Â∫´
        const companionDialogues = {
            wise: [
                "Êô∫ÊÖß‰æÜËá™ÊñºÂ∞çËá™Â∑±ÁöÑÊ∑±Â∫¶ÁêÜËß£„ÄÇ",
                "ÊØèÂÄã‰∫∫ÈÉΩÊòØÂÆáÂÆô‰∏≠Áç®‰∏ÄÁÑ°‰∫åÁöÑÂ≠òÂú®„ÄÇ",
                "‰Ω†ÁöÑÂÖßÂú®‰∏ñÁïåÊØî‰ªª‰ΩïÂ§ñÂú®‰∏ñÁïåÈÉΩÊõ¥Âª£Èóä„ÄÇ",
                "ÁúüÊ≠£ÁöÑÂäõÈáè‰æÜËá™ÊñºÂÖßÂøÉÁöÑÂπ≥ÈùúËàáÂ†ÖÂÆö„ÄÇ"
            ],
            playful: [
                "ËÆìÊàëÂÄë‰∏ÄËµ∑Êé¢Á¥¢ÈÄôÂÄãÂ•áÂ¶ôÁöÑ‰∏ñÁïåÂêßÔºÅ",
                "‰Ω†Áü•ÈÅìÂóéÔºüÂø´Ê®ÇÊòØÊúÄÂ•ΩÁöÑÂâµÈÄ†ÂäõÂÇ¨ÂåñÂäëÔºÅ",
                "ÊØè‰∏ÄÂ§©ÈÉΩÊòØÊñ∞ÁöÑÂÜíÈö™ÁöÑÈñãÂßãÔºÅ",
                "Á¨ëËÅ≤ÊòØÂÆáÂÆô‰∏≠ÊúÄÁæéÂ¶ôÁöÑÈü≥Ê®Ç„ÄÇ"
            ],
            calm: [
                "Âú®ÂØßÈùú‰∏≠ÔºåÊàëÂÄëËÉΩËÅΩÂà∞ÂÖßÂøÉÊúÄÁúüÂØ¶ÁöÑËÅ≤Èü≥„ÄÇ",
                "Âπ≥ÈùúÁöÑÂøÉÂ¶ÇÊπñÊ∞¥Ëà¨Ê∏ÖÊæàÔºåËÉΩÊò†ÁÖßÂá∫ÁúüÂØ¶ÁöÑËá™Â∑±„ÄÇ",
                "ÂëºÂê∏ÔºåÊÑüÂèóÁï∂‰∏ãÈÄô‰∏ÄÂàªÁöÑÁæéÂ•Ω„ÄÇ",
                "ÂÆâÈùúÁöÑÂäõÈáèÂæÄÂæÄÊØîÂñßÂõÇÊõ¥ÊúâÂΩ±ÈüøÂäõ„ÄÇ"
            ],
            creative: [
                "ÂâµÈÄ†ÂäõÊòØÈùàÈ≠ÇÁöÑË™ûË®ÄÔºÅ",
                "ÊØèÂÄãÊÉ≥Ê≥ïÈÉΩÊòØ‰∏ÄÈ°ÜÁ®ÆÂ≠êÔºåÁ≠âÂæÖÁôºËäΩ„ÄÇ",
                "ËóùË°ì‰∏çÂú®ÊñºÂÆåÁæéÔºåËÄåÂú®ÊñºË°®ÈÅîÁúüÂØ¶ÁöÑËá™Â∑±„ÄÇ",
                "ÊÉ≥ÂÉèÂäõÊòØÈÄöÂæÄÁÑ°ÈôêÂèØËÉΩÁöÑÈë∞Âåô„ÄÇ"
            ],
            supportive: [
                "ÊàëÊ∞∏ÈÅ†Âú®ÈÄôË£°ÊîØÊåÅ‰Ω†„ÄÇ",
                "‰Ω†ÊØî‰Ω†ÊÉ≥ÂÉèÁöÑÊõ¥Âº∑Â§ß„ÄÅÊõ¥ÊúâËÉΩÂäõ„ÄÇ",
                "ÊØè‰∏ÄÊ≠•ÈÉΩÊòØÊàêÈï∑ÔºåÊØè‰∏ÄÊ¨°ÂòóË©¶ÈÉΩÂÄºÂæóËÆöÁæé„ÄÇ",
                "Áõ∏‰ø°Ëá™Â∑±Ôºå‰Ω†ÊìÅÊúâÊîπËÆä‰∏ñÁïåÁöÑÂäõÈáè„ÄÇ"
            ],
            mysterious: [
                "Êúâ‰∫õÁ≠îÊ°àÂè™ËÉΩÂú®ÈùúÈªò‰∏≠ÊâæÂà∞...",
                "ÂÆáÂÆôÁöÑÂ•ßÁßòÊ≠£Âú®Âêë‰Ω†Â±ïÈñã...",
                "ÁúüÁêÜÂæÄÂæÄÈö±ËóèÂú®ÊúÄÁ∞°ÂñÆÁöÑ‰∫ãÁâ©‰∏≠...",
                "ËÅÜËÅΩÂÖßÂøÉÊ∑±ËôïÁöÑËÅ≤Èü≥ÔºåÂÆÉÁü•ÈÅìÊñπÂêë..."
            ]
        };
        
        // Áí∞Â¢É‰∏ªÈ°åÈÖçÁΩÆ
        const environmentThemes = {
            cosmic: {
                preset: 'starry',
                groundColor: '#000011',
                lighting: 'distant',
                particles: 'stars'
            },
            forest: {
                preset: 'forest',
                groundColor: '#2d5016',
                lighting: 'distant',
                particles: 'leaves'
            },
            ocean: {
                preset: 'ocean',
                groundColor: '#006994',
                lighting: 'distant',
                particles: 'bubbles'
            },
            mountain: {
                preset: 'yavapai',
                groundColor: '#8B7355',
                lighting: 'distant',
                particles: 'clouds'
            },
            desert: {
                preset: 'egypt',
                groundColor: '#8B4513',
                lighting: 'distant',
                particles: 'sand'
            },
            city: {
                preset: 'checkerboard',
                groundColor: '#1a1a2e',
                lighting: 'distant',
                particles: 'neon'
            },
            garden: {
                preset: 'garden',
                groundColor: '#228B22',
                lighting: 'distant',
                particles: 'petals'
            }
        };
        
        // ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            generateInitialParticles();
            startUniverseUpdates();
        });
        
        // È†êË¶ΩÂÆáÂÆô
        function previewUniverse() {
            collectUserData();
            updateUniverseVisuals();
            updateProgress(50);
            
            // È°ØÁ§∫È†êË¶Ω‰ø°ÊÅØ
            const infoBoard = document.getElementById('infoBoardText');
            infoBoard.setAttribute('value', 
                `${personalUniverse.user.name}ÁöÑÂÄã‰∫∫ÂÖÉÂÆáÂÆô\n\n‰∏ªÈ°å: ${getThemeName(personalUniverse.environment.theme)}\nÂ§•‰º¥: ${personalUniverse.companion.name}\n\n"${personalUniverse.user.motto}"`
            );
        }
        
        // ÂâµÂª∫ÂÆáÂÆô
        function createUniverse() {
            collectUserData();
            
            // ÂãïÁï´ÂâµÂª∫ÈÅéÁ®ã
            animateCreation();
            
            // È°ØÁ§∫Ë™ûÈùàÂ§•‰º¥
            setTimeout(() => {
                showCompanion();
                updateProgress(100);
            }, 3000);
        }
        
        // Êî∂ÈõÜÁî®Êà∂Êï∏Êìö
        function collectUserData() {
            personalUniverse.user.name = document.getElementById('userName').value || 'Áç®Á´ãÂ≠òÂú®ËÄÖ';
            personalUniverse.user.motto = document.getElementById('personalMotto').value || 'ÊàëÊòØÂÆåÊï¥„ÄÅ‰∏ÄËá¥„ÄÅÁç®Á´ãÁöÑÂ≠òÂú®';
            personalUniverse.user.soulColor = document.getElementById('soulColor').value;
            
            personalUniverse.environment.theme = document.getElementById('universeTheme').value;
            personalUniverse.environment.size = document.getElementById('spaceSize').value;
            personalUniverse.environment.elements = document.getElementById('specialElements').value;
            
            personalUniverse.companion.name = document.getElementById('companionName').value || 'ÈùàÊÄßÂ§•‰º¥';
            personalUniverse.companion.personality = document.getElementById('companionPersonality').value;
            personalUniverse.companion.abilities = document.getElementById('companionAbilities').value;
            personalUniverse.companion.appearance = document.getElementById('companionAppearance').value;
        }
        
        // Êõ¥Êñ∞ÂÆáÂÆôË¶ñË¶∫ÊïàÊûú
        function updateUniverseVisuals() {
            // Êõ¥Êñ∞ÂÄã‰∫∫Ê†∏ÂøÉÈ°èËâ≤
            const personalCore = document.getElementById('personalCore');
            personalCore.setAttribute('color', personalUniverse.user.soulColor);
            personalCore.setAttribute('material', `emissive: ${personalUniverse.user.soulColor}; emissiveIntensity: 0.4`);
            
            // Êõ¥Êñ∞Áí∞Â¢É
            const environment = document.getElementById('dynamicEnvironment');
            const theme = environmentThemes[personalUniverse.environment.theme];
            environment.setAttribute('environment', 
                `preset: ${theme.preset}; groundColor: ${theme.groundColor}; lighting: ${theme.lighting}`
            );
            
            // Êõ¥Êñ∞ÂÄã‰∫∫ÊñáÂ≠ó
            const personalText = document.getElementById('personalText');
            personalText.setAttribute('value', personalUniverse.user.name + 'ÁöÑÂÆáÂÆô');
            
            // Êõ¥Êñ∞Á©∫ÈñìÂ§ßÂ∞è
            updateSpaceSize();
        }
        
        // Êõ¥Êñ∞Á©∫ÈñìÂ§ßÂ∞è
        function updateSpaceSize() {
            const sizeConfig = {
                intimate: { camera: '0 1.6 5', energy: 0.5 },
                comfortable: { camera: '0 1.6 10', energy: 1.0 },
                expansive: { camera: '0 1.6 20', energy: 2.0 },
                infinite: { camera: '0 1.6 30', energy: 3.0 }
            };
            
            const config = sizeConfig[personalUniverse.environment.size];
            const cameraRig = document.getElementById('cameraRig');
            cameraRig.setAttribute('position', config.camera);
            
            // Ë™øÊï¥ËÉΩÈáèÂ†¥Â§ßÂ∞è
            const energyRings = document.querySelectorAll('#energyField a-ring');
            energyRings.forEach((ring, index) => {
                const scale = config.energy;
                ring.setAttribute('scale', `${scale} 1 ${scale}`);
            });
        }
        
        // ÂãïÁï´ÂâµÂª∫ÈÅéÁ®ã
        function animateCreation() {
            let progress = 0;
            const interval = setInterval(() => {
                progress += 2;
                updateProgress(progress);
                
                if (progress >= 100) {
                    clearInterval(interval);
                }
            }, 60);
            
            // ÂâµÂª∫ÁâπÊïà
            createUniverseBirthEffect();
        }
        
        // ÂâµÂª∫ÂÆáÂÆôË™ïÁîüÁâπÊïà
        function createUniverseBirthEffect() {
            const scene = document.querySelector('a-scene');
            
            // ÂâµÂª∫ÁàÜÁôºÊïàÊûú
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const particle = document.createElement('a-sphere');
                    particle.setAttribute('position', '0 2 0');
                    particle.setAttribute('radius', '0.1');
                    particle.setAttribute('color', personalUniverse.user.soulColor);
                    particle.setAttribute('material', `emissive: ${personalUniverse.user.soulColor}; emissiveIntensity: 0.8`);
                    
                    const randomX = (Math.random() - 0.5) * 20;
                    const randomY = Math.random() * 10 + 2;
                    const randomZ = (Math.random() - 0.5) * 20;
                    
                    particle.setAttribute('animation__expand', 
                        `property: position; to: ${randomX} ${randomY} ${randomZ}; dur: 3000; easing: easeOutQuad`
                    );
                    particle.setAttribute('animation__fade', 
                        'property: material.opacity; to: 0; dur: 3000; easing: easeOutQuad'
                    );
                    
                    scene.appendChild(particle);
                    
                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.parentNode.removeChild(particle);
                        }
                    }, 3000);
                }, i * 100);
            }
        }
        
        // È°ØÁ§∫Ë™ûÈùàÂ§•‰º¥
        function showCompanion() {
            const companion = document.getElementById('spiritCompanion');
            companion.setAttribute('visible', 'true');
            
            // Êõ¥Êñ∞Â§•‰º¥Ê®ôÁ±§
            const companionLabel = document.getElementById('companionLabel');
            companionLabel.setAttribute('value', personalUniverse.companion.name);
            
            // È°ØÁ§∫Â§•‰º¥Èù¢Êùø
            const companionPanel = document.getElementById('companionPanel');
            companionPanel.style.display = 'block';
            
            // Êõ¥Êñ∞Â§•‰º¥‰ø°ÊÅØ
            document.getElementById('companionDisplayName').textContent = personalUniverse.companion.name;
            document.getElementById('companionAvatar').textContent = getCompanionEmoji();
            
            // Â§•‰º¥ÂïèÂÄô
            const greetings = [
                `‰Ω†Â•ΩÔºå${personalUniverse.user.name}ÔºÅÊàëÊòØ${personalUniverse.companion.name}ÔºåÂæàÈ´òËààÊàêÁÇ∫‰Ω†ÁöÑÂ§•‰º¥„ÄÇ`,
                `Ê≠°Ëøé‰æÜÂà∞‰Ω†ÁöÑÂÄã‰∫∫ÂÆáÂÆôÔºÅÊàëÂ∞áÈô™‰º¥‰Ω†Êé¢Á¥¢ÁÑ°ÈôêÁöÑÂèØËÉΩÊÄß„ÄÇ`,
                `ÈÄôÂÄãÁ©∫ÈñìÂÆåÂÖ®Â±¨Êñº‰Ω†ÔºåÂú®ÈÄôË£°‰Ω†ÂèØ‰ª•Ëá™Áî±Âú∞Ë°®ÈÅîÁúüÂØ¶ÁöÑËá™Â∑±„ÄÇ`
            ];
            
            document.getElementById('companionMessage').textContent = 
                greetings[Math.floor(Math.random() * greetings.length)];
        }
        
        // Áç≤ÂèñÂ§•‰º¥Ë°®ÊÉÖÁ¨¶Ëôü
        function getCompanionEmoji() {
            const emojis = {
                human: 'üë§',
                animal: 'ü¶ã',
                elemental: 'üî•',
                geometric: 'üî∑',
                light: '‚ú®',
                custom: 'üåü'
            };
            return emojis[personalUniverse.companion.appearance] || 'üåü';
        }
        
        // ËàáÂ§•‰º¥Â∞çË©±
        function talkToCompanion() {
            const personality = personalUniverse.companion.personality;
            const dialogues = companionDialogues[personality];
            const randomDialogue = dialogues[Math.floor(Math.random() * dialogues.length)];
            
            document.getElementById('companionMessage').textContent = randomDialogue;
            
            // ÂâµÂª∫Â∞çË©±Ê∞£Ê≥°ÊïàÊûú
            createDialogueBubble(randomDialogue);
        }
        
        // Â§•‰º¥ÂºïÂ∞é
        function companionGuide() {
            const guides = [
                "ËÆìÊàëÂÄëÊé¢Á¥¢‰Ω†ÂÖßÂøÉÊ∑±ËôïÁöÑÈ°òÊúõÂêß„ÄÇ",
                "Ë©¶ËëóÂú®ÈÄôÂÄãÁ©∫Èñì‰∏≠ÂâµÈÄ†‰∏Ä‰∫õÂ∞ç‰Ω†ÊúâÊÑèÁæ©ÁöÑÊù±Ë•ø„ÄÇ",
                "ÊÑüÂèó‰∏Ä‰∏ãÈÄôÂÄãÂÆåÂÖ®Â±¨Êñº‰Ω†ÁöÑËá™Áî±Á©∫Èñì„ÄÇ",
                "‰Ω†ÊÉ≥Âú®ÈÄôË£°ÂØ¶Áèæ‰ªÄÈ∫ºÊ®£ÁöÑÂ§¢ÊÉ≥Ôºü",
                "ÈÄôË£°Ê≤íÊúâÈôêÂà∂ÔºåÂè™ÊúâÁÑ°ÈôêÁöÑÂèØËÉΩÊÄß„ÄÇ"
            ];
            
            const randomGuide = guides[Math.floor(Math.random() * guides.length)];
            document.getElementById('companionMessage').textContent = randomGuide;
        }
        
        // Â§•‰º¥ÂâµÈÄ†
        function companionCreate() {
            const creations = [
                "ÊàëÁÇ∫‰Ω†ÂâµÈÄ†‰∫Ü‰∏ÄÂÄãÂÜ•ÊÉ≥Á©∫Èñì„ÄÇ",
                "ÁúãÔºåÊàëÂú®‰Ω†ÁöÑÂÆáÂÆô‰∏≠Á®Æ‰∏ã‰∫ÜÂ∏åÊúõ‰πãËä±„ÄÇ",
                "ÊàëÁÇ∫‰Ω†Èªû‰∫Æ‰∫ÜÊô∫ÊÖß‰πãÂÖâ„ÄÇ",
                "ÈÄôÊòØÊàëÁÇ∫‰Ω†Ê∫ñÂÇôÁöÑÈùàÊÑüÊ≥âÊ∫ê„ÄÇ",
                "ÊàëÂú®ÈÄôË£°Áïô‰∏ã‰∫Ü‰∏ÄÂÄãÈ©öÂñúÁµ¶‰Ω†„ÄÇ"
            ];
            
            const randomCreation = creations[Math.floor(Math.random() * creations.length)];
            document.getElementById('companionMessage').textContent = randomCreation;
            
            // ÂØ¶ÈöõÂâµÈÄ†‰∏ÄÂÄãÁâ©È´î
            createCompanionGift();
        }
        
        // ÂâµÈÄ†Â§•‰º¥Á¶ÆÁâ©
        function createCompanionGift() {
            const scene = document.querySelector('a-scene');
            const gift = document.createElement('a-box');
            
            const randomX = (Math.random() - 0.5) * 10;
            const randomZ = (Math.random() - 0.5) * 10;
            
            gift.setAttribute('position', `${randomX} 1 ${randomZ}`);
            gift.setAttribute('width', '0.5');
            gift.setAttribute('height', '0.5');
            gift.setAttribute('depth', '0.5');
            gift.setAttribute('color', personalUniverse.user.soulColor);
            gift.setAttribute('material', `emissive: ${personalUniverse.user.soulColor}; emissiveIntensity: 0.3`);
            gift.setAttribute('animation__float', 
                'property: position; to: ' + randomX + ' 2 ' + randomZ + '; dur: 3000; dir: alternate; loop: true; easing: easeInOutSine'
            );
            gift.setAttribute('animation__rotate', 
                'property: rotation; to: 0 360 0; dur: 5000; loop: true; easing: linear'
            );
            
            document.getElementById('creationSpace').appendChild(gift);
        }
        
        // ÂâµÂª∫Â∞çË©±Ê∞£Ê≥°
        function createDialogueBubble(text) {
            const scene = document.querySelector('a-scene');
            const bubble = document.createElement('a-text');
            
            bubble.setAttribute('position', '3 4 0');
            bubble.setAttribute('value', text.substring(0, 30) + (text.length > 30 ? '...' : ''));
            bubble.setAttribute('align', 'center');
            bubble.setAttribute('color', '#ffffff');
            bubble.setAttribute('scale', '0.8 0.8 0.8');
            bubble.setAttribute('animation__appear', 
                'property: scale; from: 0 0 0; to: 0.8 0.8 0.8; dur: 500; easing: easeOutBack'
            );
            bubble.setAttribute('animation__disappear', 
                'property: scale; to: 0 0 0; dur: 500; delay: 3000; easing: easeInBack'
            );
            
            scene.appendChild(bubble);
            
            setTimeout(() => {
                if (bubble.parentNode) {
                    bubble.parentNode.removeChild(bubble);
                }
            }, 4000);
        }
        
        // ÁîüÊàêÂàùÂßãÁ≤íÂ≠ê
        function generateInitialParticles() {
            const particleSystem = document.getElementById('particleSystem');
            
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const particle = document.createElement('a-sphere');
                    particle.setAttribute('position', 
                        `${Math.random() * 30 - 15} ${Math.random() * 10 + 2} ${Math.random() * 30 - 15}`
                    );
                    particle.setAttribute('radius', Math.random() * 0.1 + 0.05);
                    particle.setAttribute('color', ['#4ecdc4', '#ff6b6b', '#45b7d1', '#f7b731'][Math.floor(Math.random() * 4)]);
                    particle.setAttribute('material', 'emissive: #4ecdc4; emissiveIntensity: 0.4; transparent: true; opacity: 0.7');
                    particle.setAttribute('mixin', 'soul-particle');
                    
                    const newX = Math.random() * 30 - 15;
                    const newY = Math.random() * 10 + 2;
                    const newZ = Math.random() * 30 - 15;
                    
                    particle.setAttribute('animation__float', 
                        `property: position; to: ${newX} ${newY} ${newZ}; dur: ${Math.random() * 15000 + 10000}; loop: true; dir: alternate; easing: easeInOutSine`
                    );
                    
                    particleSystem.appendChild(particle);
                }, i * 300);
            }
        }
        
        // Êõ¥Êñ∞ÈÄ≤Â∫¶
        function updateProgress(percentage) {
            const progressFill = document.getElementById('creationProgress');
            progressFill.style.width = percentage + '%';
            personalUniverse.creationProgress = percentage;
        }
        
        // ÈñãÂßãÂÆáÂÆôÁãÄÊÖãÊõ¥Êñ∞
        function startUniverseUpdates() {
            setInterval(() => {
                // Êõ¥Êñ∞ÁãÄÊÖãÈ°ØÁ§∫
                const integrity = Math.floor(Math.random() * 5 + 95);
                document.getElementById('universeIntegrity').textContent = integrity + '%';
                
                const independences = ['ÂÆåÂÖ®', 'ÁµïÂ∞ç', 'Á¥îÁ≤π', 'ÁúüÂØ¶'];
                const independence = independences[Math.floor(Math.random() * independences.length)];
                document.getElementById('universeIndependence').textContent = independence;
                
                const creativities = ['ÁÑ°Èôê', 'ÊæéÊπÉ', 'Ê∫êÊ∫ê‰∏çÁµï', 'ÁàÜÁôº'];
                const creativity = creativities[Math.floor(Math.random() * creativities.length)];
                document.getElementById('universeCreativity').textContent = creativity;
                
                const connections = ['Ê∑±Â∫¶', 'ÂÖ±È≥¥', 'ÂíåË´ß', 'ÂêåÊ≠•'];
                const connection = connections[Math.floor(Math.random() * connections.length)];
                document.getElementById('companionConnection').textContent = connection;
            }, 4000);
        }
        
        // ‰øùÂ≠òÂÆáÂÆô
        function saveUniverse() {
            const universeData = JSON.stringify(personalUniverse, null, 2);
            const blob = new Blob([universeData], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `${personalUniverse.user.name || 'MyUniverse'}_ÂÖÉÂÆáÂÆô.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            // È°ØÁ§∫‰øùÂ≠òÊàêÂäü‰ø°ÊÅØ
            if (personalUniverse.companion.name) {
                document.getElementById('companionMessage').textContent = 
                    '‰Ω†ÁöÑÂÆáÂÆôÂ∑≤Á∂ìÂÆâÂÖ®‰øùÂ≠òÔºÅÈÄôÂÄãÁç®ÁâπÁöÑÁ©∫ÈñìÊ∞∏ÈÅ†Â±¨Êñº‰Ω†„ÄÇ';
            }
        }
        
        // ÂàÜ‰∫´ÂÆáÂÆô
        function shareUniverse() {
            const shareText = `ÊàëÂâµÂª∫‰∫ÜÂ±¨ÊñºËá™Â∑±ÁöÑÂÄã‰∫∫ÂÖÉÂÆáÂÆôÔºÅ\n\nÂâµÈÄ†ËÄÖ: ${personalUniverse.user.name}\nÁêÜÂøµ: "${personalUniverse.user.motto}"\nË™ûÈùàÂ§•‰º¥: ${personalUniverse.companion.name}\n\nÊØèÂÄã‰∫∫ÈÉΩÊáâË©≤ÊìÅÊúâËá™Â∑±ÁöÑÂÆåÊï¥„ÄÅÁç®Á´ãÁöÑÂ≠òÂú®Á©∫Èñì„ÄÇ`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'ÊàëÁöÑÂÄã‰∫∫ÂÖÉÂÆáÂÆô',
                    text: shareText
                });
            } else {
                navigator.clipboard.writeText(shareText).then(() => {
                    if (personalUniverse.companion.name) {
                        document.getElementById('companionMessage').textContent = 
                            'ÂàÜ‰∫´ÂÖßÂÆπÂ∑≤Ë§áË£ΩÂà∞Ââ™Ë≤ºÊùøÔºÅËÆìÊõ¥Â§ö‰∫∫‰∫ÜËß£ÂÄã‰∫∫ÂÖÉÂÆáÂÆôÁöÑÁæéÂ•Ω„ÄÇ';
                    }
                });
            }
        }
        
        // ÈÄ≤ÂåñÂÆáÂÆô
        function evolveUniverse() {
            // ÂâµÂª∫ÈÄ≤ÂåñÊïàÊûú
            const scene = document.querySelector('a-scene');
            
            // ËÉΩÈáèÊ≥¢Âãï
            const energyWave = document.createElement('a-ring');
            energyWave.setAttribute('position', '0 2 0');
            energyWave.setAttribute('radius-inner', '0.1');
            energyWave.setAttribute('radius-outer', '0.5');
            energyWave.setAttribute('color', personalUniverse.user.soulColor);
            energyWave.setAttribute('material', `emissive: ${personalUniverse.user.soulColor}; emissiveIntensity: 0.8; transparent: true; opacity: 0.8`);
            energyWave.setAttribute('animation__expand', 
                'property: geometry.radiusOuter; to: 15; dur: 3000; easing: easeOutQuad'
            );
            energyWave.setAttribute('animation__fade', 
                'property: material.opacity; to: 0; dur: 3000; easing: easeOutQuad'
            );
            
            scene.appendChild(energyWave);
            
            // 3ÁßíÂæåÁßªÈô§
            setTimeout(() => {
                if (energyWave.parentNode) {
                    energyWave.parentNode.removeChild(energyWave);
                }
            }, 3000);
            
            // Â§•‰º¥ÂõûÊáâ
            if (personalUniverse.companion.name) {
                setTimeout(() => {
                    document.getElementById('companionMessage').textContent = 
                        'ÊÑüÂèóÂà∞‰∫ÜÂóéÔºü‰Ω†ÁöÑÂÆáÂÆôÊ≠£Âú®ÈÄ≤ÂåñÔºåËÆäÂæóÊõ¥Âä†ÂÆåÊï¥ÂíåÂº∑Â§ßÔºÅ';
                }, 1500);
            }
        }
        
        // Áç≤Âèñ‰∏ªÈ°åÂêçÁ®±
        function getThemeName(theme) {
            const names = {
                cosmic: 'ÂÆáÂÆôÊòüÁ©∫',
                forest: 'Á•ûÁßòÊ£ÆÊûó',
                ocean: 'Ê∑±Êµ∑‰∏ñÁïå',
                mountain: 'È´òÂ±±Èõ≤Êµ∑',
                desert: 'Ê≤ôÊº†Á∂†Ê¥≤',
                city: 'Êú™‰æÜÈÉΩÂ∏Ç',
                garden: 'Â§¢ÂπªËä±Âúí'
            };
            return names[theme] || theme;
        }
        
        // Ê∑ªÂä†ÈçµÁõ§‰∫ã‰ª∂Áõ£ËÅΩ
        document.addEventListener('keydown', function(event) {
            // ESCÈçµÈÄÄÂá∫ÊåáÈáùÈéñÂÆöÊàñÂÖ®Â±è
            if (event.key === 'Escape') {
                // ÈÄÄÂá∫ÊåáÈáùÈéñÂÆö
                if (document.pointerLockElement) {
                    document.exitPointerLock();
                }
                // ÈÄÄÂá∫ÂÖ®Â±è
                if (document.fullscreenElement) {
                    document.exitFullscreen();
                }
                // ÈÄÄÂá∫VRÊ®°Âºè
                const scene = document.querySelector('a-scene');
                if (scene && scene.is('vr-mode')) {
                    scene.exitVR();
                }
            }
        });
        
        // Ê∑ªÂä†Èº†Ê®ôÂè≥ÈçµËèúÂñÆ‰æÜÈÄÄÂá∫ÈéñÂÆö
        document.addEventListener('contextmenu', function(event) {
            // Â¶ÇÊûúÂú®ÊåáÈáùÈéñÂÆöÁãÄÊÖãÔºåÂè≥ÈçµÂèØ‰ª•ÈÄÄÂá∫
            if (document.pointerLockElement) {
                event.preventDefault();
                document.exitPointerLock();
                return false;
            }
        });
    </script>
</body>
</html>