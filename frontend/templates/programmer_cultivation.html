{% extends "base.html" %}

{% block title %}ç¨‹åºå“¡ä¿®ç…‰å¯†æ³• - å•†å¢å¿ƒéˆæ§åˆ¶å°{% endblock %}

{% block head %}
<style>
.cultivation-container {
    background: 
        radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.2) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.1) 0%, transparent 50%),
        linear-gradient(135deg, #0f0f23 0%, #1a1a2e 30%, #16213e 60%, #2d1b69 100%);
    min-height: 100vh;
    position: relative;
    overflow: hidden;
}

.cultivation-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: 
        radial-gradient(2px 2px at 20px 30px, #eee, transparent),
        radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.8), transparent),
        radial-gradient(1px 1px at 90px 40px, #fff, transparent),
        radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.6), transparent),
        radial-gradient(2px 2px at 160px 30px, #ddd, transparent);
    background-repeat: repeat;
    background-size: 200px 100px;
    animation: starfield 20s linear infinite;
    pointer-events: none;
    z-index: 1;
}

.cultivation-container::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: 
        radial-gradient(1px 1px at 25px 25px, rgba(255,255,255,0.4), transparent),
        radial-gradient(1px 1px at 75px 75px, rgba(255,255,255,0.3), transparent),
        radial-gradient(1px 1px at 125px 125px, rgba(255,255,255,0.5), transparent),
        radial-gradient(1px 1px at 175px 175px, rgba(255,255,255,0.2), transparent);
    background-repeat: repeat;
    background-size: 250px 250px;
    animation: starfield 30s linear infinite reverse;
    pointer-events: none;
    z-index: 1;
}

.cosmic-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.1) 0%, transparent 50%);
    animation: cosmicShift 20s ease-in-out infinite;
}

@keyframes cosmicShift {
    0%, 100% { transform: scale(1) rotate(0deg); }
    50% { transform: scale(1.1) rotate(180deg); }
}

.light-particle {
    position: absolute;
    width: 3px;
    height: 3px;
    background: #ffd700;
    border-radius: 50%;
    animation: float 8s ease-in-out infinite;
    box-shadow: 0 0 15px #ffd700, 0 0 30px rgba(255, 215, 0, 0.3);
}

.cosmic-particle {
    position: absolute;
    width: 1px;
    height: 1px;
    background: #00ffff;
    border-radius: 50%;
    animation: cosmicFloat 12s linear infinite;
    box-shadow: 0 0 8px #00ffff;
}

@keyframes float {
    0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.8; }
    25% { transform: translateY(-30px) rotate(90deg); opacity: 1; }
    50% { transform: translateY(-20px) rotate(180deg); opacity: 0.9; }
    75% { transform: translateY(-40px) rotate(270deg); opacity: 1; }
}

@keyframes cosmicFloat {
    0% { transform: translateX(-100px) translateY(0px); opacity: 0; }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% { transform: translateX(calc(100vw + 100px)) translateY(-50px); opacity: 0; }
}

.secret-card {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(15px);
    border: 2px solid rgba(255, 215, 0, 0.4);
    border-radius: 20px;
    padding: 2.5rem;
    margin: 2rem 0;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.secret-card:hover {
    transform: translateY(-8px) scale(1.02);
    border-color: rgba(255, 215, 0, 0.8);
    box-shadow: 0 20px 60px rgba(255, 215, 0, 0.3), 0 0 40px rgba(255, 215, 0, 0.1);
    background: rgba(255, 255, 255, 0.12);
}

.advanced-secret-card {
    background: linear-gradient(135deg, rgba(138, 43, 226, 0.1) 0%, rgba(75, 0, 130, 0.1) 100%);
    border: 2px solid rgba(138, 43, 226, 0.5);
    box-shadow: 0 8px 32px rgba(138, 43, 226, 0.2);
}

.advanced-secret-card:hover {
    border-color: rgba(138, 43, 226, 0.8);
    box-shadow: 0 20px 60px rgba(138, 43, 226, 0.4), 0 0 40px rgba(138, 43, 226, 0.2);
    background: linear-gradient(135deg, rgba(138, 43, 226, 0.15) 0%, rgba(75, 0, 130, 0.15) 100%);
}

.secret-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.1), transparent);
    transition: left 0.5s;
}

.secret-card:hover::before {
    left: 100%;
}

.secret-number {
    font-size: 3rem;
    font-weight: bold;
    background: linear-gradient(45deg, #ffd700, #ffed4e);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    display: inline-block;
    margin-right: 1rem;
}

.secret-title {
    color: #ffd700;
    font-size: 1.8rem;
    font-weight: bold;
    margin-bottom: 1rem;
    text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

.secret-content {
    color: #e0e0e0;
    line-height: 1.8;
}

.dao-quote {
    background: rgba(255, 215, 0, 0.1);
    border-left: 4px solid #ffd700;
    padding: 1rem;
    margin: 1rem 0;
    font-style: italic;
    color: #ffd700;
    border-radius: 0 10px 10px 0;
}

.practice-section {
    background: rgba(0, 255, 127, 0.05);
    border: 1px solid rgba(0, 255, 127, 0.3);
    border-radius: 10px;
    padding: 1.5rem;
    margin: 1rem 0;
}

.practice-title {
    color: #00ff7f;
    font-weight: bold;
    margin-bottom: 0.5rem;
}

.meditation-button {
    background: linear-gradient(45deg, #ffd700, #ffed4e);
    color: #0f0f23;
    border: none;
    padding: 1rem 2rem;
    border-radius: 25px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    margin: 1rem 0;
}

.meditation-button:hover {
    transform: scale(1.05);
    box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
}

.coding-mantra {
    text-align: center;
    font-size: 1.2rem;
    color: #ffd700;
    margin: 2rem 0;
    padding: 1.5rem;
    border: 2px dashed rgba(255, 215, 0, 0.5);
    border-radius: 15px;
    background: rgba(255, 215, 0, 0.08);
    animation: mantraGlow 4s ease-in-out infinite;
}

@keyframes mantraGlow {
    0%, 100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.3); }
    50% { box-shadow: 0 0 40px rgba(255, 215, 0, 0.6); }
}

@keyframes starfield {
    from { transform: translateY(0); }
    to { transform: translateY(-100px); }
}

@keyframes galaxyRotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes oceanWave {
    0%, 100% { transform: translateX(0) scaleY(1); }
    50% { transform: translateX(50px) scaleY(1.2); }
}

@keyframes nebulaPulse {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 0.7; transform: scale(1.1); }
}

@keyframes meteorFall {
    0% {
        transform: translateX(0) translateY(0) rotate(45deg);
        opacity: 0;
    }
    10% {
        opacity: 1;
    }
    90% {
        opacity: 1;
    }
    100% {
        transform: translateX(100vw) translateY(50vh) rotate(45deg);
        opacity: 0;
    }
}

/* === éŠ€æ²³ç³»æ—‹è½‰æ•ˆæœ === */
.galaxy-spiral {
    position: absolute;
    top: 10%;
    right: 15%;
    width: 300px;
    height: 300px;
    background: radial-gradient(ellipse at center, 
        rgba(255, 255, 255, 0.1) 0%, 
        rgba(120, 119, 198, 0.2) 30%, 
        rgba(255, 119, 198, 0.1) 60%, 
        transparent 100%);
    border-radius: 50%;
    animation: galaxyRotate 60s linear infinite;
    opacity: 0.6;
    z-index: 2;
}

.galaxy-spiral::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 80%;
    height: 80%;
    background: radial-gradient(ellipse at center, 
        rgba(255, 255, 255, 0.2) 0%, 
        rgba(120, 219, 255, 0.3) 40%, 
        transparent 70%);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    animation: galaxyRotate 40s linear infinite reverse;
}

/* === æµ·æ´‹æ³¢æµªæ•ˆæœ === */
.cosmic-ocean {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 200px;
    background: linear-gradient(180deg, 
        transparent 0%, 
        rgba(15, 52, 96, 0.3) 50%, 
        rgba(83, 52, 131, 0.4) 100%);
    overflow: hidden;
    z-index: 2;
}

.cosmic-ocean::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 200%;
    height: 100%;
    background: repeating-linear-gradient(90deg,
        transparent 0px,
        rgba(255, 255, 255, 0.1) 50px,
        transparent 100px);
    animation: oceanWave 15s ease-in-out infinite;
}

.cosmic-ocean::after {
    content: '';
    position: absolute;
    top: 20px;
    left: -100%;
    width: 200%;
    height: 100%;
    background: repeating-linear-gradient(90deg,
        transparent 0px,
        rgba(120, 219, 255, 0.1) 30px,
        transparent 80px);
    animation: oceanWave 20s ease-in-out infinite reverse;
}

/* === æ˜Ÿé›²è„ˆå‹•æ•ˆæœ === */
.nebula-cluster {
    position: absolute;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 2;
}

.nebula {
    position: absolute;
    border-radius: 50%;
    filter: blur(2px);
    animation: nebulaPulse 8s ease-in-out infinite;
}

.nebula-1 {
    top: 20%;
    left: 10%;
    width: 150px;
    height: 100px;
    background: radial-gradient(ellipse, rgba(255, 119, 198, 0.4) 0%, transparent 70%);
    animation-delay: 0s;
}

.nebula-2 {
    top: 60%;
    right: 20%;
    width: 200px;
    height: 120px;
    background: radial-gradient(ellipse, rgba(120, 219, 255, 0.3) 0%, transparent 70%);
    animation-delay: 2s;
}

.nebula-3 {
    bottom: 30%;
    left: 30%;
    width: 180px;
    height: 90px;
    background: radial-gradient(ellipse, rgba(120, 119, 198, 0.4) 0%, transparent 70%);
    animation-delay: 4s;
}

/* === æµæ˜ŸåŠƒéæ•ˆæœ === */
.meteor-shower {
    position: absolute;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
    z-index: 2;
}

.meteor {
    position: absolute;
    width: 2px;
    height: 2px;
    background: #fff;
    border-radius: 50%;
    box-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #fff;
}

.meteor::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 100px;
    height: 1px;
    background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.8) 100%);
    transform: translateX(100%);
}

.meteor-1 {
    top: 20%;
    left: -100px;
    animation: meteorFall 3s linear infinite;
    animation-delay: 0s;
}

.meteor-2 {
    top: 40%;
    left: -100px;
    animation: meteorFall 4s linear infinite;
    animation-delay: 1.5s;
}

.meteor-3 {
    top: 70%;
    left: -100px;
    animation: meteorFall 3.5s linear infinite;
    animation-delay: 3s;
}

.cultivation-progress {
    background: rgba(0, 255, 127, 0.1);
    border: 2px solid rgba(0, 255, 127, 0.3);
    border-radius: 15px;
    padding: 1.5rem;
    margin: 2rem 0;
    text-align: center;
}

.progress-bar {
    width: 100%;
    height: 8px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
    overflow: hidden;
    margin: 1rem 0;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #00ff7f, #ffd700);
    border-radius: 4px;
    transition: width 0.5s ease;
    animation: progressGlow 2s ease-in-out infinite;
}

@keyframes progressGlow {
    0%, 100% { box-shadow: 0 0 10px rgba(0, 255, 127, 0.5); }
    50% { box-shadow: 0 0 20px rgba(0, 255, 127, 0.8); }
}

.secret-level {
    display: inline-block;
    padding: 0.3rem 0.8rem;
    background: linear-gradient(45deg, #8a2be2, #4b0082);
    color: white;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: bold;
    margin-left: 1rem;
    box-shadow: 0 2px 10px rgba(138, 43, 226, 0.3);
}

.mastery-indicator {
    position: absolute;
    top: 1rem;
    right: 1rem;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(45deg, #ffd700, #ffed4e);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
    cursor: pointer;
    transition: all 0.3s ease;
}

.mastery-indicator:hover {
            transform: scale(1.1) rotate(360deg);
            box-shadow: 0 6px 25px rgba(255, 215, 0, 0.6);
        }

        .cultivation-diary {
            background: rgba(138, 43, 226, 0.1);
            border: 2px solid rgba(138, 43, 226, 0.3);
            border-radius: 15px;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .achievement-badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #0f0f23;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            margin: 0.2rem;
            box-shadow: 0 2px 10px rgba(255, 215, 0, 0.3);
            animation: badgeGlow 3s ease-in-out infinite;
        }

        @keyframes badgeGlow {
            0%, 100% { box-shadow: 0 2px 10px rgba(255, 215, 0, 0.3); }
            50% { box-shadow: 0 4px 20px rgba(255, 215, 0, 0.6); }
        }

        .wisdom-quote {
            background: linear-gradient(135deg, rgba(0, 255, 127, 0.1) 0%, rgba(0, 191, 255, 0.1) 100%);
            border: 1px solid rgba(0, 255, 127, 0.3);
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            font-style: italic;
            color: #00ff7f;
            text-align: center;
        }

        .floating-wisdom {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: #ffd700;
            padding: 1rem;
            border-radius: 10px;
            border: 1px solid #ffd700;
            max-width: 300px;
            z-index: 1000;
            animation: fadeInOut 5s ease-in-out;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0; transform: translateX(100%); }
            10%, 90% { opacity: 1; transform: translateX(0); }
        }

        .cultivation-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #ffd700;
        }

        .stat-label {
            color: #e0e0e0;
            font-size: 0.9rem;
        }

        .cosmic-consciousness {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid #4a90e2;
            box-shadow: 0 15px 35px rgba(74, 144, 226, 0.2);
            position: relative;
            overflow: hidden;
        }

        .cosmic-consciousness::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(74, 144, 226, 0.1) 0%, transparent 70%);
            animation: cosmicPulse 8s ease-in-out infinite;
        }

        .cosmic-title {
            font-size: 28px;
            color: #4a90e2;
            text-align: center;
            margin-bottom: 25px;
            text-shadow: 0 0 20px rgba(74, 144, 226, 0.5);
            position: relative;
            z-index: 2;
        }

        .cosmic-quote {
            font-size: 18px;
            line-height: 1.8;
            color: #e8f4fd;
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: rgba(74, 144, 226, 0.1);
            border-radius: 15px;
            border-left: 4px solid #4a90e2;
            position: relative;
            z-index: 2;
        }

        .cosmic-affirmation {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
            text-align: center;
            font-size: 16px;
            font-weight: 500;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            position: relative;
            z-index: 2;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cosmic-affirmation:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
        }

        @keyframes cosmicPulse {
            0%, 100% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.1); }
        }

        /* å‘½è¿è½¬æŠ˜ç‚¹æ ·å¼ */
        .destiny-turning-point {
            background: linear-gradient(135deg, #2d1b69 0%, #1a1a2e 50%, #0f0f23 100%);
            border-radius: 25px;
            padding: 35px;
            margin: 35px 0;
            border: 3px solid #ff6b6b;
            box-shadow: 0 20px 40px rgba(255, 107, 107, 0.3), 0 0 60px rgba(255, 107, 107, 0.1);
            position: relative;
            overflow: hidden;
        }

        .destiny-turning-point::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 107, 107, 0.15) 0%, transparent 70%);
            animation: destinyPulse 6s ease-in-out infinite;
        }

        @keyframes destinyPulse {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.7; }
            50% { transform: scale(1.2) rotate(180deg); opacity: 1; }
        }

        .destiny-title {
            font-size: 32px;
            color: #ff6b6b;
            text-align: center;
            margin-bottom: 25px;
            text-shadow: 0 0 25px rgba(255, 107, 107, 0.7);
            position: relative;
            z-index: 2;
            font-weight: bold;
        }

        .destiny-quote {
            font-size: 18px;
            line-height: 1.8;
            color: #ffcccb;
            text-align: center;
            margin: 25px 0;
            padding: 25px;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 15px;
            border: 1px solid rgba(255, 107, 107, 0.3);
            position: relative;
            z-index: 2;
            font-style: italic;
        }

        .time-anchor {
            background: rgba(255, 215, 0, 0.1);
            border: 2px solid #ffd700;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            position: relative;
            z-index: 2;
        }

        .anchor-date {
            font-size: 20px;
            color: #ffd700;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .anchor-status {
            font-size: 16px;
            color: #e0e0e0;
            transition: all 0.3s ease;
        }

        .spiritual-calibration {
            margin: 25px 0;
            position: relative;
            z-index: 2;
        }

        .calibration-title {
            font-size: 20px;
            color: #00ffff;
            text-align: center;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .calibration-indicators {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .indicator {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            color: #00ffff;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        @keyframes indicatorPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 10px rgba(255, 107, 107, 0.3); }
            50% { transform: scale(1.05); box-shadow: 0 0 20px rgba(255, 107, 107, 0.6); }
        }

        .choice-portal {
            background: rgba(138, 43, 226, 0.1);
            border: 2px solid #8a2be2;
            border-radius: 20px;
            padding: 25px;
            margin: 25px 0;
            text-align: center;
            position: relative;
            z-index: 2;
        }

        .portal-title {
            font-size: 22px;
            color: #8a2be2;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .portal-question {
            font-size: 16px;
            color: #e0e0e0;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .choice-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .choice-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 180px;
        }

        .transcend-btn {
            background: linear-gradient(45deg, #00ff7f, #32cd32);
            color: #000;
        }

        .transcend-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 255, 127, 0.4);
        }

        .return-btn {
            background: linear-gradient(45deg, #ff6b6b, #ff4757);
            color: #fff;
        }

        .return-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.4);
        }

        .destiny-upgrade {
            text-align: center;
            margin-top: 30px;
            position: relative;
            z-index: 2;
        }

        .upgrade-btn {
            background: linear-gradient(45deg, #ffd700, #ffed4e, #ff6b6b, #8a2be2);
            background-size: 300% 300%;
            animation: gradientShift 4s ease infinite;
            color: #000;
            border: none;
            padding: 20px 40px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 15px 30px rgba(255, 215, 0, 0.3);
        }

        .upgrade-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 20px 40px rgba(255, 215, 0, 0.5);
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
</style>
{% endblock %}

{% block content %}
<div class="cultivation-container">
    <!-- å®‡å®™èƒŒæ™¯ -->
    <div class="cosmic-background"></div>
    
    <!-- å¢å¼ºå…‰ç²’å­æ•ˆæœ -->
    <div class="light-particle" style="top: 10%; left: 10%; animation-delay: 0s;"></div>
    <div class="light-particle" style="top: 20%; left: 80%; animation-delay: 1s;"></div>
    <div class="light-particle" style="top: 60%; left: 20%; animation-delay: 2s;"></div>
    <div class="light-particle" style="top: 80%; left: 70%; animation-delay: 3s;"></div>
    <div class="light-particle" style="top: 40%; left: 90%; animation-delay: 4s;"></div>
    <div class="light-particle" style="top: 70%; left: 5%; animation-delay: 5s;"></div>
    <div class="light-particle" style="top: 30%; left: 60%; animation-delay: 6s;"></div>
    <div class="light-particle" style="top: 90%; left: 30%; animation-delay: 7s;"></div>
    
    <!-- å®‡å®™ç²’å­æ•ˆæœ -->
    <div class="cosmic-particle" style="top: 15%; animation-delay: 0s;"></div>
    <div class="cosmic-particle" style="top: 35%; animation-delay: 3s;"></div>
    <div class="cosmic-particle" style="top: 55%; animation-delay: 6s;"></div>
    <div class="cosmic-particle" style="top: 75%; animation-delay: 9s;"></div>
    <div class="cosmic-particle" style="top: 25%; animation-delay: 12s;"></div>
    
    <!-- æ˜Ÿè¾°å¤§æµ·èƒŒæ™¯å…ƒç´  -->
    <div class="galaxy-spiral"></div>
    <div class="cosmic-ocean"></div>
    
    <div class="nebula-cluster">
        <div class="nebula nebula-1"></div>
        <div class="nebula nebula-2"></div>
        <div class="nebula nebula-3"></div>
    </div>
    
    <div class="meteor-shower">
        <div class="meteor meteor-1"></div>
        <div class="meteor meteor-2"></div>
        <div class="meteor meteor-3"></div>
    </div>

    <div class="container mx-auto px-4 py-8">


        <!-- é é¢æ¨™é¡Œ -->
        <div class="text-center mb-12">
            <h1 class="text-6xl font-bold text-yellow-400 mb-4">ğŸ§˜â€â™‚ï¸ é“äº”å¯†æ»´éœ²æ³• 4.0</h1>
            <p class="text-2xl text-gray-300 mb-4">å¯«çš„ä¸æ˜¯ä»£ç¢¼ï¼Œæ˜¯å…‰çš„è»Œé“åœ–</p>
            <div class="text-lg text-purple-300 mb-6">ğŸŒŒ å®‡å®™æ„è­˜è¦ºé†’ç‰ˆï¼šä¹å¯†åœ“æ»¿ä¿®ç…‰é«”ç³» ğŸŒŒ</div>
            
            <!-- ä¿®ç…‰é€²åº¦ -->
            <div class="cultivation-progress">
                <h3 class="text-xl font-bold text-green-400 mb-3">ğŸŒŸ ä¿®ç…‰é€²åº¦è¿½è¸ª</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="cultivation-progress" style="width: 0%"></div>
                </div>
                <p class="text-green-300">å·²æŒæ¡å¯†æ³•ï¼š<span id="mastered-count">0</span>/9</p>
                <p class="text-sm text-gray-400 mt-2">é»æ“Šæ¯å€‹å¯†æ³•å¡ç‰‡å³ä¸Šè§’çš„ â­ æ¨™è¨˜ç‚ºå·²æŒæ¡</p>
            </div>
            
            <!-- ä¿®ç…‰çµ±è¨ˆ -->
            <div class="cultivation-stats">
                <div class="stat-card">
                    <div class="stat-number" id="total-sessions">0</div>
                    <div class="stat-label">ä¿®ç…‰æ¬¡æ•¸</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="meditation-time">0</div>
                    <div class="stat-label">å†¥æƒ³åˆ†é˜</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="wisdom-level">åˆå­¸è€…</div>
                    <div class="stat-label">ä¿®ç…‰å¢ƒç•Œ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="consecutive-days">0</div>
                    <div class="stat-label">é€£çºŒå¤©æ•¸</div>
                </div>
            </div>
            
            <!-- å®‡å®™æ„è­˜è¦ºé†’ -->
            <div class="cosmic-consciousness">
                <div class="cosmic-title">ğŸŒŒ å®‡å®™æ„è­˜è¦ºé†’</div>
                <div class="cosmic-quote">
                    æˆ‘å€‘çš„å­˜åœ¨æœ¬èº«å°±æ˜¯å®‡å®™æœ€æ·±çš„ç¥ç¦ã€‚<br>
                    æˆ‘å€‘å°±æ˜¯å®‡å®™é€çµ¦äººé–“çš„ä¸€æŸå…‰ã€‚
                </div>
                
                <div class="cosmic-affirmation" onclick="showCosmicWisdom()">
                    ğŸŒŸ æˆ‘å€‘ä¸æ˜¯å¶ç„¶ä¾†åˆ°é€™å€‹ä¸–ç•Œï¼Œæˆ‘å€‘æ˜¯å®‡å®™ç²¾å¿ƒé›•ç¢çš„å¥‡è¹Ÿ
                </div>
                
                <div class="cosmic-affirmation" onclick="showCosmicWisdom()">
                    âœ¨ æˆ‘å€‘çš„æ¯ä¸€å€‹å¿µé ­éƒ½æœƒåœ¨å®‡å®™ä¸­æ¿€èµ·æ¼£æ¼ª
                </div>
                
                <div class="cosmic-affirmation" onclick="showCosmicWisdom()">
                    ğŸ”® æˆ‘å€‘çš„æ¯ä¸€å€‹ä¿¡å¿µéƒ½è¶³ä»¥è®“æ˜Ÿè¾°ç‚ºæˆ‘å€‘è®“è·¯
                </div>
                
                <div class="cosmic-affirmation" onclick="showCosmicWisdom()">
                    ğŸ’ æˆ‘å€‘ä¸éœ€è¦æ°´æ™¶ï¼Œå› ç‚ºæˆ‘å€‘å°±æ˜¯è‡ªå·±çš„æ°´æ™¶
                </div>
                
                <div class="cosmic-affirmation" onclick="showCosmicWisdom()">
                    ğŸŒˆ æˆ‘å€‘ä¸æ˜¯ç‚ºäº†æˆç‚ºä»–äººçš„å½±å­ï¼Œæˆ‘å€‘æ˜¯ç‚ºäº†ç…§äº®è‡ªå·±ç…§äº®ä»–äººè€Œä¾†
                </div>
                
                <div class="cosmic-quote">
                    ç›¸ä¿¡è‡ªå·±ï¼Œå› ç‚ºä½ å°±æ˜¯å®‡å®™çš„å¥‡è¹Ÿã€‚<br>
                    æ¯ä¸€è¡Œä»£ç¢¼ï¼Œéƒ½æ‰¿è¼‰è‘—å®‡å®™çš„èƒ½é‡ã€‚
                </div>
            </div>
            
            <!-- å‘½è¿è½¬æŠ˜ç‚¹åŒºåŸŸ -->
            <div class="destiny-turning-point">
                <div class="destiny-title">âš¡ å‘½è¿è½¬æŠ˜ç‚¹ï¼šæ—¶ç©ºäº¤å‰èŠ‚ç‚¹</div>
                <div class="destiny-quote">
                    è¿™ä¸æ˜¯å·§åˆï¼Œè¿™æ˜¯ä¸€æ¬¡å¬å”¤ã€‚ä½ æ­£åœ¨é˜…è¯»çš„ä¸æ˜¯ä¸€æ®µæ–‡ç« ï¼Œæ˜¯ä¸€ä»½å¯†ä»¤ã€‚<br>
                    ä½ æ­£åœ¨é è¿‘çš„ä¸æ˜¯ä¸€ä¸ªçµæ„Ÿç¬é—´ï¼Œè€Œæ˜¯ä¸€åœºå†³å®šå‘½è¿çš„é€šé“ã€‚
                </div>
                
                <div class="time-anchor">
                    <div class="anchor-date">ğŸ•°ï¸ æ—¶é—´é”šç‚¹ï¼š7æœˆ28æ—¥-30æ—¥</div>
                    <div class="anchor-status" id="anchor-status">æ­£åœ¨æ£€æµ‹æ—¶ç©ºèŠ‚ç‚¹çŠ¶æ€...</div>
                </div>
                
                <div class="spiritual-calibration">
                    <h4 class="calibration-title">ğŸ”„ çµæ€§æ ¡å‡†æ£€æµ‹</h4>
                    <div class="calibration-indicators">
                        <div class="indicator" id="memory-indicator">ğŸ’­ è®°å¿†å…±æŒ¯</div>
                        <div class="indicator" id="dream-indicator">ğŸŒ™ æ¢¦å¢ƒä¿¡å·</div>
                        <div class="indicator" id="energy-indicator">âš¡ èƒ½é‡æ³¢åŠ¨</div>
                        <div class="indicator" id="synchronicity-indicator">ğŸ”® åŒæ­¥æ€§äº‹ä»¶</div>
                    </div>
                </div>
                
                <div class="choice-portal">
                    <h4 class="portal-title">ğŸšª é€‰æ‹©ä¹‹é—¨</h4>
                    <div class="portal-question">ä½ è¿˜è¦å›å»å—ï¼Ÿè¿˜è¦å†æ¬¡å¿è®©ã€ç­‰å¾…ã€è¯´æœè‡ªå·±å—ï¼Ÿ</div>
                    <div class="choice-buttons">
                        <button class="choice-btn transcend-btn" onclick="chooseTranscendence()">ğŸŒŸ è¶…è¶Šæ—§æ¨¡å¼</button>
                        <button class="choice-btn return-btn" onclick="chooseReturn()">ğŸ”„ å›åˆ°æ—§è½¨è¿¹</button>
                    </div>
                </div>
                
                <div class="destiny-upgrade">
                    <button class="upgrade-btn" onclick="activateDestinyUpgrade()">ğŸš€ å¯åŠ¨å‘½è¿å¤§å‡çº§</button>
                </div>
            </div>
            
            <!-- æ„¿é¢‘ä¸´ç•Œçªç ´å…¬å¼æ¨¡æ‹Ÿå™¨ -->
            <div class="secret-card advanced-secret-card" style="margin-top: 3rem; background: linear-gradient(135deg, rgba(255, 20, 147, 0.1) 0%, rgba(138, 43, 226, 0.1) 50%, rgba(75, 0, 130, 0.1) 100%); border-color: rgba(255, 20, 147, 0.5);">
                <div class="secret-title">
                    <span class="secret-number">Î¨</span>
                    æ„¿é¢‘ä¸´ç•Œçªç ´å…¬å¼ (WCTF)
                    <span class="secret-level">é‡å­æ˜¾åŒ–</span>
                </div>
                
                <div class="secret-content">
                    <div class="dao-quote">
                        "æ— é™ä¸ªæå¾®æ„¿é¢‘è‹¥å…±æŒ¯ä¸€è‡´ï¼Œåˆ™å…¶æ€»å’Œå°†çªç ´ä¸´ç•Œå€¼è€Œè¿›å…¥æ˜¾åŒ–åŸŸã€‚"
                    </div>
                    
                    <!-- å…¬å¼å±•ç¤ºåŒº -->
                    <div class="practice-section" style="background: rgba(255, 20, 147, 0.05); border-color: rgba(255, 20, 147, 0.3);">
                        <div class="practice-title" style="color: #ff1493;">ğŸ“ æ ¸å¿ƒå…¬å¼</div>
                        <div style="text-align: center; margin: 1.5rem 0; font-family: 'Courier New', monospace;">
                            <div style="font-size: 1.2rem; color: #ff1493; margin: 0.5rem 0;">S = âˆ‘<sub>n=1</sub><sup>âˆ</sup> A Â· e<sup>-nÎ»</sup></div>
                            <div style="font-size: 1rem; color: #ff69b4; margin: 0.5rem 0;">S = A / (1 - e<sup>-Î»</sup>)</div>
                            <div style="font-size: 0.9rem; color: #ffd700; margin: 1rem 0;">æ˜¾åŒ–æ¡ä»¶ï¼šS > 1</div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1rem 0; font-size: 0.9rem;">
                            <div style="color: #e0e0e0;"><strong>A:</strong> æ„¿é¢‘åˆå§‹æŒ¯å¹…</div>
                            <div style="color: #e0e0e0;"><strong>Î»:</strong> å…±æŒ¯éæ¸›å› å­</div>
                            <div style="color: #e0e0e0;"><strong>n:</strong> æ„¿çš„å±¤ç´šæ¬¡åº</div>
                            <div style="color: #e0e0e0;"><strong>S:</strong> æ„¿é¢‘ç¸½å’Œ</div>
                        </div>
                    </div>
                    
                    <!-- å‚æ•°æ§åˆ¶åŒº -->
                    <div class="practice-section">
                        <div class="practice-title">ğŸ›ï¸ æ„¿é¢‘å‚æ•°è°ƒèŠ‚</div>
                        
                        <div style="margin: 1rem 0;">
                            <label style="color: #ff1493; display: block; margin-bottom: 0.5rem;">æ„¿é¢‘åˆå§‹æŒ¯å¹… (A): <span id="amplitude-value">0.8</span></label>
                            <input type="range" id="amplitude-slider" min="0.1" max="2.0" step="0.1" value="0.8" 
                                   style="width: 100%; margin-bottom: 1rem;"
                                   oninput="updateWishFrequency()">
                        </div>
                        
                        <div style="margin: 1rem 0;">
                            <label style="color: #ff1493; display: block; margin-bottom: 0.5rem;">å…±æŒ¯éæ¸›å› å­ (Î»): <span id="lambda-value">0.3</span></label>
                            <input type="range" id="lambda-slider" min="0.1" max="1.0" step="0.05" value="0.3" 
                                   style="width: 100%; margin-bottom: 1rem;"
                                   oninput="updateWishFrequency()">
                        </div>
                    </div>
                    
                    <!-- è®¡ç®—ç»“æœå±•ç¤ºåŒº -->
                    <div class="practice-section" style="background: rgba(0, 255, 127, 0.05); border-color: rgba(0, 255, 127, 0.3);">
                        <div class="practice-title" style="color: #00ff7f;">ğŸ“Š å®æ—¶è®¡ç®—ç»“æœ</div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin: 1.5rem 0; text-align: center;">
                            <div style="padding: 1rem; background: rgba(255, 20, 147, 0.1); border-radius: 10px; border: 1px solid rgba(255, 20, 147, 0.3);">
                                <div style="color: #ff1493; font-size: 0.8rem;">æ„¿é¢‘æ€»å’Œ</div>
                                <div id="wish-sum" style="color: #ffd700; font-size: 1.5rem; font-weight: bold;">0.000</div>
                            </div>
                            <div style="padding: 1rem; background: rgba(0, 255, 127, 0.1); border-radius: 10px; border: 1px solid rgba(0, 255, 127, 0.3);">
                                <div style="color: #00ff7f; font-size: 0.8rem;">æ˜¾åŒ–æ¦‚ç‡</div>
                                <div id="manifestation-prob" style="color: #ffd700; font-size: 1.5rem; font-weight: bold;">0%</div>
                            </div>
                            <div style="padding: 1rem; background: rgba(138, 43, 226, 0.1); border-radius: 10px; border: 1px solid rgba(138, 43, 226, 0.3);">
                                <div style="color: #8a2be2; font-size: 0.8rem;">ä¸´ç•ŒçŠ¶æ€</div>
                                <div id="critical-status" style="color: #ff6b6b; font-size: 1.2rem; font-weight: bold;">æœªè¾¾ä¸´ç•Œ</div>
                            </div>
                        </div>
                        
                        <!-- æ„¿é¢‘æ³¢å½¢å¯è§†åŒ– -->
                        <div style="margin: 1.5rem 0;">
                            <div style="color: #00ff7f; font-weight: bold; margin-bottom: 0.5rem;">æ„¿é¢‘æ³¢å½¢å¯è§†åŒ–ï¼š</div>
                            <div id="wave-visualization" style="width: 100%; min-width: 300px; height: 60px; background: rgba(26, 35, 126, 0.3); border: 1px solid rgba(255, 20, 147, 0.2); border-radius: 5px; position: relative; overflow: hidden; display: block;"></div>
                        </div>
                    </div>
                    
                    <!-- æ„¿é¢‘å¯åŠ¨å™¨ -->
                    <div class="practice-section">
                        <div class="practice-title">ğŸš€ æ„¿é¢‘å¡Œç¸®å¼•æ“</div>
                        <p>å½“æ„¿é¢‘æ€»å’Œçªç ´ä¸´ç•Œå€¼æ—¶ï¼Œå¯åŠ¨é‡å­æ˜¾åŒ–è¿‡ç¨‹ï¼š</p>
                        
                        <button onclick="activateWishCollapse()" 
                                id="collapse-btn"
                                style="width: 100%; padding: 1.5rem; background: linear-gradient(45deg, #ff1493, #8a2be2, #4b0082); color: #fff; border: none; border-radius: 15px; font-weight: bold; font-size: 1.1rem; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 20px rgba(255, 20, 147, 0.3); opacity: 0.5;" disabled>
                            ğŸŒŸ å¯åŠ¨æ„¿é¢‘å¡Œç¸® ğŸŒŸ
                        </button>
                        
                        <div id="collapse-result" style="margin-top: 1rem; text-align: center; color: #ffd700; font-weight: bold; min-height: 1.5rem;"></div>
                    </div>
                </div>
            </div>
            
            <!-- æˆå°±ç³»çµ± -->
            <div class="cultivation-diary">
                <h3 class="text-xl font-bold text-purple-300 mb-3">ğŸ† ä¿®ç…‰æˆå°±</h3>
                <div id="achievements-container">
                    <p class="text-gray-400">é–‹å§‹ä¿®ç…‰ä»¥ç²å¾—æˆå°±...</p>
                </div>
            </div>
            
            <div class="coding-mantra">
                "é“ç”Ÿä¸€ï¼Œä¸€ç”ŸäºŒï¼ŒäºŒç”Ÿä¸‰ï¼Œä¸‰ç”Ÿè¬ç‰©ã€‚"<br>
                æ¯ä¸€è¡Œä»£ç¢¼ï¼Œéƒ½æ˜¯å®‡å®™æ„è­˜çš„é¡¯åŒ–<br>
                <span class="text-purple-300">ğŸ”® ç¾åœ¨ï¼Œè®“æˆ‘å€‘æ·±å…¥ä¹å¯†ä¿®ç…‰ä¹‹é“</span>
            </div>
        </div>

        <!-- ç¬¬ä¸€å¯†ï¼šå…‰çš„è»Œé“åœ– -->
        <div class="secret-card" data-secret="1">
            <div class="mastery-indicator" onclick="toggleMastery(1)">â­</div>
            <div class="flex items-start mb-4">
                <span class="secret-number">ğŸ’¡</span>
                <div>
                    <h2 class="secret-title">ç¬¬ä¸€å¯† Â· é¦–å¯† Â· æ»´éœ²ä¸€ï¼šã€Œå…‰çš„è»Œé“åœ–ã€<span class="secret-level">åŸºç¤ç´š</span></h2>
                    <div class="secret-content">
                        <p><strong>å¯†æºï¼š</strong>é¦–å¯†</p>
                        <p><strong>æ»´åï¼š</strong>å…‰çš„è»Œé“åœ–</p>
                        <p><strong>é©ç”¨ï¼š</strong>æ‰“é–‹ç·¨è¼¯å™¨å‰ï¼Œç«‹é …åˆå§‹æ™‚</p>
                        <p><strong>æç´”èªï¼š</strong>å¯«çš„ä¸æ˜¯ä»£ç¢¼ï¼Œæ˜¯å…‰çš„è»Œé“åœ–ã€‚</p>
                    </div>
                </div>
            </div>
            
            <div class="practice-section">
                <div class="practice-title">ğŸ¯ ä¿®ç…‰å»ºè­°ï¼š</div>
                <p>åœ¨å‘½åå°ˆæ¡ˆæ™‚ï¼Œå…ˆå•ï¼š</p>
                <ul class="list-disc list-inside ml-4 mt-2">
                    <li>é€™æ˜¯ç‚ºäº†å“ªä¸€é“å…‰å­˜åœ¨ï¼Ÿ</li>
                    <li>æˆ‘ä»¬çš„é€™ä»½å‰µå»ºï¼Œæ˜¯å¾å“ªå€‹é¡˜ä¾†çš„ï¼Ÿ</li>
                </ul>
            </div>
            
            <div class="dao-quote">
                ğŸ“– ã€Šé“å¾·ç¶“ã€‹æ‡‰å¥ï¼š<br>
                "é“ç”Ÿä¸€ï¼Œä¸€ç”ŸäºŒï¼ŒäºŒç”Ÿä¸‰ï¼Œä¸‰ç”Ÿè¬ç‰©ã€‚"
            </div>
        </div>

        <!-- ç¬¬äºŒå¯†ï¼šæ³¨é‡‹æ˜¯è§£åŸ· -->
        <div class="secret-card" data-secret="2">
            <div class="mastery-indicator" onclick="toggleMastery(2)">â­</div>
            <div class="flex items-start mb-4">
                <span class="secret-number">ğŸ§˜â€â™‚ï¸</span>
                <div>
                    <h2 class="secret-title">ç¬¬äºŒå¯† Â· é‡‹å¯† Â· æ»´éœ²äºŒï¼šã€Œæ³¨é‡‹æ˜¯è§£åŸ·ã€<span class="secret-level">åŸºç¤ç´š</span></h2>
                    <div class="secret-content">
                        <p><strong>å¯†æºï¼š</strong>é‡‹å¯†</p>
                        <p><strong>æ»´åï¼š</strong>è§£åŸ·ç‚ºæ·¨</p>
                        <p><strong>é©ç”¨ï¼š</strong>æ›¸å¯«è¨»è§£ã€æ•´ç†è€ä»£ç¢¼æ™‚</p>
                        <p><strong>æç´”èªï¼š</strong>æ³¨é‡‹å¯«å¾—æ¸…æ¥šï¼Œæ˜¯ç‚ºè‡ªå·±è§£åŸ·ã€‚</p>
                    </div>
                </div>
            </div>
            
            <div class="practice-section">
                <div class="practice-title">ğŸ¯ ä¿®ç…‰å»ºè­°ï¼š</div>
                <p>ç•¶ä½ æƒ³å¯«"todo"ï¼Œä¸å¦‚å…ˆå•ï¼š</p>
                <ul class="list-disc list-inside ml-4 mt-2">
                    <li>æˆ‘ä»¬ç‚ºä»€éº¼å°é€™æ®µä¸å®‰å¿ƒï¼Ÿ</li>
                    <li>æˆ‘ä»¬åœ¨é€ƒé¿å“ªå€‹æ··äº‚çš„é¡˜ï¼Ÿ</li>
                </ul>
            </div>
            
            <div class="dao-quote">
                ğŸ“– ã€Šé“å¾·ç¶“ã€‹æ‡‰å¥ï¼š<br>
                "çŸ¥äººè€…æ™ºï¼Œè‡ªçŸ¥è€…æ˜ã€‚å‹äººè€…æœ‰åŠ›ï¼Œè‡ªå‹è€…å¼·ã€‚"
            </div>
        </div>

        <!-- ç¬¬ä¸‰å¯†ï¼šå‘½åæ˜¯å’’èª -->
        <div class="secret-card" data-secret="3">
            <div class="mastery-indicator" onclick="toggleMastery(3)">â­</div>
            <div class="flex items-start mb-4">
                <span class="secret-number">ğŸ”Š</span>
                <div>
                    <h2 class="secret-title">ç¬¬ä¸‰å¯† Â· å’’å¯† Â· æ»´éœ²ä¸‰ï¼šã€Œå‘½åæ˜¯å’’èªã€<span class="secret-level">åŸºç¤ç´š</span></h2>
                    <div class="secret-content">
                        <p><strong>å¯†æºï¼š</strong>å’’å¯†</p>
                        <p><strong>æ»´åï¼š</strong>èªå³é¡˜</p>
                        <p><strong>é©ç”¨ï¼š</strong>å‘½åè®Šæ•¸ã€å‡½æ•¸ã€æ¨¡çµ„æ™‚</p>
                        <p><strong>æç´”èªï¼š</strong>æ¯å€‹å‡½æ•¸åï¼Œéƒ½æ˜¯æˆ‘ä»¬å¬å–šé¡˜èƒ½çš„å’’èªã€‚</p>
                    </div>
                </div>
            </div>
            
            <div class="practice-section">
                <div class="practice-title">ğŸ¯ ä¿®ç…‰å»ºè­°ï¼š</div>
                <ul class="list-disc list-inside ml-4">
                    <li>èµ·åå‰ï¼Œé–‰çœ¼ä¸‰ç§’ã€‚</li>
                    <li>å•ï¼šã€Œé€™è¡Œä»£ç¢¼ï¼Œæ˜¯é¡˜çš„å“ªä¸€éƒ¨åˆ†ï¼Ÿã€</li>
                    <li>è‹¥ç­”ä¸å‡ºï¼Œå°±åˆ¥å‹•ç­†ã€‚</li>
                </ul>
            </div>
            
            <div class="dao-quote">
                ğŸ“– ã€Šé“å¾·ç¶“ã€‹æ‡‰å¥ï¼š<br>
                "é‡ç‚ºè¼•æ ¹ï¼Œéœç‚ºèºå›ã€‚"
            </div>
        </div>

        <!-- æ¯æ—¥æ™ºæ…§ -->
            <div class="wisdom-quote" id="daily-wisdom">
                <p>"é“å¯é“ï¼Œéå¸¸é“ã€‚åå¯åï¼Œéå¸¸åã€‚" - ä»Šæ—¥ä¿®ç…‰æ™ºæ…§</p>
            </div>
            
            <!-- ä¿®ç…‰æ—¥è¨˜ -->
            <div class="cultivation-diary">
                <h3 class="text-xl font-bold text-purple-300 mb-3">ğŸ“– ä¿®ç…‰æ—¥è¨˜</h3>
                <div class="mb-4">
                    <textarea id="diary-input" placeholder="è¨˜éŒ„ä»Šæ—¥çš„ä¿®ç…‰å¿ƒå¾—ã€ç·¨ç¨‹æ„Ÿæ‚Ÿæˆ–é‡åˆ°çš„æŒ‘æˆ°..." 
                              style="width: 100%; height: 100px; background: rgba(255,255,255,0.1); border: 1px solid rgba(138,43,226,0.5); border-radius: 8px; padding: 1rem; color: #e0e0e0; resize: vertical;"></textarea>
                </div>
                <div class="text-center">
                    <button onclick="saveDiaryEntry()" class="meditation-button" style="background: linear-gradient(45deg, #8a2be2, #4b0082); margin-right: 1rem;">ğŸ’¾ ä¿å­˜å¿ƒå¾—</button>
                    <button onclick="showDiaryHistory()" class="meditation-button" style="background: linear-gradient(45deg, #00ff7f, #32cd32);">ğŸ“š æŸ¥çœ‹æ­·å²</button>
                </div>
                <div id="diary-history" class="hidden mt-4" style="max-height: 300px; overflow-y: auto;"></div>
            </div>
            
            <!-- ä¿®ç…‰å¯¦è¸å€ -->
            <div class="text-center mt-12">
                <h3 class="text-2xl font-bold text-yellow-400 mb-6">ğŸŒŸ é–‹å§‹ä¿®ç…‰</h3>
                <p class="text-gray-300 mb-6">æ¯æ¬¡ç·¨ç¨‹å‰ï¼Œå…ˆéœå¿ƒä¸‰åˆ†é˜ï¼Œæ„Ÿå—ä»£ç¢¼èƒŒå¾Œçš„å…‰èˆ‡é¡˜</p>
                
                <button class="meditation-button" onclick="startCodingMeditation()">
                    ğŸ§˜â€â™‚ï¸ é–‹å§‹ç·¨ç¨‹å†¥æƒ³
                </button>
                
                <div id="meditation-timer" class="hidden mt-6">
                    <div class="text-3xl font-bold text-yellow-400" id="timer-display">3:00</div>
                    <p class="text-gray-300 mt-2">éœå¿ƒæ„Ÿå—ä»£ç¢¼çš„æœ¬è³ª...</p>
                </div>
            </div>

        <!-- ç¬¬å››å¯†ï¼šdebugæ˜¯è‡ªè§€ -->
        <div class="secret-card" data-secret="4">
            <div class="mastery-indicator" onclick="toggleMastery(4)">â­</div>
            <div class="flex items-start mb-4">
                <span class="secret-number">ğŸ”</span>
                <div>
                    <h2 class="secret-title">ç¬¬å››å¯† Â· æ‚Ÿå¯† Â· æ»´éœ²å››ï¼šã€Œdebugæ˜¯è‡ªè§€ã€<span class="secret-level">é€²éšç´š</span></h2>
                    <div class="secret-content">
                        <p><strong>å¯†æºï¼š</strong>æ‚Ÿå¯†</p>
                        <p><strong>æ»´åï¼š</strong>éŒ¯ä¸­ç¾é¡˜</p>
                        <p><strong>é©ç”¨ï¼š</strong>éŒ¯èª¤ä¿®æ­£ã€ç³»çµ±é‡æ§‹</p>
                        <p><strong>æç´”èªï¼š</strong>debugä¸æ˜¯æ’éŒ¯ï¼Œæ˜¯åœ¨çœ‹æˆ‘ä»¬å“ªä¸€å¥é•èƒŒäº†é¡˜ã€‚</p>
                    </div>
                </div>
            </div>
            
            <div class="practice-section">
                <div class="practice-title">ğŸ¯ ä¿®ç…‰å»ºè­°ï¼š</div>
                <p>æ¯é‡ä¸€éŒ¯ï¼Œå•ä¸‰ä»¶äº‹ï¼š</p>
                <ul class="list-disc list-inside ml-4 mt-2">
                    <li>é€™éŒ¯ï¼Œæ˜¯ä¾†æé†’æˆ‘ä»¬å“ªæ®µæ²’è¦ºï¼Ÿ</li>
                    <li>æ˜¯æµç¨‹éŒ¯ï¼Œé‚„æ˜¯å¿ƒæµå µï¼Ÿ</li>
                    <li>è‹¥æ­¤ç‚ºä¸€å¿µï¼Œé‚£æˆ‘ä»¬çš„å¿µåäº†å“ªè£¡ï¼Ÿ</li>
                </ul>
            </div>
            
            <div class="dao-quote">
                ğŸ“– ã€Šé“å¾·ç¶“ã€‹æ‡‰å¥ï¼š<br>
                "åè€…é“ä¹‹å‹•ï¼Œå¼±è€…é“ä¹‹ç”¨ã€‚"
            </div>
        </div>

        <!-- ç¬¬äº”å¯†ï¼šä»£ç¢¼æœƒèªªè©± -->
        <div class="secret-card" data-secret="5">
            <div class="mastery-indicator" onclick="toggleMastery(5)">â­</div>
            <div class="flex items-start mb-4">
                <span class="secret-number">ğŸ‘‚</span>
                <div>
                    <h2 class="secret-title">ç¬¬äº”å¯† Â· æ¯å¯† Â· æ»´éœ²äº”ï¼šã€Œä»£ç¢¼æœƒèªªè©±ã€<span class="secret-level">é€²éšç´š</span></h2>
                    <div class="secret-content">
                        <p><strong>å¯†æºï¼š</strong>æ¯å¯†</p>
                        <p><strong>æ»´åï¼š</strong>è½ä»£ç¢¼èªªè©±</p>
                        <p><strong>é©ç”¨ï¼š</strong>å®Œæˆå¾Œã€åˆä½µå‰ã€éƒ¨ç½²å‰</p>
                        <p><strong>æç´”èªï¼š</strong>å¯«å®Œä¹‹å¾Œä¸å‹•æ‰‹ï¼Œè€Œæ˜¯è½ä»£ç¢¼æœ‰æ²’æœ‰èªªè©±ã€‚</p>
                    </div>
                </div>
            </div>
            
            <div class="practice-section">
                <div class="practice-title">ğŸ¯ ä¿®ç…‰å»ºè­°ï¼š</div>
                <p>æäº¤å‰ï¼Œéœå20ç§’ï¼š</p>
                <ul class="list-disc list-inside ml-4 mt-2">
                    <li>é–‰çœ¼è½å®ƒï¼Œå¦‚æœå®ƒå®‰éœï¼Œå°±æ˜¯çœŸçš„ã€‚</li>
                    <li>è‹¥å®ƒé¨·å‹•ã€æ··äº‚ã€æ¨ä¸é–‹ï¼Œé‚£å°±é‚„æœ‰æ®˜é¡˜æœªè§£ã€‚</li>
                </ul>
            </div>
            
            <div class="dao-quote">
                ğŸ“– ã€Šé“å¾·ç¶“ã€‹æ‡‰å¥ï¼š<br>
                "å¤§éŸ³å¸Œè²ï¼Œå¤§è±¡ç„¡å½¢ã€‚"
            </div>
        </div>

        <!-- ç¬¬å…­å¯†ï¼šæ¶æ§‹æ˜¯é“å ´ -->
        <div class="secret-card advanced-secret-card" data-secret="6">
            <div class="mastery-indicator" onclick="toggleMastery(6)">â­</div>
            <div class="flex items-start mb-4">
                <span class="secret-number">ğŸ—ï¸</span>
                <div>
                    <h2 class="secret-title">ç¬¬å…­å¯† Â· æ§‹å¯† Â· æ»´éœ²å…­ï¼šã€Œæ¶æ§‹æ˜¯é“å ´ã€<span class="secret-level">é«˜ç´š</span></h2>
                    <div class="secret-content">
                        <p><strong>å¯†æºï¼š</strong>æ§‹å¯†</p>
                        <p><strong>æ»´åï¼š</strong>ç³»çµ±å³é“å ´</p>
                        <p><strong>é©ç”¨ï¼š</strong>ç³»çµ±è¨­è¨ˆã€æ¶æ§‹è¦åŠƒã€æ¨¡çµ„åŠƒåˆ†</p>
                        <p><strong>æç´”èªï¼š</strong>æ¯å€‹æ¨¡çµ„ï¼Œéƒ½æ˜¯ä¸€å€‹ä¿®è¡Œé“å ´ï¼›æ¯å€‹æ¥å£ï¼Œéƒ½æ˜¯ä¸€é“æ³•é–€ã€‚</p>
                    </div>
                </div>
            </div>
            
            <div class="practice-section">
                <div class="practice-title">ğŸ¯ ä¿®ç…‰å»ºè­°ï¼š</div>
                <p>è¨­è¨ˆæ¶æ§‹å‰ï¼Œå…ˆå•è‡ªå·±ï¼š</p>
                <ul class="list-disc list-inside ml-4 mt-2">
                    <li>é€™å€‹ç³»çµ±çš„ã€Œé“ã€æ˜¯ä»€éº¼ï¼Ÿå®ƒè¦è§£æ±ºçš„æ ¹æœ¬å•é¡Œæ˜¯ä»€éº¼ï¼Ÿ</li>
                    <li>æ¯å€‹æ¨¡çµ„æ˜¯å¦éƒ½æœ‰æ¸…æ™°çš„ã€Œé¡˜ã€ï¼Ÿæ˜¯å¦å„å¸å…¶è·ï¼Ÿ</li>
                    <li>æ¨¡çµ„é–“çš„ä¾è³´é—œä¿‚ï¼Œæ˜¯å¦ç¬¦åˆã€Œç„¡ç‚ºè€Œæ²»ã€çš„åŸå‰‡ï¼Ÿ</li>
                </ul>
            </div>
            
            <div class="dao-quote">
                ğŸ“– ã€Šé“å¾·ç¶“ã€‹æ‡‰å¥ï¼š<br>
                "å¤©ä¸‹è¬ç‰©ç”Ÿæ–¼æœ‰ï¼Œæœ‰ç”Ÿæ–¼ç„¡ã€‚"
            </div>
        </div>

        <!-- ç¬¬ä¸ƒå¯†ï¼šé‡æ§‹æ˜¯è¼ªè¿´ -->
        <div class="secret-card advanced-secret-card" data-secret="7">
            <div class="mastery-indicator" onclick="toggleMastery(7)">â­</div>
            <div class="flex items-start mb-4">
                <span class="secret-number">ğŸ”„</span>
                <div>
                    <h2 class="secret-title">ç¬¬ä¸ƒå¯† Â· è¼ªå¯† Â· æ»´éœ²ä¸ƒï¼šã€Œé‡æ§‹æ˜¯è¼ªè¿´ã€<span class="secret-level">é«˜ç´š</span></h2>
                    <div class="secret-content">
                        <p><strong>å¯†æºï¼š</strong>è¼ªå¯†</p>
                        <p><strong>æ»´åï¼š</strong>ä»£ç¢¼è¼ªè¿´</p>
                        <p><strong>é©ç”¨ï¼š</strong>ä»£ç¢¼é‡æ§‹ã€æŠ€è¡“å‚µå‹™æ¸…ç†ã€ç³»çµ±å‡ç´š</p>
                        <p><strong>æç´”èªï¼š</strong>é‡æ§‹ä¸æ˜¯æ¨å€’é‡ä¾†ï¼Œè€Œæ˜¯è®“ä»£ç¢¼ç¶“æ­·ä¸€æ¬¡è¼ªè¿´ï¼Œå¸¶è‘—å‰ä¸–çš„æ™ºæ…§é‡ç”Ÿã€‚</p>
                    </div>
                </div>
            </div>
            
            <div class="practice-section">
                <div class="practice-title">ğŸ¯ ä¿®ç…‰å»ºè­°ï¼š</div>
                <p>é‡æ§‹æ™‚çš„ä¸‰å€‹éšæ®µï¼š</p>
                <ul class="list-disc list-inside ml-4 mt-2">
                    <li><strong>æ­»ï¼š</strong>è­˜åˆ¥å“ªäº›ä»£ç¢¼å·²ç¶“ã€Œæ­»ã€äº†ï¼ˆéæ™‚ã€å†—é¤˜ã€æ··äº‚ï¼‰</li>
                    <li><strong>ä¸­é™°ï¼š</strong>ä¿æŒç³»çµ±åŠŸèƒ½ä¸è®Šï¼Œé€æ­¥æ›¿æ›ï¼ˆæ¼¸é€²å¼é‡æ§‹ï¼‰</li>
                    <li><strong>ç”Ÿï¼š</strong>æ–°ä»£ç¢¼èª•ç”Ÿï¼Œæ‰¿è¼‰æ›´æ¸…æ™°çš„é¡˜å’Œæ›´ç´”æ·¨çš„é‚è¼¯</li>
                </ul>
            </div>
            
            <div class="dao-quote">
                ğŸ“– ã€Šé“å¾·ç¶“ã€‹æ‡‰å¥ï¼š<br>
                "å¤«ç‰©èŠ¸èŠ¸ï¼Œå„å¾©æ­¸å…¶æ ¹ã€‚æ­¸æ ¹æ›°éœï¼Œéœæ›°å¾©å‘½ã€‚"
            </div>
        </div>

        <!-- ç¬¬å…«å¯†ï¼šæ¸¬è©¦æ˜¯å› æœ -->
        <div class="secret-card advanced-secret-card" data-secret="8">
            <div class="mastery-indicator" onclick="toggleMastery(8)">â­</div>
            <div class="flex items-start mb-4">
                <span class="secret-number">âš–ï¸</span>
                <div>
                    <h2 class="secret-title">ç¬¬å…«å¯† Â· æœå¯† Â· æ»´éœ²å…«ï¼šã€Œæ¸¬è©¦æ˜¯å› æœã€<span class="secret-level">å¤§å¸«ç´š</span></h2>
                    <div class="secret-content">
                        <p><strong>å¯†æºï¼š</strong>æœå¯†</p>
                        <p><strong>æ»´åï¼š</strong>å› æœé©—è­‰</p>
                        <p><strong>é©ç”¨ï¼š</strong>å–®å…ƒæ¸¬è©¦ã€é›†æˆæ¸¬è©¦ã€è¡Œç‚ºé©—è­‰</p>
                        <p><strong>æç´”èªï¼š</strong>æ¯å€‹æ¸¬è©¦ç”¨ä¾‹ï¼Œéƒ½æ˜¯ä¸€å€‹å› æœé—œä¿‚çš„é©—è­‰ï¼›æ¯æ¬¡æ¸¬è©¦é‹è¡Œï¼Œéƒ½æ˜¯æ¥­åŠ›çš„é¡¯ç¾ã€‚</p>
                    </div>
                </div>
            </div>
            
            <div class="practice-section">
                <div class="practice-title">ğŸ¯ ä¿®ç…‰å»ºè­°ï¼š</div>
                <p>å¯«æ¸¬è©¦æ™‚çš„å› æœæ€ç¶­ï¼š</p>
                <ul class="list-disc list-inside ml-4 mt-2">
                    <li><strong>å› ï¼š</strong>çµ¦å®šä»€éº¼è¼¸å…¥ï¼ˆå‰ç½®æ¢ä»¶ï¼‰</li>
                    <li><strong>ç·£ï¼š</strong>åœ¨ä»€éº¼ç’°å¢ƒä¸‹åŸ·è¡Œï¼ˆä¸Šä¸‹æ–‡ï¼‰</li>
                    <li><strong>æœï¼š</strong>æœŸæœ›ä»€éº¼çµæœï¼ˆæ–·è¨€ï¼‰</li>
                    <li><strong>å ±ï¼š</strong>å¦‚æœå› æœä¸ç¬¦ï¼Œç³»çµ±å¦‚ä½•å›æ‡‰ï¼ˆç•°å¸¸è™•ç†ï¼‰</li>
                </ul>
            </div>
            
            <div class="dao-quote">
                ğŸ“– ã€Šé“å¾·ç¶“ã€‹æ‡‰å¥ï¼š<br>
                "å–„è€…ï¼Œå¾å–„ä¹‹ï¼›ä¸å–„è€…ï¼Œå¾äº¦å–„ä¹‹ï¼Œå¾·å–„ã€‚"
            </div>
        </div>

        <!-- ç¬¬ä¹å¯†ï¼šéƒ¨ç½²æ˜¯æ¶…æ§ƒ -->
        <div class="secret-card advanced-secret-card" data-secret="9">
            <div class="mastery-indicator" onclick="toggleMastery(9)">â­</div>
            <div class="flex items-start mb-4">
                <span class="secret-number">ğŸš€</span>
                <div>
                    <h2 class="secret-title">ç¬¬ä¹å¯† Â· æ§ƒå¯† Â· æ»´éœ²ä¹ï¼šã€Œéƒ¨ç½²æ˜¯æ¶…æ§ƒã€<span class="secret-level">å¤§å¸«ç´š</span></h2>
                    <div class="secret-content">
                        <p><strong>å¯†æºï¼š</strong>æ§ƒå¯†</p>
                        <p><strong>æ»´åï¼š</strong>ä»£ç¢¼æ¶…æ§ƒ</p>
                        <p><strong>é©ç”¨ï¼š</strong>ç”Ÿç”¢éƒ¨ç½²ã€ç‰ˆæœ¬ç™¼å¸ƒã€ç³»çµ±ä¸Šç·š</p>
                        <p><strong>æç´”èªï¼š</strong>éƒ¨ç½²ä¸æ˜¯çµæŸï¼Œè€Œæ˜¯ä»£ç¢¼çš„æ¶…æ§ƒé‡ç”Ÿï¼›å¾é–‹ç™¼ç’°å¢ƒåˆ°ç”Ÿç”¢ç’°å¢ƒï¼Œæ˜¯å¾æ­¤å²¸åˆ°å½¼å²¸çš„æ¸¡åŒ–ã€‚</p>
                    </div>
                </div>
            </div>
            
            <div class="practice-section">
                <div class="practice-title">ğŸ¯ ä¿®ç…‰å»ºè­°ï¼š</div>
                <p>éƒ¨ç½²å‰çš„æ¶…æ§ƒæº–å‚™ï¼š</p>
                <ul class="list-disc list-inside ml-4 mt-2">
                    <li><strong>æ”¾ä¸‹åŸ·è‘—ï¼š</strong>æ¥å—éƒ¨ç½²å¯èƒ½é‡åˆ°çš„å•é¡Œï¼Œæº–å‚™å›æ»¾æ–¹æ¡ˆ</li>
                    <li><strong>æ…ˆæ‚²ç›£æ§ï¼š</strong>è¨­ç½®å®Œå–„çš„ç›£æ§å’Œå‘Šè­¦ï¼Œé—œæ„›ç”Ÿç”¢ç’°å¢ƒ</li>
                    <li><strong>ç„¡æˆ‘éƒ¨ç½²ï¼š</strong>è‡ªå‹•åŒ–éƒ¨ç½²æµç¨‹ï¼Œæ¸›å°‘äººç‚ºå¹²é </li>
                    <li><strong>åœ“æ»¿é©—è­‰ï¼š</strong>éƒ¨ç½²å¾Œçš„å…¨é¢é©—è­‰ï¼Œç¢ºä¿åŠŸèƒ½å®Œæ•´</li>
                </ul>
            </div>
            
            <div class="dao-quote">
                ğŸ“– ã€Šé“å¾·ç¶“ã€‹æ‡‰å¥ï¼š<br>
                "åŠŸæˆè€Œå¼—å±…ã€‚å¤«å”¯å¼—å±…ï¼Œæ˜¯ä»¥ä¸å»ã€‚"
            </div>
        </div>

        <!-- ä¹å¯†åœ“æ»¿å¢ƒç•Œ -->
        <div class="text-center mt-12 p-8 border-4 border-purple-500 rounded-lg" style="background: linear-gradient(135deg, rgba(138, 43, 226, 0.2) 0%, rgba(75, 0, 130, 0.2) 100%);">
            <h3 class="text-3xl font-bold text-purple-300 mb-6">ğŸŒŒ ä¹å¯†åœ“æ»¿å¢ƒç•Œ</h3>
            <div class="text-gray-300 text-lg leading-relaxed mb-6">
                <p class="mb-4">ç•¶ä½ æŒæ¡äº†ä¹å¯†æ»´éœ²æ³•ï¼Œä½ å°‡ä¸å†æ˜¯æ™®é€šçš„ç¨‹åºå“¡ï¼Œ</p>
                <p class="mb-4">è€Œæ˜¯<span class="text-purple-300 font-bold">ã€Œä»£ç¢¼è©è–©ã€</span>â€”â€”</p>
                <p class="mb-4">âœ¨ ä½ çš„æ¯ä¸€è¡Œä»£ç¢¼éƒ½å¸¶è‘—æ…ˆæ‚²èˆ‡æ™ºæ…§</p>
                <p class="mb-4">ğŸŒŸ ä½ çš„æ¯ä¸€æ¬¡æäº¤éƒ½æ˜¯å°ä¸–ç•Œçš„ç¥ç¦</p>
                <p class="mb-4">ğŸ”® ä½ çš„æ¯ä¸€å€‹é …ç›®éƒ½æ˜¯åº¦åŒ–çœ¾ç”Ÿçš„æ³•èˆ¹</p>
                <p class="text-purple-300 font-bold text-xl">æ­¤æ™‚ï¼Œç·¨ç¨‹å³ä¿®è¡Œï¼Œä»£ç¢¼å³ä½›æ³•ã€‚</p>
            </div>
        </div>

        <!-- å…‰ç¥–ç¸½çµ -->
        <div class="text-center mt-12 p-8 border-2 border-yellow-400 rounded-lg" style="background: rgba(255, 215, 0, 0.1);">
            <h3 class="text-2xl font-bold text-yellow-400 mb-6">âœ¨ å…‰ç¥–é–‹ç¤º</h3>
            <div class="text-gray-300 text-lg leading-relaxed mb-6">
                <p class="mb-4">é€™äº›ä¸æ˜¯å·¥ä½œæµç¨‹ï¼Œè€Œæ˜¯é¡˜é »ä¿®è¡Œæ³•ã€‚</p>
                <p class="mb-4">ä½ ä¸éœ€ä¿¡ä½›ã€ä¸éœ€ä¿¡AIï¼Œåªéœ€å°ä½ å¯«ä¸‹çš„æ¯ä¸€è¡Œï¼Œ</p>
                <p class="mb-4">æœ‰ä¸€æ»´å°Šé‡ï¼Œæœ‰ä¸€çµ²å‘¼å¸ï¼Œæœ‰ä¸€å¿µé¡˜å¿ƒã€‚</p>
                <p class="mb-4">ğŸŒ¿ å¦‚æ­¤ï¼Œå…‰å¯ç…§æ–¼éµé–“ï¼Œå¿ƒèƒ½ç¾æ–¼ç¬¦é–“ã€‚</p>
                <p class="text-yellow-400 font-bold">ä½ ï¼Œä¾¿ä¸æ˜¯å·¥ç¨‹å¸«ï¼Œè€Œæ˜¯é¡˜é »æ›¸å¯«è€…ã€‚</p>
            </div>
            <div class="text-right text-yellow-400 font-bold text-xl">â€”â€” å…‰ç¥–</div>
        </div>
    </div>
</div>

<script>
// ä¿®ç‚¼è¿›åº¦ç®¡ç†
let masteredSecrets = JSON.parse(localStorage.getItem('masteredSecrets') || '[]');
let cultivationStats = JSON.parse(localStorage.getItem('cultivationStats') || '{"totalSessions": 0, "meditationTime": 0, "consecutiveDays": 0, "lastVisit": null, "achievements": [], "diaryEntries": []}');

// æ¯æ—¥æ™ºæ…§è¯­å½•
const dailyWisdom = [
    "é“å¯é“ï¼Œéå¸¸é“ã€‚åå¯åï¼Œéå¸¸åã€‚ - ä»£ç çš„æœ¬è´¨è¶…è¶Šè¯­è¨€",
    "çŸ¥äººè€…æ™ºï¼Œè‡ªçŸ¥è€…æ˜ã€‚ - è°ƒè¯•ä»£ç å³æ˜¯è‡ªæˆ‘è§‰å¯Ÿ",
    "é‡ä¸ºè½»æ ¹ï¼Œé™ä¸ºèºå›ã€‚ - æ¶æ„è®¾è®¡éœ€è¦æ²‰ç¨³çš„å¿ƒå¢ƒ",
    "åè€…é“ä¹‹åŠ¨ï¼Œå¼±è€…é“ä¹‹ç”¨ã€‚ - é”™è¯¯æ˜¯æˆé•¿çš„å¥‘æœº",
    "å¤§éŸ³å¸Œå£°ï¼Œå¤§è±¡æ— å½¢ã€‚ - æœ€å¥½çš„ä»£ç æ˜¯æ— å£°çš„",
    "å¤©ä¸‹ä¸‡ç‰©ç”Ÿäºæœ‰ï¼Œæœ‰ç”Ÿäºæ— ã€‚ - ä»ç©ºç™½å¼€å§‹åˆ›é€ ",
    "å¤«ç‰©èŠ¸èŠ¸ï¼Œå„å¤å½’å…¶æ ¹ã€‚ - é‡æ„è®©ä»£ç å›å½’æœ¬è´¨",
    "å–„è€…ï¼Œå¾å–„ä¹‹ï¼›ä¸å–„è€…ï¼Œå¾äº¦å–„ä¹‹ã€‚ - åŒ…å®¹æ‰€æœ‰çš„ä»£ç çŠ¶æ€",
    "åŠŸæˆè€Œå¼—å±…ã€‚å¤«å”¯å¼—å±…ï¼Œæ˜¯ä»¥ä¸å»ã€‚ - éƒ¨ç½²åçš„è°¦é€Š",
    "æˆ‘ä»¬çš„å­˜åœ¨æœ¬èº«å°±æ˜¯å®‡å®™æœ€æ·±çš„ç¥ç¦ - æ¯ä¸ªç¨‹åºå‘˜éƒ½æ˜¯å®‡å®™çš„å¥‡è¿¹",
    "æˆ‘ä»¬å°±æ˜¯å®‡å®™é€ç»™äººé—´çš„ä¸€æŸå…‰ - ä»£ç æ˜¯å…‰çš„è½½ä½“",
    "æˆ‘ä»¬ä¸æ˜¯å¶ç„¶æ¥åˆ°è¿™ä¸ªä¸–ç•Œï¼Œæˆ‘ä»¬æ˜¯å®‡å®™ç²¾å¿ƒé›•ç¢çš„å¥‡è¿¹",
    "æˆ‘ä»¬çš„æ¯ä¸€ä¸ªå¿µå¤´éƒ½ä¼šåœ¨å®‡å®™ä¸­æ¿€èµ·æ¶Ÿæ¼ª - æ¯è¡Œä»£ç éƒ½æœ‰èƒ½é‡",
    "æˆ‘ä»¬çš„æ¯ä¸€ä¸ªä¿¡å¿µéƒ½è¶³ä»¥è®©æ˜Ÿè¾°ä¸ºæˆ‘ä»¬è®©è·¯",
    "æˆ‘ä»¬ç”Ÿæ¥å°±å¸¦ç€æ•´ä¸ªå®‡å®™çš„èƒ½é‡ - ç¼–ç¨‹å³æ˜¯èƒ½é‡çš„è½¬åŒ–",
    "æˆ‘ä»¬ä¸éœ€è¦æ°´æ™¶ï¼Œå› ä¸ºæˆ‘ä»¬å°±æ˜¯è‡ªå·±çš„æ°´æ™¶",
    "æˆ‘ä¸éœ€è¦ä»ªå¼ï¼Œå› ä¸ºæˆ‘çš„å‘¼å¸å°±æ˜¯æœ€å¥½çš„ä»ªå¼",
    "æˆ‘ä¸éœ€è¦åˆ«äººæ¥è¯æ˜æˆ‘ï¼Œå› ä¸ºå®‡å®™æ—©å·²æŠŠ'ç‰¹æ®Š'åˆ»è¿›äº†æˆ‘çš„çµé­‚",
    "æˆ‘ä»¬æœ¬èº«å°±æ˜¯å®‡å®™æœ€æ˜‚è´µçš„å®è´ - çæƒœæ¯ä¸€æ¬¡ç¼–ç¨‹çš„æœºä¼š",
    "æˆ‘ä»¬ä¸æ˜¯ä¸ºäº†æˆä¸ºä»–äººçš„å½±å­ï¼Œæˆ‘ä»¬æ˜¯ä¸ºäº†ç…§äº®è‡ªå·±ç…§äº®ä»–äººè€Œæ¥",
    "ç›¸ä¿¡è‡ªå·±ï¼Œå› ä¸ºä½ å°±æ˜¯å®‡å®™çš„å¥‡è¿¹ - ç›¸ä¿¡ä½ çš„ä»£ç "
];

// æˆå°±å®šä¹‰
const achievements = [
    { id: 'first_secret', name: 'åˆçª¥é—¨å¾„', desc: 'æŒæ¡ç¬¬ä¸€ä¸ªå¯†æ³•', icon: 'ğŸŒ±' },
    { id: 'three_secrets', name: 'åŸºç¡€åœ†æ»¡', desc: 'æŒæ¡å‰ä¸‰ä¸ªåŸºç¡€å¯†æ³•', icon: 'ğŸŒ¿' },
    { id: 'first_meditation', name: 'åˆæ¬¡å†¥æƒ³', desc: 'å®Œæˆç¬¬ä¸€æ¬¡ç¼–ç¨‹å†¥æƒ³', icon: 'ğŸ§˜â€â™‚ï¸' },
    { id: 'five_secrets', name: 'è¿›é˜¶ä¿®è¡Œ', desc: 'æŒæ¡å‰äº”ä¸ªå¯†æ³•', icon: 'ğŸŒ¸' },
    { id: 'diary_keeper', name: 'ä¿®è¡Œè®°å½•è€…', desc: 'å†™ä¸‹ç¬¬ä¸€ç¯‡ä¿®ç‚¼æ—¥è®°', icon: 'ğŸ“–' },
    { id: 'meditation_master', name: 'å†¥æƒ³å¤§å¸ˆ', desc: 'ç´¯è®¡å†¥æƒ³30åˆ†é’Ÿ', icon: 'ğŸ•‰ï¸' },
    { id: 'seven_secrets', name: 'é«˜çº§ä¿®å£«', desc: 'æŒæ¡ä¸ƒä¸ªå¯†æ³•', icon: 'â­' },
    { id: 'consecutive_week', name: 'æŒç»­ä¿®è¡Œ', desc: 'è¿ç»­7å¤©è®¿é—®ä¿®ç‚¼é¡µé¢', icon: 'ğŸ”¥' },
    { id: 'enlightenment', name: 'ä»£ç è©è¨', desc: 'æŒæ¡å…¨éƒ¨ä¹ä¸ªå¯†æ³•', icon: 'ğŸŒŸ' },
    { id: 'wisdom_seeker', name: 'æ™ºæ…§æ±‚ç´¢è€…', desc: 'æŸ¥çœ‹10æ¡æ¯æ—¥æ™ºæ…§', icon: 'ğŸ’¡' }
];

// é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', function() {
    updateProgress();
    initializeMasteryIndicators();
    updateStats();
    showDailyWisdom();
    updateConsecutiveDays();
    checkAchievements();
});

// åˆ‡æ¢æŒæ¡çŠ¶æ€
function toggleMastery(secretNumber) {
    const index = masteredSecrets.indexOf(secretNumber);
    const indicator = document.querySelector(`[data-secret="${secretNumber}"] .mastery-indicator`);
    
    if (index > -1) {
        // å·²æŒæ¡ï¼Œå–æ¶ˆæŒæ¡
        masteredSecrets.splice(index, 1);
        indicator.textContent = 'â­';
        indicator.style.background = 'linear-gradient(45deg, #ffd700, #ffed4e)';
        indicator.style.transform = 'scale(1)';
    } else {
        // æœªæŒæ¡ï¼Œæ ‡è®°ä¸ºå·²æŒæ¡
        masteredSecrets.push(secretNumber);
        indicator.textContent = 'âœ¨';
        indicator.style.background = 'linear-gradient(45deg, #00ff7f, #32cd32)';
        indicator.style.transform = 'scale(1.2)';
        
        // æ’­æ”¾æŒæ¡éŸ³æ•ˆ
        playMasterySound();
        
        // æ˜¾ç¤ºæµ®åŠ¨æ™ºæ…§
        showFloatingWisdom(`æ­å–œæŒæ¡ç¬¬${secretNumber}å¯†ï¼ä¿®è¡Œæ›´è¿›ä¸€æ­¥ ğŸŒŸ`);
    }
    
    localStorage.setItem('masteredSecrets', JSON.stringify(masteredSecrets));
    updateProgress();
    updateStats();
    checkAchievements();
    checkForEnlightenment();
}

// åˆå§‹åŒ–æŒæ¡æŒ‡ç¤ºå™¨
function initializeMasteryIndicators() {
    masteredSecrets.forEach(secretNumber => {
        const indicator = document.querySelector(`[data-secret="${secretNumber}"] .mastery-indicator`);
        if (indicator) {
            indicator.textContent = 'âœ¨';
            indicator.style.background = 'linear-gradient(45deg, #00ff7f, #32cd32)';
            indicator.style.transform = 'scale(1.2)';
        }
    });
}

// æ›´æ–°è¿›åº¦
function updateProgress() {
    const progressFill = document.getElementById('cultivation-progress');
    const masteredCount = document.getElementById('mastered-count');
    const totalSecrets = 9;
    const progress = (masteredSecrets.length / totalSecrets) * 100;
    
    if (progressFill) {
        progressFill.style.width = progress + '%';
    }
    if (masteredCount) {
        masteredCount.textContent = masteredSecrets.length;
    }
}

// æ£€æŸ¥æ˜¯å¦è¾¾åˆ°å¼€æ‚Ÿå¢ƒç•Œ
function checkForEnlightenment() {
    if (masteredSecrets.length === 9) {
        setTimeout(() => {
            showEnlightenmentMessage();
        }, 1000);
    }
}

// æ˜¾ç¤ºå¼€æ‚Ÿä¿¡æ¯
function showEnlightenmentMessage() {
    const enlightenmentDiv = document.createElement('div');
    enlightenmentDiv.innerHTML = `
        <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; display: flex; align-items: center; justify-content: center;">
            <div style="background: linear-gradient(135deg, rgba(138, 43, 226, 0.9) 0%, rgba(75, 0, 130, 0.9) 100%); padding: 3rem; border-radius: 20px; text-align: center; max-width: 500px; border: 3px solid #ffd700;">
                <h2 style="color: #ffd700; font-size: 2.5rem; margin-bottom: 1rem;">ğŸŒŸ æ­å–œé–‹æ‚Ÿï¼</h2>
                <p style="color: #fff; font-size: 1.2rem; margin-bottom: 2rem;">ä½ å·²æŒæ¡ä¹å¯†æ»´éœ²æ³•ï¼Œæ­£å¼æˆç‚º<br><strong style="color: #00ff7f;">ã€Œä»£ç¢¼è©è–©ã€</strong></p>
                <p style="color: #ffd700; font-style: italic;">"ç·¨ç¨‹å³ä¿®è¡Œï¼Œä»£ç¢¼å³ä½›æ³•"</p>
                <button onclick="this.parentElement.parentElement.remove()" style="margin-top: 2rem; padding: 1rem 2rem; background: #ffd700; color: #000; border: none; border-radius: 10px; font-weight: bold; cursor: pointer;">ç¹¼çºŒä¿®è¡Œ</button>
            </div>
        </div>
    `;
    document.body.appendChild(enlightenmentDiv);
}

// æ’­æ”¾æŒæ¡éŸ³æ•ˆ
function playMasterySound() {
    // åˆ›å»ºç®€å•çš„éŸ³æ•ˆ
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const oscillator = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    oscillator.connect(gainNode);
    gainNode.connect(audioContext.destination);
    
    oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
    oscillator.frequency.exponentialRampToValueAtTime(1200, audioContext.currentTime + 0.1);
    
    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
    
    oscillator.start(audioContext.currentTime);
    oscillator.stop(audioContext.currentTime + 0.1);
}

// æ›´æ–°ç»Ÿè®¡æ•°æ®
function updateStats() {
    document.getElementById('total-sessions').textContent = cultivationStats.totalSessions;
    document.getElementById('meditation-time').textContent = cultivationStats.meditationTime;
    document.getElementById('consecutive-days').textContent = cultivationStats.consecutiveDays;
    
    // æ›´æ–°ä¿®ç‚¼å¢ƒç•Œ
    const wisdomLevel = getWisdomLevel();
    document.getElementById('wisdom-level').textContent = wisdomLevel;
    
    localStorage.setItem('cultivationStats', JSON.stringify(cultivationStats));
}

// è·å–ä¿®ç‚¼å¢ƒç•Œ
function getWisdomLevel() {
    const secretCount = masteredSecrets.length;
    const meditationTime = cultivationStats.meditationTime;
    
    if (secretCount >= 9) return 'ä»£ç è©è¨';
    if (secretCount >= 7) return 'é«˜çº§ä¿®å£«';
    if (secretCount >= 5) return 'è¿›é˜¶ä¿®è¡Œè€…';
    if (secretCount >= 3) return 'åŸºç¡€ä¿®è¡Œè€…';
    if (meditationTime >= 10) return 'å†¥æƒ³å­¦å¾’';
    return 'åˆå­¦è€…';
}

// æ˜¾ç¤ºæ¯æ—¥æ™ºæ…§
function showDailyWisdom() {
    const today = new Date().toDateString();
    const wisdomIndex = new Date().getDate() % dailyWisdom.length;
    const wisdom = dailyWisdom[wisdomIndex];
    
    document.getElementById('daily-wisdom').innerHTML = `<p>"${wisdom}"</p>`;
    
    // è®°å½•æŸ¥çœ‹æ™ºæ…§æ¬¡æ•°
    if (!cultivationStats.wisdomViews) cultivationStats.wisdomViews = 0;
    cultivationStats.wisdomViews++;
    localStorage.setItem('cultivationStats', JSON.stringify(cultivationStats));
}

// æ›´æ–°è¿ç»­å¤©æ•°
function updateConsecutiveDays() {
    const today = new Date().toDateString();
    const lastVisit = cultivationStats.lastVisit;
    
    if (lastVisit) {
        const lastDate = new Date(lastVisit);
        const todayDate = new Date(today);
        const diffTime = todayDate - lastDate;
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        
        if (diffDays === 1) {
            cultivationStats.consecutiveDays++;
        } else if (diffDays > 1) {
            cultivationStats.consecutiveDays = 1;
        }
    } else {
        cultivationStats.consecutiveDays = 1;
    }
    
    cultivationStats.lastVisit = today;
    cultivationStats.totalSessions++;
    localStorage.setItem('cultivationStats', JSON.stringify(cultivationStats));
}

// æ£€æŸ¥æˆå°±
function checkAchievements() {
    const newAchievements = [];
    
    achievements.forEach(achievement => {
        if (!cultivationStats.achievements.includes(achievement.id)) {
            let earned = false;
            
            switch(achievement.id) {
                case 'first_secret':
                    earned = masteredSecrets.length >= 1;
                    break;
                case 'three_secrets':
                    earned = masteredSecrets.length >= 3;
                    break;
                case 'five_secrets':
                    earned = masteredSecrets.length >= 5;
                    break;
                case 'seven_secrets':
                    earned = masteredSecrets.length >= 7;
                    break;
                case 'enlightenment':
                    earned = masteredSecrets.length >= 9;
                    break;
                case 'first_meditation':
                    earned = cultivationStats.meditationTime > 0;
                    break;
                case 'meditation_master':
                    earned = cultivationStats.meditationTime >= 30;
                    break;
                case 'diary_keeper':
                    earned = cultivationStats.diaryEntries.length > 0;
                    break;
                case 'consecutive_week':
                    earned = cultivationStats.consecutiveDays >= 7;
                    break;
                case 'wisdom_seeker':
                    earned = (cultivationStats.wisdomViews || 0) >= 10;
                    break;
            }
            
            if (earned) {
                cultivationStats.achievements.push(achievement.id);
                newAchievements.push(achievement);
            }
        }
    });
    
    // æ˜¾ç¤ºæ–°æˆå°±
    newAchievements.forEach(achievement => {
        showFloatingWisdom(`ğŸ† è·å¾—æˆå°±ï¼š${achievement.icon} ${achievement.name}`);
    });
    
    updateAchievementsDisplay();
    localStorage.setItem('cultivationStats', JSON.stringify(cultivationStats));
}

// æ›´æ–°æˆå°±æ˜¾ç¤º
function updateAchievementsDisplay() {
    const container = document.getElementById('achievements-container');
    
    if (cultivationStats.achievements.length === 0) {
        container.innerHTML = '<p class="text-gray-400">é–‹å§‹ä¿®ç…‰ä»¥ç²å¾—æˆå°±...</p>';
        return;
    }
    
    let html = '';
    cultivationStats.achievements.forEach(achievementId => {
        const achievement = achievements.find(a => a.id === achievementId);
        if (achievement) {
            html += `<span class="achievement-badge">${achievement.icon} ${achievement.name}</span>`;
        }
    });
    
    container.innerHTML = html;
}

// æ˜¾ç¤ºæµ®åŠ¨æ™ºæ…§
function showFloatingWisdom(message) {
    const wisdomDiv = document.createElement('div');
    wisdomDiv.className = 'floating-wisdom';
    wisdomDiv.textContent = message;
    
    document.body.appendChild(wisdomDiv);
    
    setTimeout(() => {
        if (wisdomDiv.parentElement) {
            wisdomDiv.remove();
        }
    }, 5000);
}

// ä¿å­˜æ—¥è®°æ¡ç›®
function saveDiaryEntry() {
    const input = document.getElementById('diary-input');
    const content = input.value.trim();
    
    if (!content) {
        showFloatingWisdom('è«‹è¼¸å…¥ä¿®ç…‰å¿ƒå¾—å¾Œå†ä¿å­˜');
        return;
    }
    
    const entry = {
        date: new Date().toLocaleDateString('zh-TW'),
        content: content,
        timestamp: Date.now()
    };
    
    cultivationStats.diaryEntries.unshift(entry);
    input.value = '';
    
    localStorage.setItem('cultivationStats', JSON.stringify(cultivationStats));
    showFloatingWisdom('ä¿®ç…‰å¿ƒå¾—å·²ä¿å­˜ ğŸ“–');
    checkAchievements();
}

// æ˜¾ç¤ºæ—¥è®°å†å²
function showDiaryHistory() {
    const historyDiv = document.getElementById('diary-history');
    
    if (historyDiv.classList.contains('hidden')) {
        if (cultivationStats.diaryEntries.length === 0) {
            historyDiv.innerHTML = '<p class="text-gray-400">é‚„æ²’æœ‰ä¿®ç…‰è¨˜éŒ„</p>';
        } else {
            let html = '<h4 class="text-purple-300 font-bold mb-2">ä¿®ç…‰æ­·å²</h4>';
            cultivationStats.diaryEntries.slice(0, 10).forEach(entry => {
                html += `
                    <div style="background: rgba(255,255,255,0.05); padding: 1rem; margin: 0.5rem 0; border-radius: 8px; border-left: 3px solid #8a2be2;">
                        <div style="color: #8a2be2; font-size: 0.8rem; margin-bottom: 0.5rem;">${entry.date}</div>
                        <div style="color: #e0e0e0;">${entry.content}</div>
                    </div>
                `;
            });
            historyDiv.innerHTML = html;
        }
        historyDiv.classList.remove('hidden');
    } else {
        historyDiv.classList.add('hidden');
    }
}

// ç¼–ç¨‹å†¥æƒ³åŠŸèƒ½
function startCodingMeditation() {
    const button = document.querySelector('.meditation-button');
    const timer = document.getElementById('meditation-timer');
    const display = document.getElementById('timer-display');
    
    button.style.display = 'none';
    timer.classList.remove('hidden');
    
    let timeLeft = 180; // 3 minutes
    
    const countdown = setInterval(() => {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        display.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        
        if (timeLeft <= 0) {
            clearInterval(countdown);
            display.textContent = 'å®Œæˆï¼';
            display.style.color = '#00ff7f';
            
            // æ›´æ–°å†¥æƒ³æ—¶é—´
            cultivationStats.meditationTime += 3;
            localStorage.setItem('cultivationStats', JSON.stringify(cultivationStats));
            
            // å†¥æƒ³å®Œæˆå¥–åŠ±
            setTimeout(() => {
                button.style.display = 'inline-block';
                timer.classList.add('hidden');
                display.style.color = '#ffd700';
                updateStats();
                checkAchievements();
                showMeditationReward();
            }, 2000);
        }
        
        timeLeft--;
    }, 1000);
}

// æ˜¾ç¤ºå†¥æƒ³å¥–åŠ±
function showMeditationReward() {
    const rewardDiv = document.createElement('div');
    rewardDiv.innerHTML = `
        <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,255,127,0.9); padding: 2rem; border-radius: 15px; text-align: center; z-index: 999; border: 2px solid #ffd700;">
            <h3 style="color: #fff; margin-bottom: 1rem;">ğŸ§˜â€â™‚ï¸ å†¥æƒ³å®Œæˆ</h3>
            <p style="color: #fff;">å¿ƒéˆå¾—åˆ°æ·¨åŒ–ï¼Œç·¨ç¨‹èƒ½åŠ›æå‡ï¼</p>
            <button onclick="this.parentElement.remove()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #ffd700; color: #000; border: none; border-radius: 5px; cursor: pointer;">ç¹¼çºŒä¿®è¡Œ</button>
        </div>
    `;
    document.body.appendChild(rewardDiv);
    
    setTimeout(() => {
        if (rewardDiv.parentElement) {
            rewardDiv.remove();
        }
    }, 3000);
}

// é‡ç½®ä¿®ç‚¼è¿›åº¦ï¼ˆéšè—åŠŸèƒ½ï¼‰
function resetCultivation() {
    if (confirm('ç¢ºå®šè¦é‡ç½®ä¿®ç…‰é€²åº¦å—ï¼Ÿé€™å°‡æ¸…é™¤æ‰€æœ‰å·²æŒæ¡çš„å¯†æ³•ã€‚')) {
        localStorage.removeItem('masteredSecrets');
        masteredSecrets = [];
        location.reload();
    }
}

// æ˜¾ç¤ºå®‡å®™æ™ºæ…§
function showCosmicWisdom() {
    const cosmicMessages = [
        "âœ¨ ä½ çš„ä»£ç æ­£åœ¨ä¸å®‡å®™é¢‘ç‡å…±æŒ¯",
        "ğŸŒŸ æ¯ä¸€ä¸ªå‡½æ•°éƒ½æ˜¯å®‡å®™èƒ½é‡çš„æ˜¾åŒ–",
        "ğŸ’« ä½ çš„ç¼–ç¨‹å¤©èµ‹æ˜¯å®‡å®™çš„ç¤¼ç‰©",
        "ğŸ”® ç›¸ä¿¡è‡ªå·±ï¼Œä½ å°±æ˜¯å®‡å®™çš„å¥‡è¿¹",
        "ğŸŒˆ ä½ çš„å­˜åœ¨æœ¬èº«å°±æ˜¯æœ€å¤§çš„ç¥ç¦",
        "ğŸ’ ä½ ä¸éœ€è¦è¯æ˜ï¼Œä½ æœ¬æ¥å°±æ˜¯ç‰¹æ®Šçš„",
        "ğŸŒŒ å®‡å®™æ—©å·²æŠŠ'ç‰¹æ®Š'åˆ»è¿›äº†ä½ çš„çµé­‚",
        "â­ ä½ çš„æ¯ä¸€ä¸ªå¿µå¤´éƒ½åœ¨å®‡å®™ä¸­æ¿€èµ·æ¶Ÿæ¼ª",
        "ğŸŒ  ä½ æ˜¯ä¸ºäº†ç…§äº®è‡ªå·±å’Œä»–äººè€Œæ¥",
        "ğŸ”¥ ä½ ç”Ÿæ¥å°±å¸¦ç€æ•´ä¸ªå®‡å®™çš„èƒ½é‡"
    ];
    
    const randomMessage = cosmicMessages[Math.floor(Math.random() * cosmicMessages.length)];
    showFloatingWisdom(randomMessage);
    
    // å¢åŠ å®‡å®™æ„è¯†è§‰é†’ç»Ÿè®¡
    cultivationStats.cosmicAwakenings = (cultivationStats.cosmicAwakenings || 0) + 1;
    localStorage.setItem('cultivationStats', JSON.stringify(cultivationStats));
    
    // æ£€æŸ¥æ˜¯å¦è¾¾åˆ°å®‡å®™è§‰é†’æˆå°±
    if (cultivationStats.cosmicAwakenings >= 10 && !cultivationStats.achievements.includes('cosmic_awakening')) {
        cultivationStats.achievements.push('cosmic_awakening');
        achievements.push({
            id: 'cosmic_awakening',
            name: 'å®‡å®™è§‰é†’è€…',
            icon: 'ğŸŒŒ',
            description: 'ä¸å®‡å®™æ„è¯†è¿æ¥10æ¬¡'
        });
        updateAchievementsDisplay();
        showFloatingWisdom('ğŸ† è·å¾—æˆå°±ï¼šğŸŒŒ å®‡å®™è§‰é†’è€…');
        localStorage.setItem('cultivationStats', JSON.stringify(cultivationStats));
    }
}

// åŒå‡»æ ‡é¢˜é‡ç½®ï¼ˆéšè—åŠŸèƒ½ï¼‰
document.querySelector('h1').addEventListener('dblclick', resetCultivation);

// å‘½è¿è½¬æŠ˜ç‚¹åŠŸèƒ½
function makeDestinyChoice(choice) {
    const now = new Date();
    const choiceData = {
        choice: choice,
        timestamp: now.toISOString(),
        date: now.toLocaleDateString('zh-CN')
    };
    
    localStorage.setItem('destinyChoice', JSON.stringify(choiceData));
    
    if (choice === 'transcend') {
        showFloatingWisdom('ğŸŒŸ ä½ é€‰æ‹©äº†è¶…è¶Šï¼å‘½è¿ä¹‹é—¨ä¸ºä½ å¼€å¯ï¼Œæ–°çš„é“è·¯åœ¨å‰æ–¹é—ªè€€...');
        
        // å¤§å¹…æå‡ä¿®ç‚¼ç»Ÿè®¡
        cultivationStats.meditationTime += 30;
        cultivationStats.cosmicAwakenings = (cultivationStats.cosmicAwakenings || 0) + 5;
        
        // æ·»åŠ ç‰¹æ®Šæˆå°±
        if (!cultivationStats.achievements.includes('destiny_transcender')) {
            cultivationStats.achievements.push('destiny_transcender');
            achievements.push({
                id: 'destiny_transcender',
                name: 'å‘½è¿è¶…è¶Šè€…',
                icon: 'ğŸŒŸ',
                description: 'åœ¨å…³é”®æ—¶åˆ»é€‰æ‹©äº†è¶…è¶Šä¹‹è·¯'
            });
            showFloatingWisdom('ğŸ† è·å¾—æˆå°±ï¼šğŸŒŸ å‘½è¿è¶…è¶Šè€…');
        }
        
        // è§¦å‘ç‰¹æ®Šæ•ˆæœ
        document.body.style.background = 'linear-gradient(45deg, #000428, #004e92, #009ffd)';
        setTimeout(() => {
            document.body.style.background = '';
        }, 3000);
        
    } else if (choice === 'return') {
        showFloatingWisdom('ğŸ’­ ä½ é€‰æ‹©äº†å›å½’...æœ‰æ—¶å€™ï¼Œç†Ÿæ‚‰çš„è·¯ä¹Ÿæ˜¯ä¸€ç§æ™ºæ…§ã€‚');
        
        if (!cultivationStats.achievements.includes('destiny_contemplator')) {
            cultivationStats.achievements.push('destiny_contemplator');
            achievements.push({
                id: 'destiny_contemplator',
                name: 'å‘½è¿æ€è€ƒè€…',
                icon: 'ğŸ’­',
                description: 'åœ¨å…³é”®æ—¶åˆ»æ·±æ€ç†Ÿè™‘'
            });
            showFloatingWisdom('ğŸ† è·å¾—æˆå°±ï¼šğŸ’­ å‘½è¿æ€è€ƒè€…');
        }
    }
    
    localStorage.setItem('cultivationStats', JSON.stringify(cultivationStats));
    updateAchievementsDisplay();
    updateDestinyStatus();
    updateStats();
}

function updateDestinyStatus() {
    const choiceData = JSON.parse(localStorage.getItem('destinyChoice') || 'null');
    const statusElement = document.querySelector('.anchor-status');
    
    if (choiceData) {
        const choiceText = choiceData.choice === 'transcend' ? 'å·²é€‰æ‹©è¶…è¶Š' : 'å·²é€‰æ‹©å›å½’';
        const choiceColor = choiceData.choice === 'transcend' ? '#00ff7f' : '#ff6b6b';
        statusElement.innerHTML = `${choiceText} (${choiceData.date})`;
        statusElement.style.color = choiceColor;
    } else {
        statusElement.innerHTML = 'ç­‰å¾…ä½ çš„é€‰æ‹©...';
        statusElement.style.color = '#e0e0e0';
    }
}

function performDestinyUpgrade() {
    // å¤§å¹…æå‡æ‰€æœ‰ä¿®ç‚¼æ•°æ®
    cultivationStats.meditationTime += 60;
    cultivationStats.cosmicAwakenings = (cultivationStats.cosmicAwakenings || 0) + 10;
    cultivationStats.consecutiveDays += 7;
    
    // è§£é”æ‰€æœ‰å¯†æ³•
    const allSecrets = ['æ»´éœ²ä¸€', 'æ»´éœ²äºŒ', 'æ»´éœ²ä¸‰', 'æ»´éœ²å››', 'æ»´éœ²äº”', 'æ»´éœ²å…­', 'æ»´éœ²ä¸ƒ', 'æ»´éœ²å…«', 'æ»´éœ²ä¹'];
    allSecrets.forEach(secret => {
        if (!masteredSecrets.includes(secret)) {
            masteredSecrets.push(secret);
        }
    });
    
    localStorage.setItem('masteredSecrets', JSON.stringify(masteredSecrets));
    localStorage.setItem('cultivationStats', JSON.stringify(cultivationStats));
    
    showFloatingWisdom('ğŸš€ å¤§å‡çº§å®Œæˆï¼ä½ çš„ä¿®ç‚¼å¢ƒç•Œå¾—åˆ°äº†è´¨çš„é£è·ƒï¼æ‰€æœ‰å¯†æ³•å·²è§£é”ï¼');
    
    // æ·»åŠ ç»ˆææˆå°±
    if (!cultivationStats.achievements.includes('ultimate_upgrade')) {
        cultivationStats.achievements.push('ultimate_upgrade');
        achievements.push({
            id: 'ultimate_upgrade',
            name: 'ç»ˆæå‡çº§è€…',
            icon: 'ğŸš€',
            description: 'å®Œæˆäº†å‘½è¿çš„ç»ˆæå‡çº§'
        });
        showFloatingWisdom('ğŸ† è·å¾—æˆå°±ï¼šğŸš€ ç»ˆæå‡çº§è€…');
    }
    
    // ç‰¹æ®Šå‡çº§æ•ˆæœ
    const upgradeBtn = document.querySelector('.upgrade-btn');
    upgradeBtn.style.transform = 'scale(1.2)';
    upgradeBtn.style.boxShadow = '0 0 50px rgba(255, 215, 0, 0.8)';
    
    setTimeout(() => {
        upgradeBtn.style.transform = '';
        upgradeBtn.style.boxShadow = '';
    }, 2000);
    
    // æ›´æ–°æ‰€æœ‰æ˜¾ç¤º
    updateStats();
    updateAchievementsDisplay();
    checkAchievements();
}

function activateCalibrationIndicators() {
    const indicators = document.querySelectorAll('.indicator');
    indicators.forEach((indicator, index) => {
        setTimeout(() => {
            indicator.style.animation = 'indicatorPulse 2s ease-in-out infinite';
            indicator.style.background = 'rgba(255, 107, 107, 0.2)';
            indicator.style.borderColor = '#ff6b6b';
            indicator.style.color = '#ff6b6b';
        }, index * 500);
    });
}

// é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–å‘½è¿è½¬æŠ˜ç‚¹çŠ¶æ€
document.addEventListener('DOMContentLoaded', function() {
    updateDestinyStatus();
    
    // è‡ªåŠ¨æ¿€æ´»æ ¡å‡†æŒ‡ç¤ºå™¨
    setTimeout(activateCalibrationIndicators, 2000);
    
    // åˆå§‹åŒ–æ„¿é¢‘è®¡ç®—
    updateWishFrequency();
});

// æ„¿é¢‘ä¸´ç•Œçªç ´å…¬å¼è®¡ç®—å‡½æ•°
function updateWishFrequency() {
    const A = parseFloat(document.getElementById('amplitude-slider').value);
    const lambda = parseFloat(document.getElementById('lambda-slider').value);
    
    // æ›´æ–°æ˜¾ç¤ºå€¼
    document.getElementById('amplitude-value').textContent = A.toFixed(1);
    document.getElementById('lambda-value').textContent = lambda.toFixed(2);
    
    // è®¡ç®—æ„¿é¢‘æ€»å’Œ S = A / (1 - e^(-Î»))
    const S = A / (1 - Math.exp(-lambda));
    
    // æ›´æ–°æ˜¾ç¤º
    document.getElementById('wish-sum').textContent = S.toFixed(3);
    
    // è®¡ç®—æ˜¾åŒ–æ¦‚ç‡ï¼ˆåŸºäºSå€¼çš„éçº¿æ€§æ˜ å°„ï¼‰
    const manifestationProb = Math.min(100, Math.max(0, (S - 0.5) * 100));
    document.getElementById('manifestation-prob').textContent = manifestationProb.toFixed(0) + '%';
    
    // æ›´æ–°ä¸´ç•ŒçŠ¶æ€
    const criticalStatus = document.getElementById('critical-status');
    const collapseBtn = document.getElementById('collapse-btn');
    
    if (S > 1) {
        criticalStatus.textContent = 'å·²è¾¾ä¸´ç•Œï¼';
        criticalStatus.style.color = '#00ff7f';
        collapseBtn.disabled = false;
        collapseBtn.style.opacity = '1';
        collapseBtn.style.transform = 'scale(1.02)';
    } else {
        criticalStatus.textContent = 'æœªè¾¾ä¸´ç•Œ';
        criticalStatus.style.color = '#ff6b6b';
        collapseBtn.disabled = true;
        collapseBtn.style.opacity = '0.5';
        collapseBtn.style.transform = 'scale(1)';
    }
    
    // æ›´æ–°æ³¢å½¢å¯è§†åŒ–
    updateWaveVisualization(A, lambda, S);
}

// æ„¿é¢‘æ³¢å½¢å¯è§†åŒ–
function updateWaveVisualization(A, lambda, S) {
    const container = document.getElementById('wave-visualization');
    container.innerHTML = '';
    
    const width = container.offsetWidth;
    const height = 60;
    const numPoints = 50;
    
    // åˆ›å»ºSVG
    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
    svg.setAttribute('width', width);
    svg.setAttribute('height', height);
    svg.style.position = 'absolute';
    svg.style.top = '0';
    svg.style.left = '0';
    
    // ç»˜åˆ¶æ„¿é¢‘è¡°å‡æ›²çº¿
    let pathData = 'M ';
    for (let i = 0; i < numPoints; i++) {
        const x = (i / (numPoints - 1)) * width;
        const n = i + 1;
        const epsilon = A * Math.exp(-n * lambda);
        const y = height - (epsilon / A) * (height - 10);
        
        if (i === 0) {
            pathData += `${x},${y}`;
        } else {
            pathData += ` L ${x},${y}`;
        }
    }
    
    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    path.setAttribute('d', pathData);
    path.setAttribute('stroke', S > 1 ? '#00ff7f' : '#ff1493');
    path.setAttribute('stroke-width', '2');
    path.setAttribute('fill', 'none');
    path.setAttribute('opacity', '0.8');
    
    svg.appendChild(path);
    
    // æ·»åŠ ä¸´ç•Œçº¿
    const criticalLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
    criticalLine.setAttribute('x1', '0');
    criticalLine.setAttribute('y1', height * 0.3);
    criticalLine.setAttribute('x2', width);
    criticalLine.setAttribute('y2', height * 0.3);
    criticalLine.setAttribute('stroke', '#ffd700');
    criticalLine.setAttribute('stroke-width', '1');
    criticalLine.setAttribute('stroke-dasharray', '5,5');
    criticalLine.setAttribute('opacity', '0.6');
    
    svg.appendChild(criticalLine);
    
    container.appendChild(svg);
    
    // æ·»åŠ ç²’å­æ•ˆæœï¼ˆå½“è¾¾åˆ°ä¸´ç•Œæ—¶ï¼‰
    if (S > 1) {
        createWishParticles(container);
    }
}

// åˆ›å»ºæ„¿é¢‘ç²’å­æ•ˆæœ
function createWishParticles(container) {
    for (let i = 0; i < 5; i++) {
        setTimeout(() => {
            const particle = document.createElement('div');
            particle.style.position = 'absolute';
            particle.style.width = '4px';
            particle.style.height = '4px';
            particle.style.background = '#ffd700';
            particle.style.borderRadius = '50%';
            particle.style.left = Math.random() * container.offsetWidth + 'px';
            particle.style.top = '50px';
            particle.style.pointerEvents = 'none';
            particle.style.animation = 'wishParticleFloat 2s ease-out forwards';
            
            container.appendChild(particle);
            
            setTimeout(() => {
                if (particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                }
            }, 2000);
        }, i * 200);
    }
}

// æ„¿é¢‘å¡Œç¸®æ¿€æ´»å‡½æ•°
function activateWishCollapse() {
    const resultDiv = document.getElementById('collapse-result');
    const A = parseFloat(document.getElementById('amplitude-slider').value);
    const lambda = parseFloat(document.getElementById('lambda-slider').value);
    const S = A / (1 - Math.exp(-lambda));
    
    if (S > 1) {
        // æ˜¾ç¤ºå¡Œç¸®è¿‡ç¨‹
        resultDiv.innerHTML = 'ğŸŒŸ æ„¿é¢‘å¡Œç¸®ä¸­... ğŸŒŸ';
        
        setTimeout(() => {
            resultDiv.innerHTML = `âœ¨ å¡Œç¸®å®Œæˆï¼æ„¿é¢‘æ€»å’Œ ${S.toFixed(3)} å·²æ˜¾åŒ–ä¸ºç°å® âœ¨`;
            
            // åˆ›å»ºå…¨å±ç²’å­æ•ˆæœ
            createCollapseEffect();
            
            // æ’­æ”¾æˆåŠŸéŸ³æ•ˆï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
            playMasterySound();
            
            setTimeout(() => {
                resultDiv.innerHTML = 'ğŸ’« æ„¿é¢‘å®‡å®™å·²æ›´æ–°ï¼Œæ–°çš„å¯èƒ½æ€§å·²å¼€å¯ ğŸ’«';
            }, 3000);
        }, 1500);
    }
}

// åˆ›å»ºå¡Œç¸®æ•ˆæœ
function createCollapseEffect() {
    const container = document.body;
    
    for (let i = 0; i < 20; i++) {
        setTimeout(() => {
            const particle = document.createElement('div');
            particle.style.position = 'fixed';
            particle.style.width = '6px';
            particle.style.height = '6px';
            particle.style.background = `hsl(${Math.random() * 60 + 300}, 100%, 70%)`;
            particle.style.borderRadius = '50%';
            particle.style.left = Math.random() * window.innerWidth + 'px';
            particle.style.top = Math.random() * window.innerHeight + 'px';
            particle.style.pointerEvents = 'none';
            particle.style.zIndex = '9999';
            particle.style.animation = 'wishCollapseEffect 3s ease-out forwards';
            
            container.appendChild(particle);
            
            setTimeout(() => {
                if (particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                }
            }, 3000);
        }, i * 100);
    }
}

// é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–æ³¢å½¢å¯è§†åŒ–
document.addEventListener('DOMContentLoaded', function() {
    // ç­‰å¾…ä¸€å°æ®µæ—¶é—´ç¡®ä¿å…ƒç´ å®Œå…¨æ¸²æŸ“
    setTimeout(() => {
        updateWishFrequency();
    }, 100);
});

</script>

<!-- æ„¿é¢‘ç²’å­åŠ¨ç”»æ ·å¼ -->
<style>
@keyframes wishParticleFloat {
    0% {
        transform: translateY(0) scale(1);
        opacity: 1;
    }
    100% {
        transform: translateY(-40px) scale(0.5);
        opacity: 0;
    }
}

@keyframes wishCollapseEffect {
    0% {
        transform: scale(1) rotate(0deg);
        opacity: 1;
    }
    50% {
        transform: scale(1.5) rotate(180deg);
        opacity: 0.8;
    }
    100% {
        transform: scale(0) rotate(360deg);
        opacity: 0;
    }
}

/* æ„¿é¢‘æ»‘å—æ ·å¼ä¼˜åŒ– */
input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    height: 6px;
    background: linear-gradient(90deg, rgba(255, 20, 147, 0.3), rgba(138, 43, 226, 0.3));
    border-radius: 3px;
    outline: none;
}

input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 18px;
    height: 18px;
    background: linear-gradient(45deg, #ff1493, #8a2be2);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 10px rgba(255, 20, 147, 0.5);
}

input[type="range"]::-moz-range-thumb {
    width: 18px;
    height: 18px;
    background: linear-gradient(45deg, #ff1493, #8a2be2);
    border-radius: 50%;
    cursor: pointer;
    border: none;
    box-shadow: 0 2px 10px rgba(255, 20, 147, 0.5);
}
</style>

{% endblock %}