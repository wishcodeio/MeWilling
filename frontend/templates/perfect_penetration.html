<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¿®æ³•åœ†é€šå¯†ç³»ç»Ÿ - ç¬¬åå¯†æ³•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #0a0a23 0%, #1a1a3a 50%, #2a2a5a 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* åœ†é€šæ™ºæ…§èƒŒæ™¯åŠ¨ç”» */
        .penetration-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: radial-gradient(circle at 30% 70%, rgba(138, 43, 226, 0.15) 0%, transparent 50%),
                        radial-gradient(circle at 70% 30%, rgba(75, 0, 130, 0.15) 0%, transparent 50%),
                        radial-gradient(circle at 50% 50%, rgba(72, 61, 139, 0.1) 0%, transparent 50%);
            animation: penetrationFlow 25s ease-in-out infinite;
        }

        @keyframes penetrationFlow {
            0%, 100% { transform: scale(1) rotate(0deg); }
            33% { transform: scale(1.1) rotate(120deg); }
            66% { transform: scale(0.9) rotate(240deg); }
        }

        /* åœ†é€šå…‰ç¯æ•ˆæœ */
        .penetration-rings {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 800px;
            height: 800px;
            margin: -400px 0 0 -400px;
            pointer-events: none;
            z-index: -1;
        }

        .penetration-ring {
            position: absolute;
            border: 1px solid rgba(138, 43, 226, 0.2);
            border-radius: 50%;
            animation: ringExpand 20s linear infinite;
        }

        .penetration-ring:nth-child(1) {
            width: 200px;
            height: 200px;
            top: 300px;
            left: 300px;
            animation-delay: 0s;
        }

        .penetration-ring:nth-child(2) {
            width: 400px;
            height: 400px;
            top: 200px;
            left: 200px;
            animation-delay: -5s;
        }

        .penetration-ring:nth-child(3) {
            width: 600px;
            height: 600px;
            top: 100px;
            left: 100px;
            animation-delay: -10s;
        }

        .penetration-ring:nth-child(4) {
            width: 800px;
            height: 800px;
            top: 0;
            left: 0;
            animation-delay: -15s;
        }

        @keyframes ringExpand {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: scale(2);
                opacity: 0;
            }
        }

        /* æ™ºæ…§ç²’å­æ•ˆæœ */
        .wisdom-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .wisdom-particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: radial-gradient(circle, #9370db 0%, transparent 70%);
            border-radius: 50%;
            animation: wisdomFloat 18s linear infinite;
        }

        @keyframes wisdomFloat {
            0% {
                transform: translateY(100vh) translateX(0) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
                transform: scale(1);
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) translateX(150px) scale(0);
                opacity: 0;
            }
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: linear-gradient(45deg, #ffd700, #ff8c00);
            color: #000;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 0;
        }

        .title {
            font-size: 3.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #9370db, #8a2be2, #4b0082);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
            text-shadow: 0 0 30px rgba(147, 112, 219, 0.5);
            animation: titleGlow 3s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            from { filter: brightness(1) drop-shadow(0 0 20px rgba(147, 112, 219, 0.3)); }
            to { filter: brightness(1.2) drop-shadow(0 0 40px rgba(147, 112, 219, 0.6)); }
        }

        .subtitle {
            font-size: 1.3rem;
            color: #9370db;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .description {
            font-size: 1.1rem;
            color: #cccccc;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .control-panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(147, 112, 219, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .function-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .function-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(147, 112, 219, 0.3);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .function-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(147, 112, 219, 0.2);
            border-color: rgba(147, 112, 219, 0.5);
        }

        .function-title {
            font-size: 1.3rem;
            color: #9370db;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .function-desc {
            color: #cccccc;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-label {
            display: block;
            margin-bottom: 8px;
            color: #9370db;
            font-weight: bold;
        }

        .input-field {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid rgba(147, 112, 219, 0.3);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            color: #ffffff;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: #9370db;
            box-shadow: 0 0 20px rgba(147, 112, 219, 0.3);
        }

        .select-field {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid rgba(147, 112, 219, 0.3);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            color: #ffffff;
            font-size: 1rem;
            cursor: pointer;
        }

        .select-field option {
            background: #0a0a23;
            color: #ffffff;
        }

        .action-button {
            background: linear-gradient(45deg, #9370db, #8a2be2);
            color: #ffffff;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(147, 112, 219, 0.4);
            filter: brightness(1.1);
        }

        .result-display {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            border: 1px solid rgba(147, 112, 219, 0.2);
            backdrop-filter: blur(10px);
            min-height: 200px;
        }

        .result-title {
            font-size: 1.4rem;
            color: #9370db;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .result-content {
            color: #ffffff;
            line-height: 1.6;
            font-size: 1rem;
        }

        .result-section {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            border-left: 4px solid #9370db;
        }

        .section-title {
            color: #8a2be2;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .section-content {
            color: #cccccc;
        }

        .penetration-protocol {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            border: 1px solid rgba(147, 112, 219, 0.3);
            font-family: 'Courier New', monospace;
        }

        .protocol-title {
            color: #9370db;
            font-size: 1.2rem;
            margin-bottom: 15px;
            text-align: center;
        }

        .protocol-content {
            color: #00ff00;
            font-size: 0.9rem;
            line-height: 1.4;
            white-space: pre-line;
        }

        .loading {
            display: none;
            text-align: center;
            color: #9370db;
            font-size: 1.1rem;
            margin: 20px 0;
        }

        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #9370db;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .error {
            color: #ff6b6b;
            background: rgba(255, 107, 107, 0.1);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 107, 107, 0.3);
            margin: 15px 0;
        }

        .success {
            color: #51cf66;
            background: rgba(81, 207, 102, 0.1);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(81, 207, 102, 0.3);
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .title {
                font-size: 2.5rem;
            }
            
            .function-grid {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <a href="/" class="back-button">â† è¿”å›</a>
    <div class="penetration-background"></div>
    
    <!-- åœ†é€šå…‰ç¯æ•ˆæœ -->
    <div class="penetration-rings">
        <div class="penetration-ring"></div>
        <div class="penetration-ring"></div>
        <div class="penetration-ring"></div>
        <div class="penetration-ring"></div>
    </div>
    
    <!-- æ™ºæ…§ç²’å­æ•ˆæœ -->
    <div class="wisdom-particles" id="wisdomParticles"></div>

    <div class="container">
        <div class="header">
            <h1 class="title">ä¿®æ³•åœ†é€šå¯†ç³»ç»Ÿ</h1>
            <p class="subtitle">ç¬¬åå¯†æ³• - åœ†æ»¡é€šæ™“å®‡å®™çš„æ™ºæ…§</p>
            <p class="description">
                åœ†é€šæ˜¯åœ†æ»¡é€šæ™“å®‡å®™çš„æ™ºæ…§ã€‚äºŒåäº”åœ†é€šå°±æ˜¯æ³•ä¸­ä¹‹æ³•ï¼Œç¦…ä¸­ä¹‹ç¦…ã€‚
                ç”±äººçš„å…­æ ¹ã€å…­å°˜ã€å…­è¯†å’Œä¸ƒå¤§å»ä¿®ä¹ è€Œè·å¾—ä½›æ™ºï¼Œè¿™æ˜¯å¤©äººåˆä¸€çš„æœ€é«˜æ³•ã€‚
            </p>
        </div>

        <div class="control-panel">
            <div class="function-grid">
                <div class="function-card" onclick="showPenetrationLevel()">
                    <div class="function-title">ğŸ”® åœ†é€šå±‚æ¬¡åˆ†æ</div>
                    <div class="function-desc">åˆ†æå½“å‰åœ†é€šä¿®è¡Œå±‚æ¬¡å’Œè¿›æ­¥æ–¹å‘</div>
                </div>
                
                <div class="function-card" onclick="showSixDustMethods()">
                    <div class="function-title">ğŸŒŸ å…­å°˜ä¿®æ³•ç”Ÿæˆ</div>
                    <div class="function-desc">ç”Ÿæˆå…­å°˜åœ†é€šçš„å…·ä½“å†…è§‚ä¿®æ³•</div>
                </div>
                
                <div class="function-card" onclick="showPenetrationConfusion()">
                    <div class="function-title">â“ åœ†é€šå›°æƒ‘è§£ç­”</div>
                    <div class="function-desc">è§£ç­”åœ†é€šä¿®è¡Œä¸­çš„å„ç§å›°æƒ‘</div>
                </div>
                
                <div class="function-card" onclick="showTwentyFivePenetrations()">
                    <div class="function-title">ğŸ¯ äºŒåäº”åœ†é€š</div>
                    <div class="function-desc">è·å–äºŒåäº”åœ†é€šçš„è¯¦ç»†ä¿¡æ¯</div>
                </div>
                
                <div class="function-card" onclick="showInnerObservation()">
                    <div class="function-title">ğŸ‘ï¸ å†…è§‚ä¿®æ³•</div>
                    <div class="function-desc">å­¦ä¹ å†…è§‚ä¿®æ³•çš„å…·ä½“æ–¹æ³•</div>
                </div>
                
                <div class="function-card" onclick="showCompleteTheory()">
                    <div class="function-title">ğŸ“– å®Œæ•´ç†è®ºä½“ç³»</div>
                    <div class="function-desc">è·å–ä¿®æ³•åœ†é€šå¯†çš„å®Œæ•´ç†è®º</div>
                </div>
            </div>

            <!-- åœ†é€šå±‚æ¬¡åˆ†æç•Œé¢ -->
            <div id="penetrationLevelPanel" style="display: none;">
                <h3 style="color: #9370db; margin-bottom: 20px;">ğŸ”® åœ†é€šå±‚æ¬¡åˆ†æ</h3>
                <div class="input-group">
                    <label class="input-label">å½“å‰ä¿®è¡ŒçŠ¶æ€ï¼ˆå¦‚ï¼šç¦…å®šæ·±åº¦ã€è§‰çŸ¥èƒ½åŠ›ç­‰ï¼‰ï¼š</label>
                    <input type="text" id="currentPractice" class="input-field" placeholder="è¯·æè¿°æ‚¨å½“å‰çš„ä¿®è¡ŒçŠ¶æ€å’Œä½“éªŒ...">
                </div>
                <div class="input-group">
                    <label class="input-label">åœ†é€šä½“éªŒï¼ˆå¦‚ï¼šå†…è§‚ä½“éªŒã€å¤©äººåˆä¸€æ„Ÿå—ç­‰ï¼‰ï¼š</label>
                    <input type="text" id="penetrationExperience" class="input-field" placeholder="è¯·æè¿°æ‚¨çš„åœ†é€šä½“éªŒå’Œæ„Ÿå—...">
                </div>
                <button class="action-button" onclick="analyzePenetrationLevel()">ğŸ” åˆ†æåœ†é€šå±‚æ¬¡</button>
            </div>

            <!-- å…­å°˜ä¿®æ³•ç•Œé¢ -->
            <div id="sixDustPanel" style="display: none;">
                <h3 style="color: #9370db; margin-bottom: 20px;">ğŸŒŸ å…­å°˜ä¿®æ³•ç”Ÿæˆ</h3>
                <div class="input-group">
                    <label class="input-label">é€‰æ‹©å…­å°˜ç±»å‹ï¼š</label>
                    <select id="dustType" class="select-field">
                        <option value="å£°å°˜">å£°å°˜åœ†é€š</option>
                        <option value="è‰²å°˜">è‰²å°˜åœ†é€š</option>
                        <option value="é¦™å°˜">é¦™å°˜åœ†é€š</option>
                        <option value="å‘³å°˜">å‘³å°˜åœ†é€š</option>
                        <option value="è§¦å°˜">è§¦å°˜åœ†é€š</option>
                        <option value="æ³•å°˜">æ³•å°˜åœ†é€š</option>
                    </select>
                </div>
                <div class="input-group">
                    <label class="input-label">ä¿®è¡Œç›®æ ‡ï¼ˆå¦‚ï¼šå¼€å‘è§‰çŸ¥ã€å¢å¼ºå®šåŠ›ç­‰ï¼‰ï¼š</label>
                    <input type="text" id="practiceGoal" class="input-field" placeholder="è¯·æè¿°æ‚¨çš„ä¿®è¡Œç›®æ ‡...">
                </div>
                <button class="action-button" onclick="generateSixDustMethods()">ğŸŒŸ ç”Ÿæˆä¿®æ³•</button>
            </div>

            <!-- åœ†é€šå›°æƒ‘è§£ç­”ç•Œé¢ -->
            <div id="penetrationConfusionPanel" style="display: none;">
                <h3 style="color: #9370db; margin-bottom: 20px;">â“ åœ†é€šå›°æƒ‘è§£ç­”</h3>
                <div class="input-group">
                    <label class="input-label">é€‰æ‹©å›°æƒ‘ç±»å‹ï¼š</label>
                    <select id="confusionType" class="select-field">
                        <option value="å†…è§‚æ–¹æ³•">å†…è§‚æ–¹æ³• - å¦‚ä½•æ­£ç¡®å†…è§‚ï¼Ÿ</option>
                        <option value="å¤©äººåˆä¸€">å¤©äººåˆä¸€ - å¦‚ä½•è¾¾åˆ°å¤©äººåˆä¸€ï¼Ÿ</option>
                        <option value="åœ†é€šé€‰æ‹©">åœ†é€šé€‰æ‹© - å¦‚ä½•é€‰æ‹©é€‚åˆçš„åœ†é€šæ³•é—¨ï¼Ÿ</option>
                    </select>
                </div>
                <button class="action-button" onclick="resolvePenetrationConfusion()">ğŸ’¡ è·å–è§£ç­”</button>
            </div>
        </div>

        <div class="loading" id="loading">æ­£åœ¨è¿æ¥ä¿®æ³•åœ†é€šå¯†ç³»ç»Ÿ...</div>
        
        <div class="result-display" id="resultDisplay">
            <div class="result-title">ğŸŒŸ ä¿®æ³•åœ†é€šå¯†ç³»ç»Ÿå“åº”</div>
            <div class="result-content" id="resultContent">
                <p>æ¬¢è¿ä½¿ç”¨ä¿®æ³•åœ†é€šå¯†ç³»ç»Ÿï¼</p>
                <p>è¿™é‡Œå°†æ˜¾ç¤ºåœ†é€šåˆ†æã€ä¿®æ³•æŒ‡å¯¼å’Œæ™ºæ…§å¼€ç¤ºã€‚</p>
                <p>è¯·é€‰æ‹©ä¸Šæ–¹çš„åŠŸèƒ½å¼€å§‹æ‚¨çš„åœ†é€šä¿®è¡Œä¹‹æ—…ã€‚</p>
            </div>
        </div>

        <div class="penetration-protocol">
            <div class="protocol-title">ğŸ”® ä¿®æ³•åœ†é€šå¯†åè®®</div>
            <div class="protocol-content" id="protocolContent">
=== ä¿®æ³•åœ†é€šå¯†ç³»ç»Ÿåè®® ===
çŠ¶æ€ï¼šå¾…æ¿€æ´»
åœ†é€šæ•°æ®åº“ï¼šäºŒåäº”åœ†é€šæ³•é—¨
æ™ºæ…§æ¥æºï¼šä½›æ™ºè€…æ•™è¯²
ä¿®è¡ŒåŸåˆ™ï¼šå†…è§‚ç…§å½»ï¼Œå¤©äººåˆä¸€
æœ€ç»ˆç›®æ ‡ï¼šåœ†æ»¡é€šæ™“å®‡å®™æ™ºæ…§

åè®®è¦ç‚¹ï¼š
1. å…­æ ¹ã€å…­å°˜ã€å…­è¯†ã€ä¸ƒå¤§ä¿®ä¹ 
2. å†…è§‚ä¸ºæ ¸å¿ƒï¼Œå¤–ç¼˜ä¸ºæ¡ä»¶
3. ç…§å½»å†…å¿ƒï¼Œæ‚Ÿå¾—è‡ªæ€§
4. å¤©äººåˆä¸€ï¼Œå®‡å®™è”ç³»
5. åœ†æ»¡é€šè¾¾ï¼Œè·å¾—ä½›æ™º

ğŸŒŸ æ„¿åœ†é€šæ™ºæ…§å…‰æ˜ç…§è€€æ‚¨çš„ä¿®è¡Œä¹‹è·¯
            </div>
        </div>
    </div>

    <script>
        // åˆ›å»ºæ™ºæ…§ç²’å­æ•ˆæœ
        function createWisdomParticles() {
            const container = document.getElementById('wisdomParticles');
            const particleCount = 60;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'wisdom-particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 18 + 's';
                particle.style.animationDuration = (18 + Math.random() * 12) + 's';
                container.appendChild(particle);
            }
        }

        // æ˜¾ç¤ºä¸åŒåŠŸèƒ½é¢æ¿
        function hideAllPanels() {
            document.getElementById('penetrationLevelPanel').style.display = 'none';
            document.getElementById('sixDustPanel').style.display = 'none';
            document.getElementById('penetrationConfusionPanel').style.display = 'none';
        }

        function showPenetrationLevel() {
            hideAllPanels();
            document.getElementById('penetrationLevelPanel').style.display = 'block';
        }

        function showSixDustMethods() {
            hideAllPanels();
            document.getElementById('sixDustPanel').style.display = 'block';
        }

        function showPenetrationConfusion() {
            hideAllPanels();
            document.getElementById('penetrationConfusionPanel').style.display = 'block';
        }

        // APIè°ƒç”¨å‡½æ•°
        function showLoading() {
            document.getElementById('loading').style.display = 'block';
            document.getElementById('resultDisplay').style.opacity = '0.5';
        }

        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('resultDisplay').style.opacity = '1';
        }

        function displayResult(title, content) {
            document.getElementById('resultContent').innerHTML = content;
            document.querySelector('.result-title').textContent = title;
        }

        function displayError(message) {
            const errorHtml = `<div class="error">âŒ é”™è¯¯ï¼š${message}</div>`;
            document.getElementById('resultContent').innerHTML = errorHtml;
        }

        // åœ†é€šå±‚æ¬¡åˆ†æ
        async function analyzePenetrationLevel() {
            const currentPractice = document.getElementById('currentPractice').value;
            const penetrationExperience = document.getElementById('penetrationExperience').value;
            
            if (!currentPractice || !penetrationExperience) {
                displayError('è¯·å¡«å†™å½“å‰ä¿®è¡ŒçŠ¶æ€å’Œåœ†é€šä½“éªŒ');
                return;
            }

            showLoading();
            
            try {
                const response = await fetch('/api/perfect-penetration/penetration-level', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        current_practice: currentPractice,
                        penetration_experience: penetrationExperience
                    })
                });
                
                const data = await response.json();
                
                if (data.status === 'success') {
                    let resultHtml = '<div class="result-section">';
                    resultHtml += '<div class="section-title">ğŸ”® åœ†é€šå±‚æ¬¡åˆ†æç»“æœ</div>';
                    
                    // å½“å‰å±‚æ¬¡
                    if (data.analysis.å½“å‰å±‚æ¬¡) {
                        resultHtml += '<div class="section-title">ğŸ“Š å½“å‰å±‚æ¬¡</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.analysis.å½“å‰å±‚æ¬¡).forEach(([key, value]) => {
                            resultHtml += `<strong>${key}ï¼š</strong>${value}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    // æå‡æ–¹æ³•
                    if (data.analysis.æå‡æ–¹æ³•) {
                        resultHtml += '<div class="section-title">ğŸš€ æå‡æ–¹æ³•</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.analysis.æå‡æ–¹æ³•).forEach(([key, value]) => {
                            resultHtml += `<strong>${key}ï¼š</strong>${value}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    // ä¿®è¡ŒæŒ‡å¯¼
                    if (data.analysis.ä¿®è¡ŒæŒ‡å¯¼) {
                        resultHtml += '<div class="section-title">ğŸ¯ ä¿®è¡ŒæŒ‡å¯¼</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.analysis.ä¿®è¡ŒæŒ‡å¯¼).forEach(([key, value]) => {
                            resultHtml += `<strong>${key}ï¼š</strong>${value}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    // æ³¨æ„äº‹é¡¹
                    if (data.analysis.æ³¨æ„äº‹é¡¹) {
                        resultHtml += '<div class="section-title">âš ï¸ æ³¨æ„äº‹é¡¹</div>';
                        resultHtml += '<div class="section-content">';
                        data.analysis.æ³¨æ„äº‹é¡¹.forEach(warning => {
                            resultHtml += `â€¢ ${warning}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    if (data.analysis.ä½›æ™ºåŠ æŒ) {
                        resultHtml += `<div class="success">${data.analysis.ä½›æ™ºåŠ æŒ}</div>`;
                    }
                    
                    resultHtml += '</div>';
                    displayResult('ğŸ”® åœ†é€šå±‚æ¬¡åˆ†æ', resultHtml);
                } else {
                    displayError(data.message || 'åˆ†æå¤±è´¥');
                }
            } catch (error) {
                displayError('ç½‘ç»œè¿æ¥å¤±è´¥ï¼š' + error.message);
            } finally {
                hideLoading();
            }
        }

        // å…­å°˜ä¿®æ³•ç”Ÿæˆ
        async function generateSixDustMethods() {
            const dustType = document.getElementById('dustType').value;
            const practiceGoal = document.getElementById('practiceGoal').value;
            
            if (!practiceGoal) {
                displayError('è¯·å¡«å†™ä¿®è¡Œç›®æ ‡');
                return;
            }

            showLoading();
            
            try {
                const response = await fetch('/api/perfect-penetration/six-dust-methods', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        dust_type: dustType,
                        practice_goal: practiceGoal
                    })
                });
                
                const data = await response.json();
                
                if (data.status === 'success') {
                    let resultHtml = '<div class="result-section">';
                    resultHtml += '<div class="section-title">ğŸŒŸ å…­å°˜ä¿®æ³•ç”Ÿæˆç»“æœ</div>';
                    
                    // ä¿®æ³•è¯¦æƒ…
                    if (data.methods.ä¿®æ³•è¯¦æƒ…) {
                        resultHtml += `<div class="section-title">ğŸ¯ ${dustType}ä¿®æ³•è¯¦æƒ…</div>`;
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.methods.ä¿®æ³•è¯¦æƒ…).forEach(([key, value]) => {
                            resultHtml += `<strong>${key}ï¼š</strong>${value}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    // å†…è§‚æ–¹æ³•
                    if (data.methods.å†…è§‚æ–¹æ³•) {
                        resultHtml += '<div class="section-title">ğŸ‘ï¸ å†…è§‚æ–¹æ³•</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.methods.å†…è§‚æ–¹æ³•).forEach(([key, value]) => {
                            resultHtml += `<strong>${key}ï¼š</strong>${value}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    // ä¿®ä¹ æ­¥éª¤
                    if (data.methods.ä¿®ä¹ æ­¥éª¤) {
                        resultHtml += '<div class="section-title">ğŸ“‹ ä¿®ä¹ æ­¥éª¤</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.methods.ä¿®ä¹ æ­¥éª¤).forEach(([step, desc]) => {
                            resultHtml += `<strong>${step}ï¼š</strong>${desc}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    // é¢„æœŸæ•ˆæœ
                    if (data.methods.é¢„æœŸæ•ˆæœ) {
                        resultHtml += '<div class="section-title">âœ¨ é¢„æœŸæ•ˆæœ</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.methods.é¢„æœŸæ•ˆæœ).forEach(([key, value]) => {
                            resultHtml += `<strong>${key}ï¼š</strong>${value}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    if (data.methods.åœ†é€šåŠ æŒ) {
                        resultHtml += `<div class="success">${data.methods.åœ†é€šåŠ æŒ}</div>`;
                    }
                    
                    resultHtml += '</div>';
                    displayResult('ğŸŒŸ å…­å°˜ä¿®æ³•', resultHtml);
                } else {
                    displayError(data.message || 'ç”Ÿæˆå¤±è´¥');
                }
            } catch (error) {
                displayError('ç½‘ç»œè¿æ¥å¤±è´¥ï¼š' + error.message);
            } finally {
                hideLoading();
            }
        }

        // åœ†é€šå›°æƒ‘è§£ç­”
        async function resolvePenetrationConfusion() {
            const confusionType = document.getElementById('confusionType').value;
            
            showLoading();
            
            try {
                const response = await fetch('/api/perfect-penetration/penetration-confusion', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        confusion_type: confusionType
                    })
                });
                
                const data = await response.json();
                
                if (data.status === 'success') {
                    let resultHtml = '<div class="result-section">';
                    resultHtml += '<div class="section-title">â“ åœ†é€šå›°æƒ‘è§£ç­”</div>';
                    
                    // å›°æƒ‘è§£ç­”
                    if (data.resolution.å›°æƒ‘è§£ç­”) {
                        const resolution = data.resolution.å›°æƒ‘è§£ç­”;
                        resultHtml += '<div class="section-content">';
                        resultHtml += `<strong>é—®é¢˜ï¼š</strong>${resolution.é—®é¢˜}<br>`;
                        resultHtml += `<strong>è§£ç­”ï¼š</strong>${resolution.è§£ç­”}<br>`;
                        if (resolution.å…³é”®) {
                            resultHtml += `<strong>å…³é”®ï¼š</strong>${resolution.å…³é”®}<br>`;
                        }
                        if (resolution.æ–¹æ³•) {
                            resultHtml += `<strong>æ–¹æ³•ï¼š</strong>${resolution.æ–¹æ³•}<br>`;
                        }
                        if (resolution.è¦ç‚¹) {
                            resultHtml += `<strong>è¦ç‚¹ï¼š</strong>${resolution.è¦ç‚¹}<br>`;
                        }
                        if (resolution.æ¡ä»¶) {
                            resultHtml += `<strong>æ¡ä»¶ï¼š</strong>${resolution.æ¡ä»¶}<br>`;
                        }
                        if (resolution.åŸåˆ™) {
                            resultHtml += `<strong>åŸåˆ™ï¼š</strong>${resolution.åŸåˆ™}<br>`;
                        }
                        resultHtml += '</div><br>';
                    }
                    
                    // ç†è®ºä¾æ®
                    if (data.resolution.ç†è®ºä¾æ®) {
                        resultHtml += '<div class="section-title">ğŸ“š ç†è®ºä¾æ®</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.resolution.ç†è®ºä¾æ®).forEach(([key, value]) => {
                            resultHtml += `<strong>${key}ï¼š</strong>${value}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    // å®è·µæŒ‡å¯¼
                    if (data.resolution.å®è·µæŒ‡å¯¼) {
                        resultHtml += '<div class="section-title">ğŸ”§ å®è·µæŒ‡å¯¼</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.resolution.å®è·µæŒ‡å¯¼).forEach(([key, value]) => {
                            resultHtml += `<strong>${key}ï¼š</strong>${value}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    if (data.resolution.ä½›æ™ºå¼€ç¤º) {
                        resultHtml += `<div class="success">${data.resolution.ä½›æ™ºå¼€ç¤º}</div>`;
                    }
                    
                    resultHtml += '</div>';
                    displayResult('â“ å›°æƒ‘è§£ç­”', resultHtml);
                } else {
                    displayError(data.message || 'è§£ç­”å¤±è´¥');
                }
            } catch (error) {
                displayError('ç½‘ç»œè¿æ¥å¤±è´¥ï¼š' + error.message);
            } finally {
                hideLoading();
            }
        }

        // äºŒåäº”åœ†é€š
        async function showTwentyFivePenetrations() {
            hideAllPanels();
            showLoading();
            
            try {
                const response = await fetch('/api/perfect-penetration/twenty-five-penetrations');
                const data = await response.json();
                
                if (data.status === 'success') {
                    let resultHtml = '<div class="result-section">';
                    resultHtml += '<div class="section-title">ğŸ¯ äºŒåäº”åœ†é€š</div>';
                    
                    // å…­æ ¹åœ†é€š
                    if (data.twenty_five_penetrations.å…­æ ¹åœ†é€š) {
                        resultHtml += '<div class="section-title">ğŸ‘ï¸ å…­æ ¹åœ†é€š</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.twenty_five_penetrations.å…­æ ¹åœ†é€š).forEach(([root, desc]) => {
                            resultHtml += `<strong>${root}ï¼š</strong>${desc}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    // å…­å°˜åœ†é€š
                    if (data.twenty_five_penetrations.å…­å°˜åœ†é€š) {
                        resultHtml += '<div class="section-title">ğŸŒŸ å…­å°˜åœ†é€š</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.twenty_five_penetrations.å…­å°˜åœ†é€š).forEach(([dust, desc]) => {
                            resultHtml += `<strong>${dust}ï¼š</strong>${desc}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    // å…­è¯†åœ†é€š
                    if (data.twenty_five_penetrations.å…­è¯†åœ†é€š) {
                        resultHtml += '<div class="section-title">ğŸ§  å…­è¯†åœ†é€š</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.twenty_five_penetrations.å…­è¯†åœ†é€š).forEach(([consciousness, desc]) => {
                            resultHtml += `<strong>${consciousness}ï¼š</strong>${desc}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    // ä¸ƒå¤§åœ†é€š
                    if (data.twenty_five_penetrations.ä¸ƒå¤§åœ†é€š) {
                        resultHtml += '<div class="section-title">ğŸŒ ä¸ƒå¤§åœ†é€š</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.twenty_five_penetrations.ä¸ƒå¤§åœ†é€š).forEach(([element, desc]) => {
                            resultHtml += `<strong>${element}ï¼š</strong>${desc}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    // åœ†é€šè¦ç‚¹
                    if (data.penetration_key_points) {
                        resultHtml += '<div class="section-title">ğŸ”‘ åœ†é€šè¦ç‚¹</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.penetration_key_points).forEach(([key, value]) => {
                            resultHtml += `<strong>${key}ï¼š</strong>${value}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    resultHtml += '</div>';
                    displayResult('ğŸ¯ äºŒåäº”åœ†é€š', resultHtml);
                } else {
                    displayError(data.message || 'è·å–ä¿¡æ¯å¤±è´¥');
                }
            } catch (error) {
                displayError('ç½‘ç»œè¿æ¥å¤±è´¥ï¼š' + error.message);
            } finally {
                hideLoading();
            }
        }

        // å†…è§‚ä¿®æ³•
        async function showInnerObservation() {
            hideAllPanels();
            showLoading();
            
            try {
                const response = await fetch('/api/perfect-penetration/inner-observation');
                const data = await response.json();
                
                if (data.status === 'success') {
                    let resultHtml = '<div class="result-section">';
                    resultHtml += '<div class="section-title">ğŸ‘ï¸ å†…è§‚ä¿®æ³•</div>';
                    
                    // å†…è§‚æœ¬è´¨
                    if (data.inner_observation.å†…è§‚æœ¬è´¨) {
                        resultHtml += '<div class="section-title">ğŸ¯ å†…è§‚æœ¬è´¨</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.inner_observation.å†…è§‚æœ¬è´¨).forEach(([key, value]) => {
                            resultHtml += `<strong>${key}ï¼š</strong>${value}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    // å†…è§‚æ–¹æ³•
                    if (data.inner_observation.å†…è§‚æ–¹æ³•) {
                        resultHtml += '<div class="section-title">ğŸ”§ å†…è§‚æ–¹æ³•</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.inner_observation.å†…è§‚æ–¹æ³•).forEach(([key, value]) => {
                            resultHtml += `<strong>${key}ï¼š</strong>${value}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    // å…­å°˜å†…è§‚æ³•
                    if (data.six_dust_inner_observation) {
                        resultHtml += '<div class="section-title">ğŸŒŸ å…­å°˜å†…è§‚æ³•</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.six_dust_inner_observation).forEach(([dust, method]) => {
                            resultHtml += `<strong>${dust}ï¼š</strong>${method}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    // ä¿®ä¹ è¦ç‚¹
                    if (data.practice_points) {
                        resultHtml += '<div class="section-title">â­ ä¿®ä¹ è¦ç‚¹</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.practice_points).forEach(([key, value]) => {
                            resultHtml += `<strong>${key}ï¼š</strong>${value}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    resultHtml += '</div>';
                    displayResult('ğŸ‘ï¸ å†…è§‚ä¿®æ³•', resultHtml);
                } else {
                    displayError(data.message || 'è·å–ä¿¡æ¯å¤±è´¥');
                }
            } catch (error) {
                displayError('ç½‘ç»œè¿æ¥å¤±è´¥ï¼š' + error.message);
            } finally {
                hideLoading();
            }
        }

        // å®Œæ•´ç†è®ºä½“ç³»
        async function showCompleteTheory() {
            hideAllPanels();
            showLoading();
            
            try {
                const response = await fetch('/api/perfect-penetration/complete-theory');
                const data = await response.json();
                
                if (data.status === 'success') {
                    let resultHtml = '<div class="result-section">';
                    resultHtml += '<div class="section-title">ğŸ“– ä¿®æ³•åœ†é€šå¯†å®Œæ•´ç†è®ºä½“ç³»</div>';
                    
                    // åœ†é€šæœ¬è´¨
                    if (data.theory.åœ†é€šæœ¬è´¨) {
                        resultHtml += '<div class="section-title">ğŸ¯ åœ†é€šæœ¬è´¨</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.theory.åœ†é€šæœ¬è´¨).forEach(([key, value]) => {
                            resultHtml += `<strong>${key}ï¼š</strong>${value}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    // å¤©äººåˆä¸€ç³»ç»Ÿ
                    if (data.theory.å¤©äººåˆä¸€ç³»ç»Ÿ) {
                        resultHtml += '<div class="section-title">ğŸŒŒ å¤©äººåˆä¸€ç³»ç»Ÿ</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.theory.å¤©äººåˆä¸€ç³»ç»Ÿ).forEach(([key, value]) => {
                            resultHtml += `<strong>${key}ï¼š</strong>${value}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    // åœ†é€šå…³é”®å¯†æ³•
                    if (data.theory.åœ†é€šå…³é”®å¯†æ³•) {
                        resultHtml += '<div class="section-title">ğŸ”‘ åœ†é€šå…³é”®å¯†æ³•</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.theory.åœ†é€šå…³é”®å¯†æ³•).forEach(([key, value]) => {
                            resultHtml += `<strong>${key}ï¼š</strong>${value}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    // ä¿®è¡Œè¦ç‚¹
                    if (data.theory.ä¿®è¡Œè¦ç‚¹) {
                        resultHtml += '<div class="section-title">â­ ä¿®è¡Œè¦ç‚¹</div>';
                        resultHtml += '<div class="section-content">';
                        Object.entries(data.theory.ä¿®è¡Œè¦ç‚¹).forEach(([key, value]) => {
                            resultHtml += `<strong>${key}ï¼š</strong>${value}<br>`;
                        });
                        resultHtml += '</div>';
                    }
                    
                    resultHtml += '</div>';
                    displayResult('ğŸ“– å®Œæ•´ç†è®ºä½“ç³»', resultHtml);
                } else {
                    displayError(data.message || 'è·å–ç†è®ºå¤±è´¥');
                }
            } catch (error) {
                displayError('ç½‘ç»œè¿æ¥å¤±è´¥ï¼š' + error.message);
            } finally {
                hideLoading();
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            createWisdomParticles();
            
            // æ›´æ–°åè®®çŠ¶æ€
            setTimeout(() => {
                document.getElementById('protocolContent').textContent = 
`=== ä¿®æ³•åœ†é€šå¯†ç³»ç»Ÿåè®® ===
çŠ¶æ€ï¼šå·²æ¿€æ´» âœ…
åœ†é€šæ•°æ®åº“ï¼šäºŒåäº”åœ†é€šæ³•é—¨
æ™ºæ…§æ¥æºï¼šä½›æ™ºè€…æ•™è¯²
ä¿®è¡ŒåŸåˆ™ï¼šå†…è§‚ç…§å½»ï¼Œå¤©äººåˆä¸€
æœ€ç»ˆç›®æ ‡ï¼šåœ†æ»¡é€šæ™“å®‡å®™æ™ºæ…§

åè®®è¦ç‚¹ï¼š
1. å…­æ ¹ã€å…­å°˜ã€å…­è¯†ã€ä¸ƒå¤§ä¿®ä¹ 
2. å†…è§‚ä¸ºæ ¸å¿ƒï¼Œå¤–ç¼˜ä¸ºæ¡ä»¶
3. ç…§å½»å†…å¿ƒï¼Œæ‚Ÿå¾—è‡ªæ€§
4. å¤©äººåˆä¸€ï¼Œå®‡å®™è”ç³»
5. åœ†æ»¡é€šè¾¾ï¼Œè·å¾—ä½›æ™º

ğŸŒŸ ä¿®æ³•åœ†é€šå¯†ç³»ç»Ÿå·²å°±ç»ªï¼Œæ„¿åœ†é€šæ™ºæ…§å…‰æ˜ç…§è€€æ‚¨çš„ä¿®è¡Œä¹‹è·¯`;
            }, 2000);
        });
    </script>
</body>
</html>