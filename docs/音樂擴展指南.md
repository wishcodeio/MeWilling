# 🎵 BoBi 冥想音樂擴展指南

## 📁 音頻文件管理

### 當前音樂庫
```
frontend/static/audio/
├── badashengzhou.m4a        # 八大神咒 (起靈淨化)
├── muyu40_bpm.m4a           # 木魚 40 BPM (深度冥想)
├── muyu50_bpm.m4a           # 木魚 50 BPM (放鬆冥想)
├── muyu70_bpm.m4a           # 木魚 70 BPM (專注冥想)
├── muyu100_bpm.m4a          # 木魚 100 BPM (活力冥想)
├── muyu120_bpm.m4a          # 木魚 120 BPM (動態冥想)
└── muyu120b_bpm.m4a         # 木魚 120 BPM (變體)
```

## 🎶 添加新音樂步驟

### 1. 音頻文件準備

**支援格式：**
- `.m4a` (推薦，高品質壓縮)
- `.mp3` (通用格式)
- `.wav` (無損格式，檔案較大)

**命名規範：**
```
[音樂類型]_[特徵]_[BPM/描述].m4a

範例：
- mantra_om_peaceful.m4a      # 咒語類-嗡音-平靜
- tibetan_bowl_healing.m4a    # 頌缽類-療癒
- nature_rain_60bpm.m4a       # 自然音-雨聲-60BPM
- crystal_singing_432hz.m4a   # 水晶缽-432赫茲
```

### 2. 文件放置
將新音頻文件複製到：
```bash
/Users/dq/Desktop/TelegramBots/shang_console_flask/frontend/static/audio/
```

### 3. 修改冥想腳本

編輯 `bobi_meditation_advanced.sh` 中的音樂選單：

```bash
# 在 show_music_menu() 函數中添加新選項
show_music_menu() {
    echo -e "${PURPLE}🎵 选择你的冥想音乐：${NC}"
    echo -e "${CYAN}1. 八大神咒 (起靈淨化) ⭐${NC}"
    echo -e "${CYAN}2. 木鱼 40 BPM (深度冥想)${NC}"
    echo -e "${CYAN}3. 木鱼 50 BPM (放松冥想)${NC}"
    echo -e "${CYAN}4. 木鱼 70 BPM (专注冥想)${NC}"
    echo -e "${CYAN}5. 木鱼 100 BPM (活力冥想)${NC}"
    echo -e "${CYAN}6. 木鱼 120 BPM (动态冥想)${NC}"
    # 添加新音樂選項
    echo -e "${CYAN}9. 頌缽療癒 (心靈淨化) 🔔${NC}"
    echo -e "${CYAN}10. 自然雨聲 (深度放鬆) 🌧️${NC}"
    echo -e "${CYAN}7. 随机选择${NC}"
    echo -e "${CYAN}8. 静默冥想${NC}"
    
    read -p "请选择 (1-10): " -n 2 -r  # 改為支援兩位數
    echo
    
    AUDIO_DIR="$(dirname "$0")/frontend/static/audio"
    case $REPLY in
        1) SELECTED_MUSIC="$AUDIO_DIR/badashengzhou.m4a" ;;
        2) SELECTED_MUSIC="$AUDIO_DIR/muyu40_bpm.m4a" ;;
        3) SELECTED_MUSIC="$AUDIO_DIR/muyu50_bpm.m4a" ;;
        4) SELECTED_MUSIC="$AUDIO_DIR/muyu70_bpm.m4a" ;;
        5) SELECTED_MUSIC="$AUDIO_DIR/muyu100_bpm.m4a" ;;
        6) SELECTED_MUSIC="$AUDIO_DIR/muyu120_bpm.m4a" ;;
        # 添加新音樂對應
        9) SELECTED_MUSIC="$AUDIO_DIR/tibetan_bowl_healing.m4a" ;;
        10) SELECTED_MUSIC="$AUDIO_DIR/nature_rain_60bpm.m4a" ;;
        7) 
            # 随机选择（包含新音樂）
            AUDIO_FILES=("$AUDIO_DIR"/*.m4a)
            RANDOM_INDEX=$((RANDOM % ${#AUDIO_FILES[@]}))
            SELECTED_MUSIC="${AUDIO_FILES[$RANDOM_INDEX]}"
            ;;
        8) SELECTED_MUSIC="" ;;
        *) 
            echo -e "${YELLOW}默认选择八大神咒起靈${NC}"
            SELECTED_MUSIC="$AUDIO_DIR/badashengzhou.m4a"
            ;;
    esac
}
```

## 🎨 音樂分類建議

### 🧘 冥想類型對應

| 冥想類型 | BPM範圍 | 音樂特徵 | 適用場景 |
|---------|---------|----------|----------|
| 深度冥想 | 40-60 | 低頻、持續音 | 睡前、深度放鬆 |
| 放鬆冥想 | 50-70 | 自然音、輕柔 | 日常減壓 |
| 專注冥想 | 60-80 | 節奏穩定 | 工作間隙 |
| 活力冥想 | 80-100 | 明亮、清晰 | 晨間啟動 |
| 動態冥想 | 100-120 | 韻律感強 | 運動冥想 |

### 🎵 音樂類型

**傳統類：**
- 佛教咒語（八大神咒、大悲咒等）
- 道教音樂（太極、八卦等）
- 藏傳佛教（頌缽、法器等）

**自然類：**
- 雨聲、海浪、森林
- 鳥鳴、流水、風聲

**頻率類：**
- 432Hz（自然頻率）
- 528Hz（愛的頻率）
- 963Hz（宇宙意識）

**器樂類：**
- 水晶缽、頌缽
- 古琴、笛子
- 鋼琴、豎琴

## 🔧 技術要求

### 音頻品質
- **取樣率：** 44.1kHz 或 48kHz
- **位元深度：** 16-bit 或 24-bit
- **檔案大小：** 建議 < 50MB
- **長度：** 5-60 分鐘

### 音量標準化
```bash
# 使用 ffmpeg 標準化音量
ffmpeg -i input.m4a -af "loudnorm=I=-16:TP=-1.5:LRA=11" output.m4a
```

## 🚀 快速添加範例

### 添加頌缽音樂

1. **準備文件：**
```bash
# 將頌缽音樂文件重命名
mv singing_bowl.mp3 tibetan_bowl_healing.m4a

# 複製到音頻目錄
cp tibetan_bowl_healing.m4a frontend/static/audio/
```

2. **修改腳本：**
```bash
# 編輯冥想腳本
nano bobi_meditation_advanced.sh

# 在選單中添加：
echo -e "${CYAN}9. 藏傳頌缽 (心靈療癒) 🔔${NC}"

# 在 case 語句中添加：
9) SELECTED_MUSIC="$AUDIO_DIR/tibetan_bowl_healing.m4a" ;;
```

3. **測試播放：**
```bash
# 運行冥想腳本測試
bash bobi_meditation_advanced.sh
```

## 📝 注意事項

1. **版權問題：** 確保音樂文件有合法使用權
2. **文件大小：** 避免過大文件影響載入速度
3. **音質平衡：** 保持音量一致性
4. **命名規範：** 使用有意義的文件名
5. **備份管理：** 定期備份音頻文件

## 🌟 進階功能

### 動態音樂選擇
可以根據時間、心情、冥想目標自動推薦音樂：

```bash
# 根據時間推薦
get_time_based_music() {
    local hour=$(date +%H)
    if [ $hour -lt 8 ]; then
        echo "gentle_awakening.m4a"  # 溫和喚醒
    elif [ $hour -lt 12 ]; then
        echo "morning_energy.m4a"    # 晨間活力
    elif [ $hour -lt 18 ]; then
        echo "focus_meditation.m4a"  # 專注冥想
    else
        echo "evening_calm.m4a"     # 夜晚寧靜
    fi
}
```

---

**願每一個音符都能引導你進入更深的內在寧靜 🎵✨**